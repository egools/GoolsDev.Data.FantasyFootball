YUI.add("af-applet-view",function(e,t){"use strict";var i=e.Af.Utils.perfStart,n=e.Af.Utils.perfStop,s=e.Af.Bootstrap,r=e.Lang.isFunction,a="error",d="viewrender",h="viewupdate";e.namespace("Af").AppletView=e.Base.create("AfAppletView",e.View,[],{isDirty:!1,tmplPrefix:"ape-applet-templates-",_handles:[],autoRender:!0,isEditView:!1,initializer:function(t){this._handles.push(this.after("displayChange",function(e){this.fireEvent("viewdisplay",{prevRegion:e.prevVal,newRegion:e.newVal})},this)),this._handles.push(this.after("viewrender",function(){var t=this;e.use("stencil",function(e){e.Stencil.initAll(t.get("container"))})},this)),e.each(["autoRender"],function(i){e.Object.owns(t,i)&&(this[i]=t[i])},this),this.autoRender&&(this._dataHandle=this.get("model").after("dataChange",function(){this.isDirty=!0,this.render()},this))},destructor:function(){this._dataHandle&&(this._dataHandle.detach(),delete this._dataHandle),this.get("container").destroy(!0),e.Array.each(this._handles,function(e){e.detach()}),delete this.tmplPrefix,delete this.isDirty,delete this._handles},getTemplate:function(){if(this._template)return this._template;var e=this.get("name"),t=s.getTemplateName(this.get("guid"),e);return dust.cache[t]?(this._template=t,t):(t=this.tmplPrefix+e,dust.cache[t]?(this._template=t,t):null)},loadLazyTemplates:function(t){r(t)||(t=null);var i=s.getLazyLoadYuiModules(this.get("guid"),"templates"),n=e.Array.filter(i,function(e){return!dust.cache[e]});0!==n.length?e.use(n,function(){if(t){var i=e.Array.filter(n,function(e){return!dust.cache[e]});i&&i.length>0?t(i):t()}}):t&&t()},refresh:function(){throw"refresh() not implemented"},setHTML:function(t){return e.Af.Dom.setHTML(this.get("container"),t),this},shouldRender:function(){return this.isDirty||!this.hasContent()},render:function(){return this.shouldRender()&&this.loadLazyTemplates(e.bind(this._render,this)),this},_render:function(){var t,s,r,h=this.getTemplate();return h?(r=this.get("type")+":"+this.get("name")+":",i(s=r+"tojson"),t=this.get("model").toJSON(),n(s),i(s=r+"dust"),dust.render(h,t,e.bind(function(e,t){n(s),e?this.fireEvent(a,{code:d,message:e.message||e}):(this.setHTML(t),this.isDirty=!1,this.fireEvent(d))},this)),this):(this.fireEvent(a,{code:d,message:"no template found"}),this)},forceRender:function(){return this.isDirty=!0,this.render()},update:function(t,i,n,s,r){"function"==typeof(s=s||{})&&(r=s,s={});var d,u,o=this.get("container"),l=this.get("model");return t="string"==typeof t?o.one(t):t,i&&dust.cache[i]?n?t||(d="can't find node"):d="missing data":d="missing template:"+i,d?(this.fireEvent(a,{code:h,message:d}),r&&window.setTimeout(function(){r(d)},0),this):(u=e.merge(n,{i18n:l.get("i18n"),intl:l.get("intl")}),dust.render(i,u,e.bind(function(i,n){return i?(this.fireEvent(a,{code:h,message:i.message||i}),r&&r(i)):("append"===s.mode?t.append(n):e.Af.Dom.setHTML(t,n),o.contains(t)&&this.fireEvent(h),r&&r(null,n))},this)),this)},hasContent:function(){var t=this.get("container");return""!==e.Lang.trim(t.getHTML())},fireEvent:function(e,t){var i={applet:{guid:this.get("guid"),type:this.get("type"),view:{name:this.get("name")}}};i[e]=t||{},this.fire(e,i)},getRapid:function(){var t=e.Af.rapid;return(t&&r(t.getRapidTracker)?t.getRapidTracker():e.rapid)||null},rapidBeaconClick:function(t,i){var n=e.Af.rapid;t&&n&&r(n.triggerBeaconClickEvent)&&n.triggerBeaconClickEvent(t,i)},rapidParseYLK:function(t){var i=e.Af.rapid;if(t&&i&&r(i.parseYLK))return i.parseYLK(t)},rapidGetSec:function(t){var i=e.Af.rapid;if(t&&i&&r(i.getSecValue))return i.getSecValue(t)}},{ATTRS:{guid:{},type:{},name:{},model:{},display:{value:null}}})},"@VERSION@",{requires:["af-bootstrap","af-utils","base-build","dust","view"]});YUI.add("af-applet-headerview",function(e){"use strict";e.namespace("Af").AppletHeaderView=e.Base.create("AfAppletHeaderView",e.Af.AppletView,[],{autoRender:!1})},"@VERSION@",{requires:["af-applet-view","stencil-selectbox"]});/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("parallel",function(e,t){e.Parallel=function(t){this.config=t||{},this.results=[],this.context=this.config.context||e,this.total=0,this.finished=0},e.Parallel.prototype={results:null,total:null,finished:null,add:function(t){var n=this,r=n.total;return n.total+=1,function(){n.finished++,n.results[r]=t&&t.apply(n.context,arguments)||(arguments.length===1?arguments[0]:e.Array(arguments)),n.test()}},test:function(){var e=this;e.finished>=e.total&&e.callback&&e.callback.call(e.context,e.results,e.data)},done:function(e,t){this.callback=e,this.data=t,this.test()}}},"3.18.1",{requires:["yui-base"]});
YUI.add("af-compositeview",function(e,i){"use strict";var t=e.Af.Utils,n=e.Lang.isFunction,o=e.Object,s=e.Parallel;function r(e,i,t,n){var o=this;o.name=e,o.parent=i,o.selector=t,o.view=n}function a(){}r.prototype={setView:function(e){return this.view=e,this},showView:function(e,i){var t,o=this,r=o.view;if(r!==e)return i=i||{},r&&n(r.willHide)||e&&n(e.willShow)?(t=new s,r&&n(r.willHide)&&r.willHide(t.add(function(){})),e&&n(e.willShow)&&e.willShow(t.add(function(){})),t.done(a)):a(),o;function a(){o.detachView(),o.view=e,o.attachView()}},closeView:function(){var e=this,i=e.view;function t(){e.detachView(),e.view=undefined}return i&&n(i.willHide)?i.willHide(t):t(),e},getView:function(){return this.view},detachView:function(e){var i=this,t=i.view;return t&&(t.remove(e),t.removeTarget(i.parent),t.set("display",null)),i},getContainer:function(){return this.parent.get("container").one(this.selector)},attachView:function(){var e,i,t=this,n=t.view;return n&&((e=t.getContainer()).addClass("yui3-app-views"),(i=n.get("container"))&&e!==i.get("parentNode")&&e.append(i),n.addTarget(t.parent),n.set("display",t.name)),t},show:function(){return this.getContainer().show(),this},hide:function(){return this.getContainer().hide(),this}},a.prototype={allowRegionLateBind:!0,initializer:function(i){var n=this;i=i||{},n.views=t.objectMerge({},n.views,i.views),t.objectMerge({},n.regions,i.regions),o.each(n.regions,function(i,t){var o,s=n.getRegion(t);s||(s=n.createRegion(t,i.selector)),i.view&&s&&(o=e.Lang.isString(i.view)?n.getView(i.view):i.view)&&s.showView(o)})},attachRegionViews:function(){o.each(this._regions,function(e){e.attachView()})},detachRegionViews:function(e){o.each(this._regions,function(i){i.detachView(e)})},createRegion:function(e,i){var t=this;return t._regions||(t._regions={}),i=i||'[data-region="'+e+'"]',t.allowRegionLateBind||t.get("container").one(i)?(t._regions[e]=new r(e,t,i,null),t._regions[e]):null},getRegion:function(e){return this._regions?this._regions[e]:null},destroyView:function(i,t){if(i){var n,o=this._views,s=t&&!0===t.async;"string"==typeof i&&(i=o?o[i]:null),i&&(n=i.get("name"),i===o[n]&&delete o[n],s?e.later(0,null,function(){i.destroy(t)}):i.destroy(t))}},destroyViews:function(i){var t=this._views,n=i&&!0===i.async;this._views={},n?e.later(0,null,function(){o.each(t,function(e){e.destroy(i)})}):o.each(t,function(e){e.destroy(i)})},getView:function(e){return this._views?this._views[e]:null},setView:function(e,i){this._views||(this._views={}),this._views[e]=i}},e.namespace("Af").CompositeView=a},"@VERSION@",{requires:["parallel","af-utils"]});YUI.add("stencil-source",function(t,e){"use strict";var n,c;function i(t){this.constructor.superclass.constructor.call(this,t)}c=function(t,e){t.skipInsert||"string"!=typeof t.content||(t.node.set("innerHTML",t.content),t.node.setData("source-loaded",!0)),e&&e(t)},(n=function(){}).prototype={execute:function(t,e,n){t.getData("source-loaded")&&!e.force||this.fetch(t,n)},callback:function(t){t.node.hasAttribute("data-tmpl")?this.renderTemplate(t):c(t)},renderTemplate:function(e){var n,i,a=e.node,o={};n=a.getAttribute("data-tmpl"),t.use("mjata-template","mjata-util",t.bind(function(t){(i=this.parseAttrs(n))&&t.Mjata.Template.render(i.change,e.content,null,function(t,e){c({node:a,content:e},o.callback)})},this))},parseAttrs:function(e){return e?t.Mjata.Util.strParseKV(e):null}},t.Stencil.BaseSource=n,t.extend(i,t.Stencil.BasePlugin,{execute:function(e,n){var c=t.Stencil.Hosts.Source;n=n||{},e||(e=t.Stencil.getNodeList(this._node)),e.each(function(e){var i;(i=e.getAttribute("data-source-plugin"))&&(c[i]?c[i].execute(e,n,this.callback):t.use("stencil-source-"+i,t.bind(function(t){c[i]&&c[i].execute(e,n,this.callback)},this)))},this)}},{NS:"StencilSource"}),t.augment(i,t.Stencil.BaseSource),t.Stencil.registerPlugin(i,"Source"),t.Stencil.Hosts.Source=t.augment({},t.Plugin.Host,!1,null)},"@VERSION@",{requires:["node","oop","pluginhost","mjata-util"]});YUI.add("stencil-tooltip",function(t,e){"use strict";var o,s,i,n,r,a,l,c,h,u,d,f,p,b,g=null,m="D-n",w="Tooltip",N="TooltipContent",v=t.UA.ie&&t.UA.ie<7?["javascript",":false"].join(""):"about:blank",S={"default":{id:g,position:"t",validPositions:"tfr tr t tl tfl rfb rb r rt rft bfl bl b br bfr lft lt l lb lfb",content:"",classes:"FancyBox Arrow Pos-a Lh-14 Z-5 Px-10 Mt-10",role:"alert",width:"150px",maxWidth:g,minWidth:g,template:"<div tabindex='-1' class='{classes}' role='{role}'><iframe src='"+v+"' aria-hidden='true' tabindex='-1' frameborder='0' class='IframeTooltip'></iframe></div>",contentClasses:"Pos-r M-0",container:g,parent:document.body,autohide:!0,arrowHeight:8,arrowWidth:14,mouseover:!1,noPosition:!1,align:g,alignNode:g,focusNode:g,nofocus:!1,scrollIntoView:!1}},W="px",x="id",y="top",A="left",C="tooltip-content-id",E={tl:"South SouthWest",tfl:"South SouthFarWest",tc:"South",tr:"South SouthEast",tfr:"South SouthFarEast",rt:"West WestNorth",rft:"West WestFarNorth",rc:"West",rb:"West WestSouth",rfb:"West WestFarSouth",br:"North NorthEast",bfr:"North NorthFarEast",bc:"North",bl:"North NorthWest",bfl:"North NorthFarWest",lb:"East EastSouth",lfb:"East EastFarSouth",lc:"East",lt:"East EastNorth",lft:"East EastFarNorth"};function P(t){this.constructor.superclass.constructor.call(this,t)}o=function(e,o){var s,i,n=t.Node(document.createElement("div"));return n.setAttribute("className","js-Tooltip-Wrapper Pos-r"),(i=(s=t.Node.create(t.Lang.sub(o.template,o)).addClass(m).addClass(w)).get(x))||(i=t.stamp(s),s.set(x,i)),n.append(s),e.get("parentNode")?e.replace(n):t.one(o.parent).prepend(n),s.append(e),e.addClass(N),s},s=function(e,s){var i,n,r,a,l=e.get(x);return l||(l=t.stamp(e),e.set(x,l)),(i=s.id||e.getData(C))&&(r=t.one("#"+i)),r?n=(a=r.get("parentNode")).hasClass("Tooltip")?a:o(r,s):(r=t.one(document.createElement("div")),i=i||t.stamp(r),r.set(x,i),n=o(r,s)),e.setData(C,i),n},i=function(e,o,s){var i={},n=s.one("."+N),r=n.get(x),a=e.get(x);return o.mouseover&&!s.hasAttribute("data-tooltip")&&(s.setAttribute("data-trigger","mouseenter mouseleave").setAttribute("data-tooltip",'{"target":"#'+a+'","mouseenter":{"show":{"id":"'+r+'","noPosition":true,"nofocus":'+o.nofocus+'}},"mouseleave":{"hide":{"id":"'+r+'","noPosition":true}}}').setAttribute("data-plugin","tooltip"),t.Stencil.initAll(s)),o.maxWidth&&(i.maxWidth=o.maxWidth),o.minWidth&&(i.minWidth=o.minWidth),o.width&&(i.width=o.width),n.setStyles(i).setAttribute("className",o.contentClasses+" "+N),s},n=function(e,o,s){var i;return o||(o={}),i=o.type||"default",s&&s.type&&(0===s.type.indexOf("mouse")||0===s.type.indexOf("pointer"))&&(o.nofocus=!0),t.merge(S[i],o)},a=function(e,o,n){var a,l;n||(n=s(e,o)),n.getData("beenShown")||(i(e,o,n),this.processSources(n),n.setData("beenShown",1)),!o.noContentUpdate&&o.content&&this.setContent(n,o.content),o.noPosition?n.removeClass(m):this.position(e,n,o),o.scrollIntoView&&n.scrollIntoView(),!1===o.nofocus&&(o.autohide&&(a=t.bind(r,this,g,g,n)),l=o.focusNode?t.one(o.focusNode):n,this.focus(n,l,a)),n.one(".TooltipContent").fire("tooltip:show")},r=function(t,e,o){o||(o=s(t,e)),this.releaseFocus(o),o.addClass(m),o.one(".TooltipContent").fire("tooltip:hide")},l=function(t){var e=0;switch(t){case"l":case"t":e=.25;break;case"r":case"b":e=.75;break;case"fl":case"ft":e=0;break;case"fr":case"fb":e=1;break;default:e=.5}return e},c=function(t,e){var o=0;switch(t){case"fl":case"fr":case"ft":case"fb":o=(2+e/2)*("fr"===t||"fb"===t?-1:1)}return o},u=function(t,e,o,s){var i=0,n=0;return"t"===o||"b"===o?(i=-l(s)*e.w,n="t"===o?-e.h:t.h):(i="l"===o?-e.w:t.w,n=t.h/2-l(s)*e.h),{x:t.x+i,y:t.y+n,w:e.w,h:e.h}},h=function(t,e){return t.left<=e.x&&t.right>=e.x+e.w&&t.top<=e.y&&t.bottom>=e.y+e.h},p=function(t){return t.substr(1)||"c"},b=function(t){return t.charAt(0)},f=function(e,o,s,i){var n,r,a,l,c,d=i.validPositions.split(" "),f=t.Array.indexOf(d,i.box+i.arrow),g=!1,m=!1;for("c"===i.arrow&&f<0&&(f=t.Array.indexOf(d,i.box)),r=f;!g&&!m;)l=b(d[n=r]),c=p(d[n]),a=u(e,s,l,c),g=h(o,a),(r+=1)===d.length&&(r=0),r===f&&(m=!0);return g&&(i.box=l,i.arrow=c),{styles:i}},d=function(e,o,s,i){var n,r={x:o.getX(),y:o.getY(),w:o.get("offsetWidth"),h:o.get("offsetHeight")},a={x:0,w:s.get("offsetWidth"),h:s.get("offsetHeight")};return{container:n=e?{right:e.getX(),left:e.getX()+e.get("offsetWidth"),height:e.get("offsetHeight"),top:e.getY()}:t.DOM.viewportRegion(),pointAtNode:r,tooltip:a,positions:f(r,n,a,i)}},t.extend(P,t.Stencil.BasePlugin,{setContent:function(e,o){t.Stencil.getNodeList(e).each(function(e){var s=e.one(".TooltipContent");"string"==typeof o?s.set("innerHTML",o):(s.set("innerHTML",""),s.appendChild(t.one(o)))},this)},position:function(e,o,s){var i,n,r,a,h,u,f,g,m=s.position,N=b(m),v=p(m),S=t.UA.ie&&t.UA.ie<8?0:s.arrowHeight,x=s.arrowWidth,C=s.align,P=s.alignNode,T=o.get("parentNode"),F=s.classes,H=s.container,k={};switch("rtl"===T.getStyle("direction")&&(N="r"===N?"l":"r",v="l"===v||"fl"===v?"l"===v?"r":"fr":"r"===v?"l":"fl"),P&&(P=t.one(P)),H&&(H=t.one(H)),F=F+" V-h "+w,o.setAttribute("className",F),N=(i=d(H,e,o,{arrow:v,box:N,validPositions:s.validPositions})).positions.styles.box,v=i.positions.styles.arrow,F+=" "+E[m=N+v],o.setAttribute("className",F),h=T.getY(),a=T.getX(),u=Number(o.getComputedStyle("marginTop").slice(0,-2)),f=e.getX()-a,g=e.getY()-h,n=l(v),r=c(v,x),N){case"b":case"t":k[A]=f-i.tooltip.w*n-r+i.pointAtNode.w/2+W,k[y]="t"===N?g-i.tooltip.h-S-u+W:g+i.pointAtNode.h+S-u+W;break;case"l":case"r":k[A]="r"===N?f+i.pointAtNode.w+S+W:f-i.tooltip.w-S+W,k[y]=P&&"t"===C?P.getY()-h-u-r+W:g+i.pointAtNode.h/2-u-i.tooltip.h*n-r+W}o.setStyles(k),o.removeClass("V-h")},show:function(t,e,o){var s;this._node;s=n(0,e,o),t.each(function(t){a.call(this,t,s)},this)},hide:function(t,e,o){var s;this._node;s=n(0,e,o),t.each(function(t){r.call(this,t,s)},this)},toggle:function(t,e,o){var i,l;this._node;l=n(0,e,o),t.each(function(t){(i=s(t,l)).hasClass(m)?a.call(this,t,l,i):r.call(this,t,l,i)},this)}},{NS:"StencilTooltip"}),
t.Stencil.registerPlugin(P,"Tooltip")},"@VERSION@",{requires:["stencil-base","yui-base","dom-base","dom-screen","node-base","node-pluginhost","node-style","stencil-source"]});YUI.add("af-applet",function(e,t){"use strict";var i=e.Af,n=i.Utils,r=e.Lang,a=e.Object,s=e.Array,o=i.Config,l=i.Bootstrap,g="container",p="guid",c="model",f="type",d="footer",v="header",u="edit",w="main",h=o.isDev(),V=r.isFunction,_=n.objectGetValue,m=n.objectMerge,y=n.perfStart,A=n.perfStop;function M(e){if(!e)return e;var t=e.split("-");return(t=s.map(t,function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(".")}function C(t){e.EventTarget.prototype.constructor.call(this),this.initializer(t)}e.extend(C,i.CompositeView,{views:{main:{region:w},settings:{region:u},remove:{region:u},moreinfo:{region:u},header:{region:v},footer:{region:d}},regions:{main:{view:w},header:{view:v},footer:{view:d},edit:{defer:!0,view:"settings"}},allowRegionLateBind:!1,initializer:function(n){var s=this;s.guid=n.guid,s.type=n.type,s.clientId=e.guid("appletClientId_"),s.container=e.one(n.container),s._destroyed=!1,s.views=m(s.views,n.views),s.regions=m(s.regions,n.regions),a.each(s.regions,function(e,t){var i=s.getRegion(t);i||(i=s.createRegion(t,e.selector))}),s._bootstrapMV(function(e){try{if(e)return;var o=n.type+":aptShowViews";y(o),a.each(s.regions,function(e,t){if(e&&e.view){var i,n=s.getRegion(t);n&&(i=r.isString(e.view)?s.getView(e.view):e.view)&&n.showView(i)}}),A(o)}catch(l){if(h)throw l;i.Beacon.error(t,{},{code:"appbstrap",message:l.stack||l.message,appletType:s.type})}}),s._eventHandlers=[],s._eventHandlers.push(s.after("*:showmessage",function(e){i.Message.show(s.get(g),e.showmessage)}))},destroy:function(){var e=this,t=e.get(c);e.destroyViews(),e._regions=e._views=e.views=e.regions=null,t&&(e.set(c,null,{silent:!0}),t.destroy()),s.each(e._eventHandlers,function(e){e&&e.detach()}),e._eventHandlers=null,e._destroyed=!0,e.fireEvent("appletdestroyed"),e.detachAll()},createView:function(t){var n,r,a,s=this,o=s.views[t],d=i.AppletDom.classes().view_container_prefix+t;return o&&o.region&&!s.getRegion(o.region)?null:(r=s._getViewClass(t))?((n=e.merge({applet:s,name:t,guid:s.get(p),type:s.get(f),model:s.get(c),container:s.get(g).one("div."+d)},l.getViewMeta(s.get(p),t).config)).container||(n.container=e.Node.create('<div class="'+d+'"/>')),(a=new r(n)).addTarget(s),s.setView(t,a),a):null},fireEvent:function(e){this.fire(e,{applet:{guid:this.get(p),type:this.get(f),clientId:this.clientId}})},getViews:function(){return this._views},get:function(e){return this[e]},set:function(e,t){this[e]=t},regionForView:function(e){var t=this.views&&this.views[e];return t?t.region:null},_bootstrapMV:function(e){var t=this,i=t.get(g),n={batch:r.isValue(i.getData("applet-defer"))};i.one(".App-Toolbar_v2")&&(n.extraMods=["af-applet-editview","af-applet-settingsview"]),l.load(t.get(p),n,function(i){if(i)e(i);else if(t._destroyed)e("applet was destroyed");else{var n=t.get(f),r=n+":aptCreateModel";y(r),t._createModel(),A(r),y(r=n+":aptCreateViews"),t._createViews(),A(r),e()}})},_createModel:function(){var e=this._getModelClass();this.set(c,new e({guid:this.get(p),type:this.get(f)}))},_createViews:function(){var t=this,n=t.get(g),r=l.getMeta(t.get(p)).views,o=i.AppletDom.classes().view_container_prefix;a.each(r,function(i,n){var r;(i=e.merge(t.views[n],i)).isActiveView&&i.region&&(r=t.regions[i.region])&&(r.view=n)}),a.each(t.regions,function(e,i){var r,a,l,g;if(r=i,a=e.view,l=["js-applet-view-container"],(g=n.one("div[data-region="+r+"]"))&&(r!==a&&l.push(o+r),s.forEach(l,function(e){var t=g.one("div."+e);t&&t.replaceClass(e,o+a)})),!e.defer){var p=e.view&&t.createView(e.view);p&&p.render()}})},_getModelClass:function(){var t=l.getModelClass(this.get(p),"applet_model");return V(t)?t:(t=_(e,M(this.get(f))+"AppletModel"),V(t)?t:i.AppletModel)},_getViewClass:function(t){var n,r=this.get(p),s=l.getViewClass(r,t);if(V(s))return s;if(s=_(e,M(this.get(f))+M(t)+"View"),V(s))return s;if(n=l.getViewMeta(r,t),0===a.size(n)){if(t===d)return null;if(t===v)return null}return s=_(e.Af,"Applet"+M(t)+"View"),V(s)?s:this.views[t]&&this.views[t].region===u?e.Af.AppletEditView:i.AppletView}}),e.EventTarget&&e.augment(C,e.EventTarget,!0,null,{emitFacade:!0,prefix:"AfApplet"}),e.namespace("Af").Applet=C},"@VERSION@",{requires:["af-applet-dom","af-applet-model","af-applet-headerview","af-bootstrap","af-compositeview","af-config","af-utils","array-extras","event-custom","node","stencil-tooltip"]});YUI.add("af-applet-init",function(e,t){"use strict";var i=e.Af,a=i.AppletDom,n=i.Utils,p=i.Config,o=e.Lang,s=i.Bootstrap,r=e.Object,l=e.DOM,c=i.Beacon,f="appletinit",d="data-applet-init",u="appletsinit",h="viewport",g="js-appletiniting",w=n.perfStart,v=n.perfStop,y=p.isDev();function A(){this._defInit=p.getContext("default_appletinit")||h}A.prototype={name:"applet.init",execute:function(e,t,i){switch(t.action){case"page.init":this.initApplets(e),e.after("*:initapplet",function(t){var i=t.initapplet;this.initApplet(e,i)},this);break;case"applet.init":this.initApplet(e,t.params)}t.callback&&t.callback(),i()},initApplets:function(t){var i,a,p=this,o=[],c=n.screenTouchable()?"touchstart":"mouseenter";a=this._scan(t),o=(o=(o=o.concat(r.keys(a.now))).concat(r.keys(a.lazy))).concat(r.keys(a.viewport)),s.load(o,{},function(){r.each(a.now,function(i){e.later(5,p,function(){this.initApplet(t,{node:i})})})}),r.each(a.lazy,function(e){e.once(c,function(){this.initApplet(t,{node:e})},this)},this),r.size(a.viewport)&&(r.each(a.viewport,function(e,i){e.once(c,function(){delete a.viewport[i],this.initApplet(t,{node:e})},this)},this),i=e.one(window).after("scroll",n.throttle(function(){var n=l.viewportRegion();r.each(a.viewport,function(i,p){l.inRegion(i.getDOMNode(),n,!1)&&(delete a.viewport[p],e.later(5,this,function(){this.initApplet(t,{node:i})}))},p),i&&0===r.size(a.viewport)&&i.detach()},200))),e.publish(u,{fireOnce:!0,async:!0}),e.fire(u,{applets:t})},_scan:function(t){var i,n=this,p="aptsScanDOM",s={deferred:{},now:{},viewport:{},lazy:{}};return w(p),a.all(e.one("body"),function(e){var p=e.getData(),r=p["applet-defer"],c=p["applet-init"],f=a.getGuid(e);if(!o.isValue(r))switch(c=c||n._defInit){case"critical":n.initApplet(t,{node:e});break;case"now":s.now[f]=e;break;case"lazy":s.lazy[f]=e;break;case h:i=i||l.viewportRegion(),l.inRegion(e.getDOMNode(),i,!1)?s.now[f]=e:s.viewport[f]=e}}),v(p),s},initApplet:function(e,n){!(n=n||{}).node&&n.guid&&(n.node=a.getNode(n.guid));var p,o,s,r,l=n.node;if(!l||!l._node||l.hasClass(g))return null;if(p=a.getGuid(l),o=a.getType(l),e.applets[p]){if(!n.replace)return e.applets[p];try{e.applets[p].destroy()}catch(u){if(y)throw u;c.error(t,{},{code:"appdestroy",message:u.stack||u.message,appletType:o})}delete e.applets[p]}if(l.addClass(g),w(s=o+"_aptNew",!0),r={guid:p,type:o,container:"#"+l.get("id")},y)return e.applets[p]=new i.Applet(r),e.applets[p].addTarget(e),v(s,!0),e.fire(f,{applet:{guid:p,type:o}}),l.removeClass(g),l.removeAttribute(d),e.applets[p];try{return e.applets[p]=new i.Applet(r),e.applets[p].addTarget(e),v(s,!0),e.fire(f,{applet:{guid:p,type:o}}),l.removeAttribute(d),e.applets[p]}catch(h){return c.error(t,{},{code:"appinit",message:h.stack||h.message,appletType:o}),null}finally{l.removeClass(g)}}},e.namespace("Af").AppletInit=A},"@VERSION@",{requires:["af-applet","af-beacon","af-bootstrap","af-config","af-utils","event-touch","oop"]});/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("template-base",function(e,t){function n(t,n){this.defaults=n,this.engine=t||e.Template.Micro,this.engine||e.error("No template engine loaded.")}n._registry={},n.register=function(e,t){return n._registry[e]=t,t},n.get=function(e){return n._registry[e]},n.render=function(t,r,i){var s=n._registry[t],o="";return s?o=s(r,i):e.error('Unregistered template: "'+t+'"'),o},n.prototype={compile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.compile(t,n)},precompile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.precompile(t,n)},render:function(t,n,r){return r=r?e.merge(this.defaults,r):this.defaults,this.engine.render?this.engine.render(t,n,r):this.engine.compile(t,r)(n,r)},revive:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.revive?this.engine.revive(t,n):t}},e.Template=e.Template?e.mix(n,e.Template):n},"3.18.1",{requires:["yui-base"]});
YUI.add("ape-af-templates-message",function(e,t){dust.cache=dust.cache||{},dust.cache[t]=function(e){function t(e,t){return e.w('<div role="alertdialog" tabindex="0" class="').f(t.get(["stencilLevel"],!1),t,"h").w(" ").f(t.get(["stencilType"],!1),t,"h").w('Alert js-msg" aria-labelledby="desc-').f(t.get(["guid"],!1),t,"h").w('">\n\t').x(t.get(["glyphHook"],!1),t,{"else":s,block:n},{}).w('\n<p id="desc-').f(t.get(["guid"],!1),t,"h").w('" class="Bfc Reset Mt-2">').f(t.get(["content"],!1),t,"h",["s"]).w("</p>\n</div>\n")}function s(e,t){return e.w('\n<span class="Alert').f(t.get(["stencilLevel"],!1),t,"h").w('Icon Icon Fl-start Mend-10"> ').f(t.get(["stencilIcon"],!1),t,"h",["s"]).w('<b class="Hidden">').f(t.get(["stencilLevel"],!1),t,"h").w('</b></span>\n\t    <button class="AlertCloseBtn Icon Fl-end Mstart-10 ButtonNaked js-msg-close">&#xe009;<b class="Hidden">Close</b></button>\n    ')}function n(e,t){return e.w('\n<span class="').f(t.get(["glyphHook"],!1),t,"h").w(' AlertIcon Fl-start Mend-10"><b class="Hidden">').f(t.get(["stencilLevel"],!1),t,"h").w('</b></span>\n\t    <button class="').f(t.get(["glyphHook"],!1),t,"h").w(' AlertCloseBtn Fl-end Mstart-10 ButtonNaked js-msg-close"><b class="Hidden">Close</b></button>\n    ')}return dust.register("ape-af-templates-message",t),t.__dustBody=!0,s.__dustBody=!0,n.__dustBody=!0,t}(),dust.cache["ape-af:message.dust"]=dust.cache["ape-af:message"]=dust.cache[t],e.Template._cache=e.Template._cache||{},e.Template._cache["ape-af/templates/message"]=function(e,s){e=e||{},dust.render(t,e,s)}},"@VERSION@",{requires:["template-base","dust"]});YUI.add("af-message",function(e,s){"use strict";var a,n={ERR:"Doh! Something went wrong. Please try again.",ERR_LOAD:"Oops, something went wrong. Please try again.",ERR_SAVE_SETTINGS:"Oops, we couldn't save your preferences. Please try again.",ERR_SAVE:"Oops, something got stuck in our tubes. Please try again.",ERR_AUTH:"Oops, you need to log in again."},o="D-n",t="info",r={error:"Error",important:"Important",info:"Info",success:"Success",warn:"Warning"},i={error:"&#xe046;",important:"&#xe046;",info:"&#xe035;",success:"&#xe063;",warn:"&#xe046;"},l={page:"Page",modal:"Modal",app:"App"};e.namespace("Af").Message={show:function(s,p,c,g){var d,u,f,m,h,R=p.template||"ape-af-templates-message";a||(a=e.Af.Utils.i18n("ape-af/strings"),0===e.Object.size(a)&&(a=n)),(s=e.one(s))||(s=e.one("body")),g||(g="BODY"===s.get("nodeName")?"page":s.hasClass("js-applet")?"app":"modal"),d=s.one(">.js-msg"),u=p.level?p.level.toLowerCase():t,m=p.token,(f=p.content)||(m&&(f=a[m]),f||"error"!==u||(f=a.ERR)),h={guid:s.generateID(),stencilIcon:i[u]||i[t],stencilLevel:r[u]||r[t],stencilType:l[g]||l.page,content:f},c&&c.glyphHook&&(h.glyphHook=c.glyphHook),dust.render(R,h,e.bind(function(a,n){if(!a){var t=e.Node.create(n);t.addClass(o),d?d.replace(t):s.append(t),this._show(t)}},this))},_show:function(s){if(s=e.one(s)){s.removeClass(o).focus(),s.show("fadeIn",{duration:1});var a=s.one(".js-msg-close");a&&a.once("click",function(e){var a;e.preventDefault(),a=1,s.hide("fadeOut",{duration:a},function(){s.addClass(o),s.remove(!0)}),s.addClass(o)})}}}},"@VERSION@",{langBundles:["strings"],requires:["ape-af-templates-message","af-utils","node-base","selector-css3"]});YUI.add("ape-applet-templates-reload",function(e,t){dust.cache=dust.cache||{},dust.cache[t]=function(e){function t(e,t){return e.w('<div role="alertdialog" tabindex="0" class="js-msg Bgc-w" style="border:1px solid #000;border-radius:3px" aria-labelledby="desc-').f(t.get(["guid"],!1),t,"h").w('">\n    <p id="desc-').f(t.get(["guid"],!1),t,"h").w('" class="Bfc Reset Mt-2 Ta-c">').f(t.get(["content"],!1),t,"h",["s"]).w('</p>\n    <button class="AlertReloadBtn Icon ButtonNaked js-applet-action D-b Mx-a My-10 Fz-2xl" data-applet-action="loadapplet">&#xe021;<b class="Hidden">Reload</b></button>\n</div>\n')}return dust.register("ape-applet-templates-reload",t),t.__dustBody=!0,t}(),dust.cache["ape-applet:reload.dust"]=dust.cache["ape-applet:reload"]=dust.cache[t],e.Template._cache=e.Template._cache||{},e.Template._cache["ape-applet/templates/reload"]=function(e,a){e=e||{},dust.render(t,e,a)}},"@VERSION@",{requires:["template-base","dust"]});