!function(e){function t(t){for(var n,i,s=t[0],c=t[1],u=t[2],h=0,p=[];h<s.length;h++)i=s[h],o[i]&&p.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(l&&l(t);p.length;)p.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={7:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([641,0]),r()}({190:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=s(e);if(t){var a=s(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c={close:{type:"font",value:"&#xe009;"},plus:{type:"font",value:"&#xe035;"},minus:{type:"font",value:"&#xe033;"},trade:{type:"font",value:"&#xe037;"},search:{type:"font",value:"&#xe01b;"},star:{type:"font",value:"&#xe023;"},star_hollow:{type:"font",value:"&#xe061;"},info:{type:"font",value:"&#xe013;"},help:{type:"font",value:"&#xe03f;"},talk_bubble:{type:"font",value:"&#xe05e;"},loading:{type:"image",value:"https://s.yimg.com/cv/ae/fantasy/img/fuji/loaders/blue-20.gif"}},u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,React.Component);var t=i(r);function r(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),!(n=t.call(this,e)).props.icon in c&&console.error(n.props.icon+" is not a valid icon"),n}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r)}(r,[{key:"render",value:function(){var e=c[this.props.icon];return"image"===e.type?React.createElement("img",{src:e.value,style:{height:"1em",width:"1em"}}):React.createElement("span",{className:"F-icon",style:{fontSize:"1em",width:"1em"},dangerouslySetInnerHTML:{__html:e.value}})}}]),r}();t.default=u,e.exports=t.default},641:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=v(e);if(t){var a=v(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return d(e)}(this,r)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=r(1),g=r(190),b=r(119),k=r(232),x=r(83),S=r(67),w=r(642),O={shouldSort:!0,threshold:.6,location:0,distance:100,includeMatches:!0,tokenize:!0,maxPatternLength:32,minMatchCharLength:1,keys:["asciiName"]},_={UP:38,DOWN:40,ENTER:13,ESCAPE:27};window.ScriptRunner.registerScript("playersearch",function(e){YSF.use("ysf-xhr","json-parse",function(t){!function(e,t,r){var n=t+"/"+e+"/",o=function(e){return n+"playersearch?search="+encodeURIComponent(e)},c=function(e){return n+"playersearchservice?show_actions=1&q="+encodeURIComponent(e)},l=function(e){p(r,React.Component);var t=y(r);function r(e){return u(this,r),t.call(this,e)}return h(r,[{key:"insertString",value:function(e,t,r){return e.substr(0,t)+r+e.substr(t)}},{key:"getHighlighted",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.props.result,o=s(n.matches);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.key===r){var i,c=n.item[e],u=0,l=s(a.indices);try{for(l.s();!(i=l.n()).done;){var h=i.value,p=h[0]+u,f=h[1]+u+1;c=this.insertString(this.insertString(c,p,"<strong>"),f+8,"</strong>"),u+=17}}catch(e){l.e(e)}finally{l.f()}return c}}}catch(e){o.e(e)}finally{o.f()}return this.props.result.item[e]}},{key:"render",value:function(){var e=this.props,t=e.result,r=e.selected,n=e.requests;return React.createElement("div",{className:m("playersearch-results-result Bgc(#eee):h Pos(r) Trsp(a)",{"playersearch-results-result-selected Bgc(#eee)":r,"Bgc(t)":!r})},React.createElement("div",{className:"Fl(start)"},React.createElement(k,{onClick:t.item.watch.send,className:m("playersearch-results-result-watch-icon playersearch-results-result-"+t.item.watch.status+" D(b) C(#0078ff) Fz(13px) P(14px) C(#222):h Td(n):h Bd(n) Bgc(t) O(n) Cur(p)")},React.createElement(g,{icon:n["watch-"+t.item.id]?"loading":"watching"===t.item.watch.status?"star":"star_hollow"}))),React.createElement("div",{className:"Fl(end)"},React.createElement(b,{href:t.item.action.url,className:m("playersearch-results-result-action-icon playersearch-results-result-"+t.item.action.status+" D(b) Fz(13px) P(14px) Op(0.6) Op(1):h Td(n):h",{"C(red)":"drop"===t.item.action.status,"C(green)":"add"===t.item.action.status,"C(#0078ff)":"trade"===t.item.action.status,"D(n)":-1!=t.item.action.status.indexOf("disabled")})},React.createElement(g,{icon:"drop"===t.item.action.status?"minus":"add"===t.item.action.status?"plus":"trade"}))),React.createElement("div",null,React.createElement(b,{href:o(t.item.name),className:"playersearch-results-result-content D(b) P(14px) C(black) Fz(13px) Td(n):h"},React.createElement("span",{className:"playersearch-results-result-content-name Fw(400) Va-b",dangerouslySetInnerHTML:{__html:this.getHighlighted("name","asciiName")}}),React.createElement("span",{className:"playersearch-results-result-content-position Fw(555500) Fz-xxs Mstart(4px) Op(0.5)"},t.item.teamPosition))),React.createElement("div",{className:"Cl(b)"}))}}]),r}(),f=function(e){p(r,React.Component);var t=y(r);function r(){return u(this,r),t.apply(this,arguments)}return h(r,[{key:"render",value:function(){var e=this,t=null,r=this.props,n=r.typing,a=r.selected,i=r.results,s=r.value;if(0===i.length&&!1===n||""===s){if(""===s)return null;t=React.createElement("div",{className:"playersearch-results-noresults C(#555) P(10px) Ta(c) Bgc(#eee)"},"There are no results")}else t=[i.length>0?React.createElement("div",{key:"playersearch-results",className:m("playersearch-results Trsdu(250ms) Trsp(opacity)",{"playersearch-results-typing Op(0.3)":n})},i.map(function(t,r){return React.createElement(l,{requests:e.props.requests,selected:r===a,key:t.item.id,result:t})})):React.createElement("div",{key:"playersearch-searching",className:"playersearch-results-searching D(b) C(#aaa) P(10px) Ta(c)"},"Searching..."),React.createElement("a",{href:o(s),key:"playersearch-results-moreresults",className:"playersearch-results-moreresults D(b) C(#0078ff) P(10px) Ta-c Bdts(s) Bdtc(#eee) Bdtw(1px)"},"View More Results")];return React.createElement("div",{className:"playersearch-results-wrapper Pos(a) Bgc(white) T(100%) Start(0px) W(100%) Bxsh(shadow-1) Bdts(s) Bdtw(1px) Bdtc(#0078ff)"},t)}}]),r}(),v=function(e){p(n,React.Component);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).state={open:!1,typing:!1,value:"",selected:-1,results:[],requests:{}},r.lastSearch="",r.typingTimeout=null,r.fuse=new w([],O),r.open=r.open.bind(d(r)),r.search=r.search.bind(d(r)),r.change=r.change.bind(d(r)),r.pageClick=r.pageClick.bind(d(r)),r.clear=r.clear.bind(d(r)),r.keyDown=r.keyDown.bind(d(r)),r.close=r.close.bind(d(r)),r.searchRequestCount=0,r.requestCount=0,r.typingOver=!1,r}return h(n,[{key:"queueRequest",value:function(e,t){var n=this;n.setState(function(t){return a(a({},t),{},{requests:a(a({},t.requests),{},i({},e,!0))})}),n.requestCount++,r(t,function(e){n.requestCount--,0===n.requestCount&&n.search(Object.keys(n.state.requests))})}},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;function n(){var r=t.state.typing;t.typingOver&&0==t.searchRequestCount&&(r=!1,t.typingOver=!1),t.setState({results:t.fuse.search(t.state.value).slice(0,6),requests:function(e,t){return t.reduce(function(e,t){return delete e[t],e},e)}(t.state.requests,e||[]),typing:r})}var o=3===t.state.value.length,a=t.typingOver&&t.state.value.length<3&&t.state.value.length>0,i=t.lastSearch!=t.state.value.substr(0,3)&&t.state.value.length>3;e||o||a||i?(t.lastSearch=t.state.value.substr(0,3),t.searchRequestCount++,r(c(t.lastSearch),function(e){t.searchRequestCount--;var r=e.objects[0],o=r.players||[],a=r.char_map||[],i=new RegExp("["+a.map(function(e){return e[1]}).join("")+"]","g"),s=a.reduce(function(e,t){return e[t[1]]=t[0],e},{}),c=Object.keys(o).map(function(e){var r=o[e];return{name:r.player_combo.name,asciiName:r.player_combo.name.replace(i,function(e){return s[e]}),id:r.player_combo.player_id,teamPosition:r.player_combo.team_name+" - "+r.player_combo.position,watch:{send:t.queueRequest.bind(t,"watch-"+r.player_combo.player_id,r.watch.url),status:r.watch.status},action:{url:r.action.url,status:r.action.action}}});t.fuse=new w(c,O),n()})):n()}},{key:"close",value:function(){this.setState({open:!1,typing:!1,value:"",results:[]}),this.refs.input.blur()}},{key:"keyDown",value:function(e){if(e.keyCode===_.UP){e.preventDefault();var t=this.state.selected-1;t<-1&&(t=this.state.results.length-1),this.setState({selected:t})}else if(e.keyCode===_.DOWN){e.preventDefault();var r=this.state.selected+1;r>=this.state.results.length&&(r=-1),this.setState({selected:r})}else e.keyCode===_.ENTER?location.href=o(-1===this.state.selected?this.state.value:this.state.results[this.state.selected].item.name):e.keyCode===_.ESCAPE&&this.close()}},{key:"pageClick",value:function(e){this.refs.playerSearch.parentElement.contains(e.target)||null===e.target.parentElement||this.close()}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.pageClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.pageClick)}},{key:"change",value:function(e){var t=this,r=e.target.value;this.typingOver=!1,this.setState({typing:!0,value:r,selected:-1},function(){null!==t.typingTimeout&&clearTimeout(t.typingTimeout),t.typingTimeout=setTimeout(function(){t.typingOver=!0,t.search()},250),t.search()})}},{key:"clear",value:function(){this.setState({value:"",results:[],typing:!1})}},{key:"open",value:function(){var e=this;this.setState({open:!0},function(){e.refs.input!==document.activeElement&&e.refs.input.focus()})}},{key:"render",value:function(){return React.createElement("div",{className:m("playersearch-wrapper Trsp(a) Trstf(ease-out-quint) Trsdu(150ms)",{"W(44px) H(44px) Ov(h) Bdrs(44px)":!this.state.open,"H(44px) Ov(h)":this.state.open&&""===this.state.value,"W(288px) Bdrs(0px)":this.state.open})},React.createElement("div",{ref:"playerSearch",onKeyDown:this.keyDown,onClick:this.open,className:m("Pos(r) D(ib) W(288px) Trsp(a) Trsdu(150ms) Ta(start)",{"Bxsh(shadow-1) Bgc(white)":this.state.open,"Bgc(t)":!this.state.open})},React.createElement("a",{className:m("playersearch-searchicon yfa-rapid-beacon yfa-rapid-module-search-icon Va(t) Px(12px) Py(11px) Fz(16px) D(ib) Td(n) Td(n):h",{"C(white) C(white):h Cur(p)":!this.state.open,"C(#cbcbcb) C(#cbcbcb):h":this.state.open}),title:"Search Players"},React.createElement(g,{icon:"search"})),React.createElement("div",{className:"playersearch-input-wrapper D(ib)"},React.createElement("input",{ref:"input",value:this.state.value,onChange:this.change,placeholder:"Type to search players...",className:"playersearch-input-field Mstart(2px) O(n) Fz(13px) Bd(n) Py(14px) D(b) W(200px) Fw(400) Bgc(t) C(#333)",type:"text",maxLength:"32"})),React.createElement("div",{className:"playersearch-closeicon Va(t) D(ib) P(14px) Fz(13px) Cur(p)",onClick:this.clear},React.createElement(g,{icon:"close"})),React.createElement(f,{requests:this.state.requests,selected:this.state.selected,results:this.state.results,value:this.state.value,typing:this.state.typing})))}}]),n}(),C=x(function(e){p(r,React.Component);var t=y(r);function r(){return u(this,r),t.apply(this,arguments)}return h(r,[{key:"render",value:function(){return React.createElement("div",{className:"Atomic"},React.createElement(v,null),React.createElement("div",{className:"Cl-end"}))}}]),r}(),{},[S]);ReactDOM.render(React.createElement(C,null),document.getElementById("league-info-playersearch"))}(e.leagueId,e.gameUri,function(e,r){t.Fantasy.XHR.fetchFromAjax(e,{success:function(e,n){r(t.JSON.parse(n.response))}},void 0,void 0,!0)})})})},642:function(e,t,r){
/*!
 * Fuse.js v3.6.1 - Lightweight fuzzy-search (http://fusejs.io)
 * 
 * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 */
e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1),i=r(7),s=i.get,c=(i.deepValue,i.isArray),u=function(){function e(t,r){var n=r.location,o=void 0===n?0:n,a=r.distance,i=void 0===a?100:a,c=r.threshold,u=void 0===c?.6:c,l=r.maxPatternLength,h=void 0===l?32:l,p=r.caseSensitive,f=void 0!==p&&p,y=r.tokenSeparator,d=void 0===y?/ +/g:y,v=r.findAllMatches,m=void 0!==v&&v,g=r.minMatchCharLength,b=void 0===g?1:g,k=r.id,x=void 0===k?null:k,S=r.keys,w=void 0===S?[]:S,O=r.shouldSort,_=void 0===O||O,C=r.getFn,P=void 0===C?s:C,R=r.sortFn,E=void 0===R?function(e,t){return e.score-t.score}:R,M=r.tokenize,j=void 0!==M&&M,T=r.matchAllTokens,N=void 0!==T&&T,A=r.includeMatches,L=void 0!==A&&A,D=r.includeScore,q=void 0!==D&&D,F=r.verbose,I=void 0!==F&&F;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:o,distance:i,threshold:u,maxPatternLength:h,isCaseSensitive:f,tokenSeparator:d,findAllMatches:m,minMatchCharLength:b,id:x,keys:w,includeMatches:L,includeScore:q,shouldSort:_,getFn:P,sortFn:E,verbose:I,tokenize:j,matchAllTokens:N},this.setCollection(t),this._processKeys(w)}var t,r;return t=e,(r=[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"_processKeys",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,r=e.length;t<r;t+=1){var n=e[t];this._keyWeights[n]=1,this._keyNames.push(n)}else{for(var o=null,a=null,i=0,s=0,c=e.length;s<c;s+=1){var u=e[s];if(!u.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var l=u.name;if(this._keyNames.push(l),!u.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');var h=u.weight;if(h<0||h>1)throw new Error('"weight" property in key must bein the range of [0, 1)');a=null==a?h:Math.max(a,h),o=null==o?h:Math.min(o,h),this._keyWeights[l]=h,i+=h}if(i>1)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var r=this._prepareSearchers(e),n=r.tokenSearchers,o=r.fullSearcher,a=this._search(n,o);return this._computeScore(a),this.options.shouldSort&&this._sort(a),t.limit&&"number"==typeof t.limit&&(a=a.slice(0,t.limit)),this._format(a)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var r=e.split(this.options.tokenSeparator),n=0,o=r.length;n<o;n+=1)t.push(new a(r[n],this.options));return{tokenSearchers:t,fullSearcher:new a(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=this.list,n={},o=[];if("string"==typeof r[0]){for(var a=0,i=r.length;a<i;a+=1)this._analyze({key:"",value:r[a],record:a,index:a},{resultMap:n,results:o,tokenSearchers:e,fullSearcher:t});return o}for(var s=0,c=r.length;s<c;s+=1)for(var u=r[s],l=0,h=this._keyNames.length;l<h;l+=1){var p=this._keyNames[l];this._analyze({key:p,value:this.options.getFn(u,p),record:u,index:s},{resultMap:n,results:o,tokenSearchers:e,fullSearcher:t})}return o}},{key:"_analyze",value:function(e,t){var r=this,n=e.key,o=e.arrayIndex,a=void 0===o?-1:o,i=e.value,s=e.record,u=e.index,l=t.tokenSearchers,h=void 0===l?[]:l,p=t.fullSearcher,f=t.resultMap,y=void 0===f?{}:f,d=t.results,v=void 0===d?[]:d;!function e(t,o,a,i){if(null!=o)if("string"==typeof o){var s=!1,u=-1,l=0;r._log("\nKey: ".concat(""===n?"--":n));var f=p.search(o);if(r._log('Full text: "'.concat(o,'", score: ').concat(f.score)),r.options.tokenize){for(var d=o.split(r.options.tokenSeparator),m=d.length,g=[],b=0,k=h.length;b<k;b+=1){var x=h[b];r._log('\nPattern: "'.concat(x.pattern,'"'));for(var S=!1,w=0;w<m;w+=1){var O=d[w],_=x.search(O),C={};_.isMatch?(C[O]=_.score,s=!0,S=!0,g.push(_.score)):(C[O]=1,r.options.matchAllTokens||g.push(1)),r._log('Token: "'.concat(O,'", score: ').concat(C[O]))}S&&(l+=1)}u=g[0];for(var P=g.length,R=1;R<P;R+=1)u+=g[R];u/=P,r._log("Token score average:",u)}var E=f.score;u>-1&&(E=(E+u)/2),r._log("Score average:",E);var M=!r.options.tokenize||!r.options.matchAllTokens||l>=h.length;if(r._log("\nCheck Matches: ".concat(M)),(s||f.isMatch)&&M){var j={key:n,arrayIndex:t,value:o,score:E};r.options.includeMatches&&(j.matchedIndices=f.matchedIndices);var T=y[i];T?T.output.push(j):(y[i]={item:a,output:[j]},v.push(y[i]))}}else if(c(o))for(var N=0,A=o.length;N<A;N+=1)e(N,o[N],a,i)}(a,i,s,u)}},{key:"_computeScore",value:function(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,r=!!Object.keys(t).length,n=0,o=e.length;n<o;n+=1){for(var a=e[n],i=a.output,s=i.length,c=1,u=0;u<s;u+=1){var l=i[u],h=l.key,p=r?t[h]:1,f=0===l.score&&t&&t[h]>0?Number.EPSILON:l.score;c*=Math.pow(f,p)}a.score=c,this._log(a)}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var r=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,function(e,t){if("object"===n(t)&&null!==t){if(-1!==r.indexOf(t))return;r.push(t)}return t},2)),r=null}var o=[];this.options.includeMatches&&o.push(function(e,t){var r=e.output;t.matches=[];for(var n=0,o=r.length;n<o;n+=1){var a=r[n];if(0!==a.matchedIndices.length){var i={indices:a.matchedIndices,value:a.value};a.key&&(i.key=a.key),a.hasOwnProperty("arrayIndex")&&a.arrayIndex>-1&&(i.arrayIndex=a.arrayIndex),t.matches.push(i)}}}),this.options.includeScore&&o.push(function(e,t){t.score=e.score});for(var a=0,i=e.length;a<i;a+=1){var s=e[a];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),o.length){for(var c={item:s.item},u=0,l=o.length;u<l;u+=1)o[u](s,c);t.push(c)}else t.push(s.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&o(t.prototype,r),e}();e.exports=u},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(2),a=r(3),i=r(6),s=function(){function e(t,r){var n=r.location,o=void 0===n?0:n,a=r.distance,s=void 0===a?100:a,c=r.threshold,u=void 0===c?.6:c,l=r.maxPatternLength,h=void 0===l?32:l,p=r.isCaseSensitive,f=void 0!==p&&p,y=r.tokenSeparator,d=void 0===y?/ +/g:y,v=r.findAllMatches,m=void 0!==v&&v,g=r.minMatchCharLength,b=void 0===g?1:g,k=r.includeMatches,x=void 0!==k&&k;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:o,distance:s,threshold:u,maxPatternLength:h,isCaseSensitive:f,tokenSeparator:d,findAllMatches:m,includeMatches:x,minMatchCharLength:b},this.pattern=f?t:t.toLowerCase(),this.pattern.length<=h&&(this.patternAlphabet=i(this.pattern))}var t,r;return t=e,(r=[{key:"search",value:function(e){var t=this.options,r=t.isCaseSensitive,n=t.includeMatches;if(r||(e=e.toLowerCase()),this.pattern===e){var i={isMatch:!0,score:0};return n&&(i.matchedIndices=[[0,e.length-1]]),i}var s=this.options,c=s.maxPatternLength,u=s.tokenSeparator;if(this.pattern.length>c)return o(e,this.pattern,u);var l=this.options,h=l.location,p=l.distance,f=l.threshold,y=l.findAllMatches,d=l.minMatchCharLength;return a(e,this.pattern,this.patternAlphabet,{location:h,distance:p,threshold:f,findAllMatches:y,minMatchCharLength:d,includeMatches:n})}}])&&n(t.prototype,r),e}();e.exports=s},function(e,t){var r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,o=new RegExp(t.replace(r,"\\$&").replace(n,"|")),a=e.match(o),i=!!a,s=[];if(i)for(var c=0,u=a.length;c<u;c+=1){var l=a[c];s.push([e.indexOf(l),l.length-1])}return{score:i?.5:1,isMatch:i,matchedIndices:s}}},function(e,t,r){var n=r(4),o=r(5);e.exports=function(e,t,r,a){for(var i=a.location,s=void 0===i?0:i,c=a.distance,u=void 0===c?100:c,l=a.threshold,h=void 0===l?.6:l,p=a.findAllMatches,f=void 0!==p&&p,y=a.minMatchCharLength,d=void 0===y?1:y,v=a.includeMatches,m=void 0!==v&&v,g=s,b=e.length,k=h,x=e.indexOf(t,g),S=t.length,w=[],O=0;O<b;O+=1)w[O]=0;if(-1!==x){var _=n(t,{errors:0,currentLocation:x,expectedLocation:g,distance:u});if(k=Math.min(_,k),-1!==(x=e.lastIndexOf(t,g+S))){var C=n(t,{errors:0,currentLocation:x,expectedLocation:g,distance:u});k=Math.min(C,k)}}x=-1;for(var P=[],R=1,E=S+b,M=1<<(S<=31?S-1:30),j=0;j<S;j+=1){for(var T=0,N=E;T<N;)n(t,{errors:j,currentLocation:g+N,expectedLocation:g,distance:u})<=k?T=N:E=N,N=Math.floor((E-T)/2+T);E=N;var A=Math.max(1,g-N+1),L=f?b:Math.min(g+N,b)+S,D=Array(L+2);D[L+1]=(1<<j)-1;for(var q=L;q>=A;q-=1){var F=q-1,I=r[e.charAt(F)];if(I&&(w[F]=1),D[q]=(D[q+1]<<1|1)&I,0!==j&&(D[q]|=(P[q+1]|P[q])<<1|1|P[q+1]),D[q]&M&&(R=n(t,{errors:j,currentLocation:F,expectedLocation:g,distance:u}))<=k){if(k=R,(x=F)<=g)break;A=Math.max(1,2*g-x)}}if(n(t,{errors:j+1,currentLocation:g,expectedLocation:g,distance:u})>k)break;P=D}var B={isMatch:x>=0,score:0===R?.001:R};return m&&(B.matchedIndices=o(w,d)),B}},function(e,t){e.exports=function(e,t){var r=t.errors,n=void 0===r?0:r,o=t.currentLocation,a=void 0===o?0:o,i=t.expectedLocation,s=void 0===i?0:i,c=t.distance,u=void 0===c?100:c,l=n/e.length,h=Math.abs(s-a);return u?l+h/u:h?1:l}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[],n=-1,o=-1,a=0,i=e.length;a<i;a+=1){var s=e[a];s&&-1===n?n=a:s||-1===n||((o=a-1)-n+1>=t&&r.push([n,o]),n=-1)}return e[a-1]&&a-n>=t&&r.push([n,a-1]),r}},function(e,t){e.exports=function(e){for(var t={},r=e.length,n=0;n<r;n+=1)t[e.charAt(n)]=0;for(var o=0;o<r;o+=1)t[e.charAt(o)]|=1<<r-o-1;return t}},function(e,t){var r=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},n=function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)},o=function(e){return"string"==typeof e},a=function(e){return"number"==typeof e};e.exports={get:function(e,t){var i=[];return function e(t,s){if(s){var c=s.indexOf("."),u=s,l=null;-1!==c&&(u=s.slice(0,c),l=s.slice(c+1));var h=t[u];if(null!=h)if(l||!o(h)&&!a(h))if(r(h))for(var p=0,f=h.length;p<f;p+=1)e(h[p],l);else l&&e(h,l);else i.push(n(h))}else i.push(t)}(e,t),i},isArray:r,isString:o,isNum:a,toString:n}}])}});