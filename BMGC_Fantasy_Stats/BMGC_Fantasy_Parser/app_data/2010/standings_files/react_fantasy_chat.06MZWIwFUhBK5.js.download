!function(e){function t(t){for(var r,s,o=t[0],u=t[1],l=t[2],d=0,f=[];d<o.length;d++)s=o[d],a[s]&&f.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(c&&c(t);f.length;)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={2:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;i.push([526,0]),n()}([,,function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(44)),i=r(n(27)),s=r(n(45)),o=r(n(4)),u=n(0),l=r(u),c=r(n(15)),d=r(n(23)),f=r(n(52)),h={locale:"en",pluralRuleFunction:function(e,t){var n=String(e).split("."),r=!n[1],a=Number(n[0])==e,i=a&&n[0].slice(-1),s=a&&n[0].slice(-2);return t?1==i&&11!=s?"one":2==i&&12!=s?"two":3==i&&13!=s?"few":"other":1==e&&r?"one":"other"},fields:{year:{displayName:"year",relative:{0:"this year",1:"next year","-1":"last year"},relativeTime:{future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"}}},"year-short":{displayName:"yr.",relative:{0:"this yr.",1:"next yr.","-1":"last yr."},relativeTime:{future:{one:"in {0} yr.",other:"in {0} yr."},past:{one:"{0} yr. ago",other:"{0} yr. ago"}}},month:{displayName:"month",relative:{0:"this month",1:"next month","-1":"last month"},relativeTime:{future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"}}},"month-short":{displayName:"mo.",relative:{0:"this mo.",1:"next mo.","-1":"last mo."},relativeTime:{future:{one:"in {0} mo.",other:"in {0} mo."},past:{one:"{0} mo. ago",other:"{0} mo. ago"}}},day:{displayName:"day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},"day-short":{displayName:"day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},hour:{displayName:"hour",relative:{0:"this hour"},relativeTime:{future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}}},"hour-short":{displayName:"hr.",relative:{0:"this hour"},relativeTime:{future:{one:"in {0} hr.",other:"in {0} hr."},past:{one:"{0} hr. ago",other:"{0} hr. ago"}}},minute:{displayName:"minute",relative:{0:"this minute"},relativeTime:{future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}}},"minute-short":{displayName:"min.",relative:{0:"this minute"},relativeTime:{future:{one:"in {0} min.",other:"in {0} min."},past:{one:"{0} min. ago",other:"{0} min. ago"}}},second:{displayName:"second",relative:{0:"now"},relativeTime:{future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}}},"second-short":{displayName:"sec.",relative:{0:"now"},relativeTime:{future:{one:"in {0} sec.",other:"in {0} sec."},past:{one:"{0} sec. ago",other:"{0} sec. ago"}}}}};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(Array.isArray(e)?e:[e]).forEach(function(e){e&&e.locale&&(i.__addLocaleData(e),s.__addLocaleData(e))})}function y(e){var t=e&&e.toLowerCase();return!(!i.__localeData__[t]||!s.__localeData__[t])}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=(function(){function e(e){this.value=e}function t(t){var n,r;function a(n,r){try{var s=t[n](r),o=s.value;o instanceof e?Promise.resolve(o.value).then(function(e){a("next",e)},function(e){a("throw",e)}):i(s.done?"return":"normal",s.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?a(n.key,n.arg):r=null}this._invoke=function(e,t){return new Promise(function(i,s){var o={key:e,arg:t,resolve:i,reject:s,next:null};r?r=r.next=o:(n=r=o,a(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},C=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},S=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},O=o.bool,A=o.number,U=o.string,w=o.func,I=o.object,M=o.oneOf,T=o.shape,N=o.any,R=o.oneOfType,k=M(["best fit","lookup"]),P=M(["narrow","short","long"]),L=M(["numeric","2-digit"]),D=w.isRequired,x={locale:U,timeZone:U,formats:I,messages:I,textComponent:N,defaultLocale:U,defaultFormats:I,onError:w},H={formatDate:D,formatTime:D,formatRelative:D,formatNumber:D,formatPlural:D,formatMessage:D,formatHTMLMessage:D},j=T(E({},x,H,{formatters:I,now:D})),F=(U.isRequired,R([U,I]),{localeMatcher:k,formatMatcher:M(["basic","best fit"]),timeZone:U,hour12:O,weekday:P,era:P,year:L,month:M(["numeric","2-digit","narrow","short","long"]),day:L,hour:L,minute:L,second:L,timeZoneName:M(["short","long"])}),G={localeMatcher:k,style:M(["decimal","currency","percent"]),currency:U,currencyDisplay:M(["symbol","code","name"]),useGrouping:O,minimumIntegerDigits:A,minimumFractionDigits:A,maximumFractionDigits:A,minimumSignificantDigits:A,maximumSignificantDigits:A},B={style:M(["best fit","numeric"]),units:M(["second","minute","hour","day","month","year","second-short","minute-short","hour-short","day-short","month-short","year-short"])},z={style:M(["cardinal","ordinal"])},q=Object.keys(x),W={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Y=/[&><"']/g;function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.reduce(function(t,r){return e.hasOwnProperty(r)?t[r]=e[r]:n.hasOwnProperty(r)&&(t[r]=n[r]),t},{})}function Q(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).intl;d(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}function K(e,t){if(e===t)return!0;if("object"!==(void 0===e?"undefined":g(e))||null===e||"object"!==(void 0===t?"undefined":g(t))||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),i=0;i<n.length;i++)if(!a(n[i])||e[n[i]]!==t[n[i]])return!1;return!0}function J(e,t,n){var r=e.props,a=e.state,i=e.context,s=void 0===i?{}:i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=s.intl,l=void 0===u?{}:u,c=o.intl,d=void 0===c?{}:c;return!K(t,r)||!K(n,a)||!(d===l||K(V(d,q),V(l,q)))}function Z(e,t){return"[React Intl] "+e+(t?"\n"+t:"")}function X(e){0}var $=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(this,e);var r="ordinal"===n.style,a=function(e){return i.prototype._findPluralRuleFunction(e)}(function(e){return i.prototype._resolveLocale(e)}(t));this.format=function(e){return a(e,r)}},ee=Object.keys(F),te=Object.keys(G),ne=Object.keys(B),re=Object.keys(z),ae={second:60,minute:60,hour:24,day:30,month:12};function ie(e){var t=s.thresholds;t.second=e.second,t.minute=e.minute,t.hour=e.hour,t.day=e.day,t.month=e.month,t["second-short"]=e["second-short"],t["minute-short"]=e["minute-short"],t["hour-short"]=e["hour-short"],t["day-short"]=e["day-short"],t["month-short"]=e["month-short"]}function se(e,t,n,r){var a=e&&e[t]&&e[t][n];if(a)return a;r(Z("No "+t+" format named: "+n))}function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.locale,i=e.formats,s=e.messages,o=e.defaultLocale,u=e.defaultFormats,l=n.id,c=n.defaultMessage;d(l,"[React Intl] An `id` must be provided to format a message.");var f=s&&s[l];if(!(Object.keys(r).length>0))return f||c||l;var h=void 0,p=e.onError||X;if(f)try{h=t.getMessageFormat(f,a,i).format(r)}catch(e){p(Z('Error formatting message: "'+l+'" for locale: "'+a+'"'+(c?", using default message as fallback.":""),e))}else(!c||a&&a.toLowerCase()!==o.toLowerCase())&&p(Z('Missing message: "'+l+'" for locale: "'+a+'"'+(c?", using default message as fallback.":"")));if(!h&&c)try{h=t.getMessageFormat(c,o,u).format(r)}catch(e){p(Z('Error formatting the default message for: "'+l+'"',e))}return h||p(Z('Cannot format message: "'+l+'", using message '+(f||c?"source":"id")+" as fallback.")),h||f||c||l}var ue=Object.freeze({formatDate:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.locale,i=e.formats,s=e.timeZone,o=r.format,u=e.onError||X,l=new Date(n),c=E({},s&&{timeZone:s},o&&se(i,"date",o,u)),d=V(r,ee,c);try{return t.getDateTimeFormat(a,d).format(l)}catch(e){u(Z("Error formatting date.",e))}return String(l)},formatTime:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.locale,i=e.formats,s=e.timeZone,o=r.format,u=e.onError||X,l=new Date(n),c=E({},s&&{timeZone:s},o&&se(i,"time",o,u)),d=V(r,ee,c);d.hour||d.minute||d.second||(d=E({},d,{hour:"numeric",minute:"numeric"}));try{return t.getDateTimeFormat(a,d).format(l)}catch(e){u(Z("Error formatting time.",e))}return String(l)},formatRelative:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.locale,i=e.formats,o=r.format,u=e.onError||X,l=new Date(n),c=new Date(r.now),d=o&&se(i,"relative",o,u),f=V(r,ne,d),h=E({},s.thresholds);ie(ae);try{return t.getRelativeFormat(a,f).format(l,{now:isFinite(c)?c:t.now()})}catch(e){u(Z("Error formatting relative time.",e))}finally{ie(h)}return String(l)},formatNumber:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.locale,i=e.formats,s=r.format,o=e.onError||X,u=s&&se(i,"number",s,o),l=V(r,te,u);try{return t.getNumberFormat(a,l).format(n)}catch(e){o(Z("Error formatting number.",e))}return String(n)},formatPlural:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=e.locale,i=V(r,re),s=e.onError||X;try{return t.getPluralFormat(a,i).format(n)}catch(e){s(Z("Error formatting plural.",e))}return"other"},formatMessage:oe,formatHTMLMessage:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return oe(e,t,n,Object.keys(r).reduce(function(e,t){var n=r[t];return e[t]="string"==typeof n?function(e){return(""+e).replace(Y,function(e){return W[e]})}(n):n,e},{}))}}),le=Object.keys(x),ce=Object.keys(H),de={formats:{},messages:{},timeZone:null,textComponent:"span",defaultLocale:"en",defaultFormats:{},onError:X},fe=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));d("undefined"!=typeof Intl,"[React Intl] The `Intl` APIs must be available in the runtime, and do not appear to be built-in. An `Intl` polyfill should be loaded.\nSee: http://formatjs.io/guides/runtime-environments/");var a=n.intl,o=void 0;o=isFinite(e.initialNow)?Number(e.initialNow):a?a.now():Date.now();var u=(a||{}).formatters,l=void 0===u?{getDateTimeFormat:f(Intl.DateTimeFormat),getNumberFormat:f(Intl.NumberFormat),getMessageFormat:f(i),getRelativeFormat:f(s),getPluralFormat:f($)}:u;return r.state=E({},l,{now:function(){return r._didDisplay?Date.now():o}}),r}return b(t,e),_(t,[{key:"getConfig",value:function(){var e=this.context.intl,t=V(this.props,le,e);for(var n in de)void 0===t[n]&&(t[n]=de[n]);if(!function(e){for(var t=(e||"").split("-");t.length>0;){if(y(t.join("-")))return!0;t.pop()}return!1}(t.locale)){var r=t,a=r.locale,i=r.defaultLocale,s=r.defaultFormats;(0,r.onError)(Z('Missing locale data for locale: "'+a+'". Using default locale: "'+i+'" as fallback.')),t=E({},t,{locale:i,formats:s,messages:de.messages})}return t}},{key:"getBoundFormatFns",value:function(e,t){return ce.reduce(function(n,r){return n[r]=ue[r].bind(null,e,t),n},{})}},{key:"getChildContext",value:function(){var e=this.getConfig(),t=this.getBoundFormatFns(e,this.state),n=this.state,r=n.now,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["now"]);return{intl:E({},e,t,{formatters:a,now:r})}}},{key:"shouldComponentUpdate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return J.apply(void 0,[this].concat(t))}},{key:"componentDidMount",value:function(){this._didDisplay=!0}},{key:"render",value:function(){return u.Children.only(this.props.children)}}]),t}(u.Component);fe.displayName="IntlProvider",fe.contextTypes={intl:j},fe.childContextTypes={intl:j.isRequired};var he=function(e){function t(e,n){m(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Q(n),r}return b(t,e),_(t,[{key:"shouldComponentUpdate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return J.apply(void 0,[this].concat(t))}},{key:"render",value:function(){var e=this.context.intl,t=e.formatDate,n=e.textComponent,r=this.props,a=r.value,i=r.children,s=t(a,this.props);return"function"==typeof i?i(s):l.createElement(n,null,s)}}]),t}(u.Component);he.displayName="FormattedDate",he.contextTypes={intl:j};var pe=function(e){function t(e,n){m(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Q(n),r}return b(t,e),_(t,[{key:"shouldComponentUpdate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return J.apply(void 0,[this].concat(t))}},{key:"render",value:function(){var e=this.context.intl,t=e.formatTime,n=e.textComponent,r=this.props,a=r.value,i=r.children,s=t(a,this.props);return"function"==typeof i?i(s):l.createElement(n,null,s)}}]),t}(u.Component);pe.displayName="FormattedTime",pe.contextTypes={intl:j};var ye=1e3,ge=6e4,me=36e5,_e=864e5,ve=2147483647;var Ee=function(e){function t(e,n){m(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));Q(n);var a=isFinite(e.initialNow)?Number(e.initialNow):n.intl.now();return r.state={now:a},r}return b(t,e),_(t,[{key:"scheduleNextUpdate",value:function(e,t){var n=this;clearTimeout(this._timer);var r=e.value,a=e.units,i=e.updateInterval,s=new Date(r).getTime();if(i&&isFinite(s)){var o=s-t.now,u=function(e){switch(e){case"second":return ye;case"minute":return ge;case"hour":return me;case"day":return _e;default:return ve}}(a||function(e){var t=Math.abs(e);return t<ge?"second":t<me?"minute":t<_e?"hour":"day"}(o)),l=Math.abs(o%u),c=o<0?Math.max(i,u-l):Math.max(i,l);this._timer=setTimeout(function(){n.setState({now:n.context.intl.now()})},c)}}},{key:"componentDidMount",value:function(){this.scheduleNextUpdate(this.props,this.state)}},{key:"componentWillReceiveProps",value:function(e){(function(e,t){if(e===t)return!0;var n=new Date(e).getTime(),r=new Date(t).getTime();return isFinite(n)&&isFinite(r)&&n===r})(e.value,this.props.value)||this.setState({now:this.context.intl.now()})}},{key:"shouldComponentUpdate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return J.apply(void 0,[this].concat(t))}},{key:"componentWillUpdate",value:function(e,t){this.scheduleNextUpdate(e,t)}},{key:"componentWillUnmount",value:function(){clearTimeout(this._timer)}},{key:"render",value:function(){var e=this.context.intl,t=e.formatRelative,n=e.textComponent,r=this.props,a=r.value,i=r.children,s=t(a,E({},this.props,this.state));return"function"==typeof i?i(s):l.createElement(n,null,s)}}]),t}(u.Component);Ee.displayName="FormattedRelative",Ee.contextTypes={intl:j},Ee.defaultProps={updateInterval:1e4};var be=function(e){function t(e,n){m(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Q(n),r}return b(t,e),_(t,[{key:"shouldComponentUpdate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return J.apply(void 0,[this].concat(t))}},{key:"render",value:function(){var e=this.context.intl,t=e.formatNumber,n=e.textComponent,r=this.props,a=r.value,i=r.children,s=t(a,this.props);return"function"==typeof i?i(s):l.createElement(n,null,s)}}]),t}(u.Component);be.displayName="FormattedNumber",be.contextTypes={intl:j};var Ce=function(e){function t(e,n){m(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Q(n),r}return b(t,e),_(t,[{key:"shouldComponentUpdate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return J.apply(void 0,[this].concat(t))}},{key:"render",value:function(){var e=this.context.intl,t=e.formatPlural,n=e.textComponent,r=this.props,a=r.value,i=r.other,s=r.children,o=t(a,this.props),u=this.props[o]||i;return"function"==typeof s?s(u):l.createElement(n,null,u)}}]),t}(u.Component);Ce.displayName="FormattedPlural",Ce.contextTypes={intl:j},Ce.defaultProps={style:"cardinal"};var Se=function(e,t){return oe({},{getMessageFormat:f(i)},e,t)},Oe=function(e){function t(e,n){m(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return e.defaultMessage||Q(n),r}return b(t,e),_(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.values;if(!K(e.values,t))return!0;for(var n=E({},e,{values:t}),r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return J.apply(void 0,[this,n].concat(a))}},{key:"render",value:function(){var e=this.context.intl||{},t=e.formatMessage,n=void 0===t?Se:t,r=e.textComponent,a=void 0===r?"span":r,i=this.props,s=i.id,o=i.description,l=i.defaultMessage,c=i.values,d=i.tagName,f=void 0===d?a:d,h=i.children,p=void 0,y=void 0,g=void 0;if(c&&Object.keys(c).length>0){var m=Math.floor(1099511627776*Math.random()).toString(16),_=function(){var e=0;return function(){return"ELEMENT-"+m+"-"+(e+=1)}}();p="@__"+m+"__@",y={},g={},Object.keys(c).forEach(function(e){var t=c[e];if(u.isValidElement(t)){var n=_();y[e]=p+n+p,g[n]=t}else y[e]=t})}var v=n({id:s,description:o,defaultMessage:l},y||c),E=void 0;return E=g&&Object.keys(g).length>0?v.split(p).filter(function(e){return!!e}).map(function(e){return g[e]||e}):[v],"function"==typeof h?h.apply(void 0,S(E)):u.createElement.apply(void 0,[f,null].concat(S(E)))}}]),t}(u.Component);Oe.displayName="FormattedMessage",Oe.contextTypes={intl:j},Oe.defaultProps={values:{}};var Ae=function(e){function t(e,n){m(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Q(n),r}return b(t,e),_(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.values;if(!K(e.values,t))return!0;for(var n=E({},e,{values:t}),r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return J.apply(void 0,[this,n].concat(a))}},{key:"render",value:function(){var e=this.context.intl,t=e.formatHTMLMessage,n=e.textComponent,r=this.props,a=r.id,i=r.description,s=r.defaultMessage,o=r.values,u=r.tagName,c=void 0===u?n:u,d=r.children,f=t({id:a,description:i,defaultMessage:s},o);if("function"==typeof d)return d(f);var h={__html:f};return l.createElement(c,{dangerouslySetInnerHTML:h})}}]),t}(u.Component);Ae.displayName="FormattedHTMLMessage",Ae.contextTypes={intl:j},Ae.defaultProps={values:{}},p(h),p(a),t.addLocaleData=p,t.intlShape=j,t.injectIntl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.intlPropName,r=void 0===n?"intl":n,a=t.withRef,i=void 0!==a&&a,s=function(t){function n(e,t){m(this,n);var r=C(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return Q(t),r}return b(n,t),_(n,[{key:"getWrappedInstance",value:function(){return d(i,"[React Intl] To access the wrapped instance, the `{withRef: true}` option must be set when calling: `injectIntl()`"),this._wrappedInstance}},{key:"render",value:function(){var t=this;return l.createElement(e,E({},this.props,v({},r,this.context.intl),{ref:i?function(e){return t._wrappedInstance=e}:null}))}}]),n}(u.Component);return s.displayName="InjectIntl("+function(e){return e.displayName||e.name||"Component"}(e)+")",s.contextTypes={intl:j},s.WrappedComponent=e,c(s,e)},t.defineMessages=function(e){return e},t.IntlProvider=fe,t.FormattedDate=he,t.FormattedTime=pe,t.FormattedRelative=Ee,t.FormattedNumber=be,t.FormattedPlural=Ce,t.FormattedMessage=Oe,t.FormattedHTMLMessage=Ae},,,,,,,,,function(e,t,n){"use strict";var r=n(251),a=Object.prototype.toString;function i(e){return"[object Array]"===a.call(e)}function s(e){return void 0===e}function o(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===a.call(e)}function l(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:s,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:u,isStream:function(e){return o(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,a=arguments.length;r<a;r++)l(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,a=arguments.length;r<a;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,function(t,a){e[a]=n&&"function"==typeof t?r(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},,,,,,,,,,function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},a=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(e).replace(a,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<i;u=r[++n])y(u)||!E(u)?s+=" "+u:s+=" "+o(u);return s},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var a=!1;return function(){if(!a){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),a=!0}return n.apply(this,arguments)}};var i,s={};function o(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,e,r.depth)}function u(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function l(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,e);return m(a)||(a=c(e,a,r)),a}var i=function(e,t){if(_(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(y(t))return e.stylize("null","null")}(e,n);if(i)return i;var s=Object.keys(n),o=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),C(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(n);if(0===s.length){if(S(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(b(n))return e.stylize(Date.prototype.toString.call(n),"date");if(C(n))return d(n)}var l,E="",O=!1,A=["{","}"];(h(n)&&(O=!0,A=["[","]"]),S(n))&&(E=" [Function"+(n.name?": "+n.name:"")+"]");return v(n)&&(E=" "+RegExp.prototype.toString.call(n)),b(n)&&(E=" "+Date.prototype.toUTCString.call(n)),C(n)&&(E=" "+d(n)),0!==s.length||O&&0!=n.length?r<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=O?function(e,t,n,r,a){for(var i=[],s=0,o=t.length;s<o;++s)w(t,String(s))?i.push(f(e,t,n,r,String(s),!0)):i.push("");return a.forEach(function(a){a.match(/^\d+$/)||i.push(f(e,t,n,r,a,!0))}),i}(e,n,r,o,s):s.map(function(t){return f(e,n,r,o,t,O)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,E,A)):A[0]+E+A[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,a,i){var s,o,u;if((u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?o=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(o=e.stylize("[Setter]","special")),w(r,a)||(s="["+a+"]"),o||(e.seen.indexOf(u.value)<0?(o=y(n)?c(e,u.value,null):c(e,u.value,n-1)).indexOf("\n")>-1&&(o=i?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n")):o=e.stylize("[Circular]","special")),_(s)){if(i&&a.match(/^\d+$/))return o;(s=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}function h(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function y(e){return null===e}function g(e){return"number"==typeof e}function m(e){return"string"==typeof e}function _(e){return void 0===e}function v(e){return E(e)&&"[object RegExp]"===O(e)}function E(e){return"object"==typeof e&&null!==e}function b(e){return E(e)&&"[object Date]"===O(e)}function C(e){return E(e)&&("[object Error]"===O(e)||e instanceof Error)}function S(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(_(i)&&(i=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else s[n]=function(){};return s[n]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=p,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=_,t.isRegExp=v,t.isObject=E,t.isDate=b,t.isError=C,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(39);var U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),U[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=n(40),t._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function M(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(I&&e[I]){var t;if("function"!=typeof(t=e[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),a=[],i=0;i<arguments.length;i++)a.push(arguments[i]);a.push(function(e,r){e?n(e):t(r)});try{e.apply(this,a)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),I&&Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=I,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var a=n.pop();if("function"!=typeof a)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return a.apply(i,arguments)};t.apply(this,n).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(M,t,s)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR=t.UPLOAD_SUCCESS=t.UPLOAD_FAILURE=t.UPLOAD_ATTEMPT=t.UPLOAD_AUTH_SUCCESS=t.UPLOAD_AUTH_FAILURE=t.UPLOAD_AUTH_ATTEMPT=t.TYPING_STATUS_UPDATED=t.USER_IS_DONE_TYPING=t.USER_IS_TYPING=t.GIF_LIST_FAILURE=t.GIF_LIST_SUCCESS=t.CREATE_REACTION_FAILURE=t.DELETE_REACTION_FAILURE=t.REMOVE_REACTION_FAILURE=t.ADD_REACTION_FAILURE=t.CREATE_REACTION_SUCCESS=t.DELETE_REACTION_SUCCESS=t.REMOVE_REACTION_SUCCESS=t.ADD_REACTION_SUCCESS=t.DELETE_MESSAGE_FAILURE=t.DELETE_MESSAGE_SUCCESS=t.TOGGLE_CHAT_MINIMIZE_SUCCESS=t.MARK_AS_READ=t.BLOCK_USER_FAILURE=t.BLOCK_USER=t.UNBLOCK_USER_FAILURE=t.UNBLOCK_USER=t.REPORT_MESSAGE_FAILURE=t.REPORT_MESSAGE_SUCCESS=t.RESET_TOUT=t.START_NEW_CHAT_FAILURE=t.START_NEW_CHAT_SUCCESS=t.INIT_SUCCESS=t.CLOSE_CHAT_SUCCESS=t.OPEN_CHAT_FAILURE=t.OPEN_CHAT_SUCCESS=t.SEND_MESSAGE_FAIL=t.SEND_MESSAGE_SUCCESS=t.SEND_MESSAGE_TEMPORARY=t.MESSAGE_DELETED=t.MESSAGE_UPDATED=t.MESSAGE_RECEIVED=t.MESSAGE_LIST_FAIL=t.MESSAGE_LIST_SUCCESS=t.CREATE_CHAT_HANDLER_FAIL=t.CREATE_CHAT_HANDLER_SUCCESS=t.INIT_CHAT_SCREEN=t.GROUP_CHANNEL_LIST_FAIL=t.GROUP_CHANNEL_LIST_SUCCESS=t.NEW_GROUP_CHANNEL_LIST_SUCCESS=t.LOGIN_FAIL=t.LOGIN_SUCCESS=void 0;t.LOGIN_SUCCESS="login_success";t.LOGIN_FAIL="login_fail";t.NEW_GROUP_CHANNEL_LIST_SUCCESS="new_group_channel_list_success";t.GROUP_CHANNEL_LIST_SUCCESS="group_channel_list_success";t.GROUP_CHANNEL_LIST_FAIL="group_channel_list_fail";t.INIT_CHAT_SCREEN="init_chat_screen";t.CREATE_CHAT_HANDLER_SUCCESS="create_chat_handler_success";t.CREATE_CHAT_HANDLER_FAIL="create_chat_handler_fail";t.MESSAGE_LIST_SUCCESS="message_list_success";t.MESSAGE_LIST_FAIL="message_list_fail";t.MESSAGE_RECEIVED="message_received";t.MESSAGE_UPDATED="message_updated";t.MESSAGE_DELETED="message_deleted";t.SEND_MESSAGE_TEMPORARY="send_message_temporary";t.SEND_MESSAGE_SUCCESS="send_message_success";t.SEND_MESSAGE_FAIL="send_message_fail";t.OPEN_CHAT_SUCCESS="open_chat_success";t.OPEN_CHAT_FAILURE="open_chat_failure";t.CLOSE_CHAT_SUCCESS="close_chat_success";t.INIT_SUCCESS="init_success";t.START_NEW_CHAT_SUCCESS="start_chat_success";t.START_NEW_CHAT_FAILURE="start_chat_failure";t.RESET_TOUT="reset_tout";t.REPORT_MESSAGE_SUCCESS="report_message_success";t.REPORT_MESSAGE_FAILURE="report_message_failure";t.UNBLOCK_USER="unblock_user";t.UNBLOCK_USER_FAILURE="unblock_user_failure";t.BLOCK_USER="block_user";t.BLOCK_USER_FAILURE="block_user_failure";t.MARK_AS_READ="mark_as_read";t.TOGGLE_CHAT_MINIMIZE_SUCCESS="toggle_chat_minimize_success";t.DELETE_MESSAGE_SUCCESS="delete_message_success";t.DELETE_MESSAGE_FAILURE="delete_message_failure";t.ADD_REACTION_SUCCESS="add_reaction_success";t.REMOVE_REACTION_SUCCESS="remove_reaction_success";t.DELETE_REACTION_SUCCESS="delete_reaction_success";t.CREATE_REACTION_SUCCESS="create_reaction_success";t.ADD_REACTION_FAILURE="add_reaction_failure";t.REMOVE_REACTION_FAILURE="remove_reaction_failure";t.DELETE_REACTION_FAILURE="delete_reaction_failure";t.CREATE_REACTION_FAILURE="create_reaction_failure";t.GIF_LIST_SUCCESS="gif_list_success";t.GIF_LIST_FAILURE="gif_list_failure";t.USER_IS_TYPING="user_is_typing";t.USER_IS_DONE_TYPING="user_is_done_typing";t.TYPING_STATUS_UPDATED="typing_status_updated";t.UPLOAD_AUTH_ATTEMPT="upload_auth_attempt";t.UPLOAD_AUTH_FAILURE="upload_auth_failure";t.UPLOAD_AUTH_SUCCESS="upload_auth_success";t.UPLOAD_ATTEMPT="upload_attempt";t.UPLOAD_FAILURE="upload_failure";t.UPLOAD_SUCCESS="upload_success";t.ERROR="error"},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,i,s,o){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,i,s,o],c=0;(u=new Error(t.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(25),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(9))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a=1,i={},s=!1,o=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){c(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&c(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){c(e.data)},r=function(t){e.port2.postMessage(t)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var e=o.documentElement;r=function(t){var n=o.createElement("script");n.onreadystatechange=function(){c(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(c,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var s={callback:e,args:t};return i[a]=s,r(a),a++},u.clearImmediate=l}function l(e){delete i[e]}function c(e){if(s)setTimeout(c,0,e);else{var t=i[e];if(t){s=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{l(e),s=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(9),n(7))},function(e,t){e.exports=function(e,t,n,r){var a=[],i=function(e){a.push(s+"="+(n?e:encodeURIComponent(e)))};for(var s in e)void 0!==e[s]&&(e[s]instanceof Array?e[s].forEach(i):a.push(s+"="+(n?e[s]:encodeURIComponent(e[s]))));return r&&(a=a.sort()),a.join(t)}},,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.connect=t.Provider=void 0;var r=i(n(130)),a=i(n(131));function i(e){return e&&e.__esModule?e:{default:e}}t.Provider=r.default,t.connect=a.default},function(e,t,n){var r=n(34),a=n(95),i=n(20),s="[object Object]",o=Function.prototype,u=Object.prototype,l=o.toString,c=u.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!i(e)||r(e)!=s)return!1;var t=a(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}},,,function(e,t,n){"use strict";t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var r=u(n(74)),a=u(n(137)),i=u(n(138)),s=u(n(139)),o=u(n(77));u(n(76));function u(e){return e&&e.__esModule?e:{default:e}}t.createStore=r.default,t.combineReducers=a.default,t.bindActionCreators=i.default,t.applyMiddleware=s.default,t.compose=o.default},function(e,t,n){var r=n(26);e.exports=function(e){if("string"==typeof e)return e;var t=(e.protocol||"http")+"://";return t+=e.host,t+=e.path,e.matrix&&(t+=";"+r(e.matrix,";",!0)),e.query&&(t+="?"+r(e.query,"&")),t}},function(e,t,n){"use strict";var r=n(21),a=/(~-(\d+)-~)/g,i=/\{LBRACE\}/g,s=/\{RBRACE\}/g,o="{...}",u="f(){...}",l=", ",c=" => ",d=Object.prototype.toString,f={undefined:"undefined",number:"number",boolean:"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"};function h(e){return e&&"object"==typeof e}function p(e,t){var n,r,a=[],i=function(e){return f[typeof e]||f[d.call(e)]||(e?"object":"null")}(e);if(!h(e))return e.toString();if("date"===i)return e;if(e.nodeType&&e.tagName)return e.tagName+"#"+e.id;if(e.document&&e.navigator)return"window";if(e.location&&e.body)return"document";if("function"===i)return u;if(t=function(e){return"number"==typeof e}(t)?t:3,"array"===i){for(a.push("["),n=0,r=e.length;n<r;n+=1)h(e[n])?a.push(t>0?p(e[n],t-1):o):a.push(e[n]),a.push(l);a.length>1&&a.pop(),a.push("]")}else if("regexp"===i)a.push(e.toString());else{for(n in a.push("{"),e)if(e.hasOwnProperty(n))try{a.push(n+c),h(e[n])?a.push(t>0?p(e[n],t-1):o):a.push(e[n]),a.push(l)}catch(e){a.push("Error: "+e.message)}a.length>1&&a.pop(),a.push("}")}return a.join("")}e.exports=function(e,t,n,o){for(var u,l,c,d,f,y,g,m,_=[],v=e.length;!((u=e.lastIndexOf("{",v))<0)&&!(u+1>=(l=e.indexOf("}",u)));)y=null,(c=(d=g=e.substring(u+1,l)).indexOf(" "))>-1&&(y=d.substring(c+1),d=d.substring(0,c)),f=t[d],n&&(f=n(d,f,y)),h(f)?p?r.isArray(f)?f=p(f,parseInt(y,10)):((m=(y=y||"").indexOf("dump"))>-1&&(y=y.substring(4)),f=f.toString===Object.prototype.toString||m>-1?p(f,parseInt(y,10)):f.toString()):f=f.toString():void 0===f&&(f="~-"+_.length+"-~",_.push(g)),e=e.substring(0,u)+f+e.substring(l+1),o||(v=u-1);return e.replace(a,function(e,t,n){return"{"+_[parseInt(n,10)]+"}"}).replace(i,"{").replace(s,"}")}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports=function(e,t){var n={};if(!e||!t)return n;for(var r=0,a=t.length;r<a;r++){var i=t[r];e.hasOwnProperty(i)&&(n[i]=e[i])}return n}},,,function(e,t){},function(e,t,n){"use strict";var r=n(46).default;n(51),(t=e.exports=r).default=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(47),a=n(50);r.default.__addLocaleData(a.default),r.default.defaultLocale="en",t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(27),a=n(48),i=n(49);t.default=u;var s=["second","second-short","minute","minute-short","hour","hour-short","day","day-short","month","month-short","year","year-short"],o=["best fit","numeric"];function u(e,t){t=t||{},i.isArray(e)&&(e=e.concat()),i.defineProperty(this,"_locale",{value:this._resolveLocale(e)}),i.defineProperty(this,"_options",{value:{style:this._resolveStyle(t.style),units:this._isValidUnits(t.units)&&t.units}}),i.defineProperty(this,"_locales",{value:e}),i.defineProperty(this,"_fields",{value:this._findFields(this._locale)}),i.defineProperty(this,"_messages",{value:i.objCreate(null)});var n=this;this.format=function(e,t){return n._format(e,t)}}i.defineProperty(u,"__localeData__",{value:i.objCreate(null)}),i.defineProperty(u,"__addLocaleData",{value:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(!t||!t.locale)throw new Error("Locale data provided to IntlRelativeFormat is missing a `locale` property value");u.__localeData__[t.locale.toLowerCase()]=t,r.default.__addLocaleData(t)}}}),i.defineProperty(u,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),i.defineProperty(u,"thresholds",{enumerable:!0,value:{second:45,"second-short":45,minute:45,"minute-short":45,hour:22,"hour-short":22,day:26,"day-short":26,month:11,"month-short":11}}),u.prototype.resolvedOptions=function(){return{locale:this._locale,style:this._options.style,units:this._options.units}},u.prototype._compileMessage=function(e){var t,n=this._locales,a=(this._locale,this._fields[e].relativeTime),i="",s="";for(t in a.future)a.future.hasOwnProperty(t)&&(i+=" "+t+" {"+a.future[t].replace("{0}","#")+"}");for(t in a.past)a.past.hasOwnProperty(t)&&(s+=" "+t+" {"+a.past[t].replace("{0}","#")+"}");var o="{when, select, future {{0, plural, "+i+"}}past {{0, plural, "+s+"}}}";return new r.default(o,n)},u.prototype._getMessage=function(e){var t=this._messages;return t[e]||(t[e]=this._compileMessage(e)),t[e]},u.prototype._getRelativeUnits=function(e,t){var n=this._fields[t];if(n.relative)return n.relative[e]},u.prototype._findFields=function(e){for(var t=u.__localeData__,n=t[e.toLowerCase()];n;){if(n.fields)return n.fields;n=n.parentLocale&&t[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlRelativeFormat is missing `fields` for :"+e)},u.prototype._format=function(e,t){var n=t&&void 0!==t.now?t.now:i.dateNow();if(void 0===e&&(e=n),!isFinite(n))throw new RangeError("The `now` option provided to IntlRelativeFormat#format() is not in valid range.");if(!isFinite(e))throw new RangeError("The date value provided to IntlRelativeFormat#format() is not in valid range.");var r=a.default(n,e),s=this._options.units||this._selectUnits(r),o=r[s];if("numeric"!==this._options.style){var u=this._getRelativeUnits(o,s);if(u)return u}return this._getMessage(s).format({0:Math.abs(o),when:o<0?"past":"future"})},u.prototype._isValidUnits=function(e){if(!e||i.arrIndexOf.call(s,e)>=0)return!0;if("string"==typeof e){var t=/s$/.test(e)&&e.substr(0,e.length-1);if(t&&i.arrIndexOf.call(s,t)>=0)throw new Error('"'+e+'" is not a valid IntlRelativeFormat `units` value, did you mean: '+t)}throw new Error('"'+e+'" is not a valid IntlRelativeFormat `units` value, it must be one of: "'+s.join('", "')+'"')},u.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(u.defaultLocale);var t,n,r,a,i=u.__localeData__;for(t=0,n=e.length;t<n;t+=1)for(r=e[t].toLowerCase().split("-");r.length;){if(a=i[r.join("-")])return a.locale;r.pop()}var s=e.pop();throw new Error("No locale data has been added to IntlRelativeFormat for: "+e.join(", ")+", or the default locale: "+s)},u.prototype._resolveStyle=function(e){if(!e)return o[0];if(i.arrIndexOf.call(o,e)>=0)return e;throw new Error('"'+e+'" is not a valid IntlRelativeFormat `style` value, it must be one of: "'+o.join('", "')+'"')},u.prototype._selectUnits=function(e){var t,n,r,a=s.filter(function(e){return e.indexOf("-short")<1});for(t=0,n=a.length;t<n&&(r=a[t],!(Math.abs(e[r])<u.thresholds[r]));t+=1);return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.round;var a=6e4,i=864e5;function s(e){var t=new Date(e);return t.setHours(0,0,0,0),t}t.default=function(e,t){var n=r((t=+t)-(e=+e)),o=r(n/1e3),u=r(o/60),l=r(u/60),c=function(e,t){var n=s(e),r=s(t),o=n.getTime()-n.getTimezoneOffset()*a,u=r.getTime()-r.getTimezoneOffset()*a;return Math.round((o-u)/i)}(t,e),d=r(c/7),f=function(e){return 400*e/146097}(c),h=r(12*f),p=r(f);return{millisecond:n,second:o,"second-short":o,minute:u,"minute-short":u,hour:l,"hour-short":l,day:c,"day-short":c,week:d,"week-short":d,month:h,"month-short":h,year:p,"year-short":p}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.prototype.hasOwnProperty,a=Object.prototype.toString,i=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),s=(!i&&Object.prototype.__defineGetter__,i?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):(!r.call(e,t)||"value"in n)&&(e[t]=n.value)});t.defineProperty=s;var o=Object.create||function(e,t){var n,a;function i(){}for(a in i.prototype=e,n=new i,t)r.call(t,a)&&s(n,a,t[a]);return n};t.objCreate=o;var u=Array.prototype.indexOf||function(e,t){if(!this.length)return-1;for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1};t.arrIndexOf=u;var l=Array.isArray||function(e){return"[object Array]"===a.call(e)};t.isArray=l;var c=Date.now||function(){return(new Date).getTime()};t.dateNow=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={locale:"en",pluralRuleFunction:function(e,t){var n=String(e).split("."),r=!n[1],a=Number(n[0])==e,i=a&&n[0].slice(-1),s=a&&n[0].slice(-2);return t?1==i&&11!=s?"one":2==i&&12!=s?"two":3==i&&13!=s?"few":"other":1==e&&r?"one":"other"},fields:{year:{displayName:"year",relative:{0:"this year",1:"next year","-1":"last year"},relativeTime:{future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"}}},"year-short":{displayName:"yr.",relative:{0:"this yr.",1:"next yr.","-1":"last yr."},relativeTime:{future:{one:"in {0} yr.",other:"in {0} yr."},past:{one:"{0} yr. ago",other:"{0} yr. ago"}}},month:{displayName:"month",relative:{0:"this month",1:"next month","-1":"last month"},relativeTime:{future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"}}},"month-short":{displayName:"mo.",relative:{0:"this mo.",1:"next mo.","-1":"last mo."},relativeTime:{future:{one:"in {0} mo.",other:"in {0} mo."},past:{one:"{0} mo. ago",other:"{0} mo. ago"}}},week:{displayName:"week",relativePeriod:"the week of {0}",relative:{0:"this week",1:"next week","-1":"last week"},relativeTime:{future:{one:"in {0} week",other:"in {0} weeks"},past:{one:"{0} week ago",other:"{0} weeks ago"}}},"week-short":{displayName:"wk.",relativePeriod:"the week of {0}",relative:{0:"this wk.",1:"next wk.","-1":"last wk."},relativeTime:{future:{one:"in {0} wk.",other:"in {0} wk."},past:{one:"{0} wk. ago",other:"{0} wk. ago"}}},day:{displayName:"day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},"day-short":{displayName:"day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},hour:{displayName:"hour",relative:{0:"this hour"},relativeTime:{future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}}},"hour-short":{displayName:"hr.",relative:{0:"this hour"},relativeTime:{future:{one:"in {0} hr.",other:"in {0} hr."},past:{one:"{0} hr. ago",other:"{0} hr. ago"}}},minute:{displayName:"minute",relative:{0:"this minute"},relativeTime:{future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}}},"minute-short":{displayName:"min.",relative:{0:"this minute"},relativeTime:{future:{one:"in {0} min.",other:"in {0} min."},past:{one:"{0} min. ago",other:"{0} min. ago"}}},second:{displayName:"second",relative:{0:"now"},relativeTime:{future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}}},"second-short":{displayName:"sec.",relative:{0:"now"},relativeTime:{future:{one:"in {0} sec.",other:"in {0} sec."},past:{one:"{0} sec. ago",other:"{0} sec. ago"}}}}}},function(e,t){},function(e,t,n){"use strict";(t=e.exports=n(53).default).default=t},function(e,t,n){"use strict";function r(e){return JSON.stringify(e.map(function(e){return e&&"object"==typeof e?function(e){return Object.keys(e).sort().map(function(t){var n;return(n={})[t]=e[t],n})}(e):e}))}Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return void 0===t&&(t={}),function(){for(var n,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var s=r(a),o=s&&t[s];return o||(o=new((n=e).bind.apply(n,[void 0].concat(a))),s&&(t[s]=o)),o}}},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoExpandTextArea=t.removeChatFromLocalStorage=t.toggleChatMinStateLocalStorage=t.addChatToLocalStorage=t.getChatsMapFromLocalStorage=t.getActiveChatListFromLocalStorage=t.isChatListOpen=t.positionUnreadCount=t.toggleChatList=t.positionChatList=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(259));var a=function(e){var t=document.getElementById("ChatList"),n=document.getElementById("FantasyChatButton");if(n&&t){var r=i(n),a=n.getBoundingClientRect().width,s=r.y+30+"px",o=r.x+a/2,u=t.getBoundingClientRect()||{};t.style.top=s,t.style.left=Math.abs(o-u.width/2)+"px"}};t.positionChatList=a;t.toggleChatList=function(e){e&&(e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation());var t=document.getElementById("ChatList");t&&(t.classList.contains("D(n)!")?t.classList.remove("D(n)!"):t.classList.add("D(n)!"),a())};t.positionUnreadCount=function(e){var t=document.getElementById("ChatUnreadIndicator"),n=document.getElementById("FantasyChatButton");if(n&&t){var r=i(n),a=n.getBoundingClientRect().width,s=r.y,o=r.x+a-5,u=t.getBoundingClientRect()||{};t.style.top=s-5+"px",t.style.left=Math.abs(o-u.width/2)+"px"}};function i(e){for(var t=0,n=0;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:n}}t.isChatListOpen=function(){return!document.getElementById("ChatList").classList.contains("D(n)!")};var s=function(){var e=(0,r.default)(localStorage.getItem("activeChats"));return e||(localStorage.setItem("activeChats",JSON.stringify([])),e=[]),e};t.getActiveChatListFromLocalStorage=s;var o=function(){var e=(0,r.default)(localStorage.getItem("chatsMap"));return e||(localStorage.setItem("chatsMap",JSON.stringify({})),e={}),e};t.getChatsMapFromLocalStorage=o;t.addChatToLocalStorage=function(e){if(e){var t=s(),n=o();t.indexOf(e)>-1?(t=t.filter(function(t){return t!==e})).unshift(e):t.unshift(e),n[e]={isMinimized:!1},localStorage.setItem("activeChats",JSON.stringify(t)),localStorage.setItem("chatsMap",JSON.stringify(n))}};t.toggleChatMinStateLocalStorage=function(e){if(e){var t=o(),n=t[e]||{},r=n.isMinimized;n.isMinimized=!r,localStorage.setItem("chatsMap",JSON.stringify(t))}};t.removeChatFromLocalStorage=function(e){if(e){var t=s(),n=o();t.indexOf(e)>-1&&(t=t.filter(function(t){return t!==e})),delete n[e],localStorage.setItem("activeChats",JSON.stringify(t)),localStorage.setItem("chatsMap",JSON.stringify(n))}};t.autoExpandTextArea=function(e){e.style.height="auto";var t=e.scrollHeight;e.style.height=t+"px"}},function(e,t){var n;void 0===n&&(n={}),n.close={name:"close",height:48,width:48,path:"M37.98 34.827l-9.9-9.9 9.9-9.898c.78-.782.78-2.05 0-2.83-.78-.78-2.047-.78-2.828 0l-9.9 9.9-9.898-9.9c-.78-.78-2.048-.78-2.828 0-.78.78-.78 2.047 0 2.828l9.9 9.9-9.9 9.898c-.78.78-.78 2.047 0 2.828.78.78 2.047.78 2.828 0l9.9-9.9 9.898 9.9c.78.78 2.048.78 2.828 0 .782-.78.782-2.047 0-2.827z"},void 0!==e&&e.exports&&(e.exports=n.close)},,,,,,,function(e,t,n){(function(t,r){e.exports=function(e,n,a){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){var r,a,i;r=e,i=n[a=t],a in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function y(e,t,n){return(y=p()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&h(a,n.prototype),a}).apply(null,arguments)}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){var t=p();return function(){var n,r,a=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return!(r=n)||"object"!=typeof r&&"function"!=typeof r?m(this):r}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var O=function(){function e(){s(this,e)}return u(e,null,[{key:"OS_VERSION",get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"}},{key:"SDK_VERSION",get:function(){return"3.0.128"}},{key:"SDK_MAJOR_VERSION",get:function(){return e.SDK_VERSION.split(".")[0]}},{key:"COMMAND_ACK_TIMEOUT",get:function(){return 1e4}},{key:"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",get:function(){return 100}},{key:"INTERNAL_CALL",get:function(){return"ic"}}]),e}(),A={},U=new WeakMap,w=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,e),U.set(this,"object"===i(t)&&t?t:{})}return u(e,[{key:"get",value:function(e){return U.get(this)[e]}},{key:"set",value:function(e,t){U.get(this)[e]=t}},{key:"remove",value:function(e){var t=U.get(this);t.hasOwnProperty(e)&&delete t[e]}},{key:"container",get:function(){return U.get(this)}}],[{key:"create",value:function(t,n){return A[t]=new e(n),A[t]}},{key:"get",value:function(e){return e=e||At.getInstance()._iid,A[e]}}]),e}(),I=function(){d(t,g(Error));var e=_(t);function t(n,r){var a;return s(this,t),(a=e.call(this,r)).name="SendBirdException",a.code=r||0,a.message=n,a}return u(t,null,[{key:"INVALID_INITIALIZATION",get:function(){return 800100}},{key:"CONNECTION_REQUIRED",get:function(){return 800101}},{key:"CONNECTION_CANCELED",get:function(){return 800102}},{key:"INVALID_PARAMETER",get:function(){return 800110}},{key:"NETWORK_ERROR",get:function(){return 800120}},{key:"NETWORK_ROUTING_ERROR",get:function(){return 800121}},{key:"MALFORMED_DATA",get:function(){return 800130}},{key:"MALFORMED_ERROR_DATA",get:function(){return 800140}},{key:"WRONG_CHANNEL_TYPE",get:function(){return 800150}},{key:"MARK_AS_READ_RATE_LIMIT_EXCEEDED",get:function(){return 800160}},{key:"QUERY_IN_PROGRESS",get:function(){return 800170}},{key:"ACK_TIMEOUT",get:function(){return 800180}},{key:"LOGIN_TIMEOUT",get:function(){return 800190}},{key:"WEBSOCKET_CONNECTION_CLOSED",get:function(){return 800200}},{key:"WEBSOCKET_CONNECTION_FAILED",get:function(){return 800210}},{key:"REQUEST_FAILED",get:function(){return 800220}},{key:"FILE_UPLOAD_CANCEL_FAILED",get:function(){return 800230}},{key:"REQUEST_CANCELED",get:function(){return 800240}},{key:"REQUEST_DUPLICATED",get:function(){return 800250}}]),t}(),M=function(){function e(){s(this,e),this.sessionKey=null,this.eKey=null}return u(e,[{key:"hasSession",value:function(){return!!this.sessionKey}}]),e}(),T={DEBUG:"debug",PRODUCTION:"production"},N=T.PRODUCTION,R=function(){function e(){s(this,e)}return u(e,null,[{key:"log",value:function(){var e;(e=console).log.apply(e,arguments)}},{key:"debug",value:function(){N===e.Mode.DEBUG&&e.log.apply(e,arguments)}},{key:"Mode",get:function(){return T}},{key:"mode",get:function(){return N},set:function(t){-1<Object.keys(e.Mode).map(function(t){return e.Mode[t]}).indexOf(t)&&(N=t)}}]),e}(),k={},P=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};for(var r in s(this,e),this._iid=t,n){var a=n[r];"function"==typeof a&&(this[r]=this.getClonedClass(a))}k[t]=this}return u(e,[{key:"getClonedClass",value:function(e){var t=this._iid;return function(){d(r,e);var n=_(r);function r(){return s(this,r),n.apply(this,arguments)}return u(r,[{key:"_iid",get:function(){return t}}],[{key:"_iid",get:function(){return t}},{key:"_name",get:function(){return e.name}}]),r}()}}],[{key:"get",value:function(e){return e?k[e]:{}}}]),e}(),L=function(){function e(t){s(this,e),this.sb=t,this.pingTimer=null,this.pingTimeoutTimer=null}return u(e,[{key:"ping",value:function(){var e=this,t=P.get(this.sb._iid).Command.bPing(),n=w.get(this.sb._iid).container,r=n.wsAdapter,a=n.pongTimeout;r.ws.send(t),R.debug("PING"),this.pingTimeoutTimer=setTimeout(function(){R.debug("PING timeout"),e.stop(),r.ws.handler&&r.ws.handler.onError()},a)}},{key:"pong",value:function(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null}},{key:"start",value:function(){var e=this,t=w.get(this.sb._iid).container.pingInterval;this.stop(),this.ping(),this.pingTimer=setInterval(function(){e.ping()},t)}},{key:"stop",value:function(){clearInterval(this.pingTimer),this.pingTimer=null,clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=null}}]),e}(),D=[I.CONNECTION_REQUIRED,I.NETWORK_ERROR,I.ACK_TIMEOUT,I.WEBSOCKET_CONNECTION_CLOSED,I.WEBSOCKET_CONNECTION_FAILED,I.FILE_UPLOAD_CANCEL_FAILED,I.REQUEST_CANCELED,500901,500910,900200],x=function(){function e(){s(this,e)}return u(e,null,[{key:"deepEqual",value:function(e,t){if(e===t)return!0;var n=c({},e),r=c({},t);return!(n.messageId&&r.messageId&&n.messageId!==r.messageId||n.reqId&&r.reqId&&n.reqId!==r.reqId||(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(n)!==JSON.stringify(r)))}},{key:"isResendableError",value:function(e){return 0<e&&0<=D.indexOf(e)}},{key:"isFile",value:function(e){var n="object"===i(e)&&null!==e&&"string"==typeof e.name&&"string"==typeof e.uri&&"string"==typeof e.type;if(!n)if("undefined"==typeof window&&void 0!==t){if(void 0!==r)return e instanceof r}else{if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return n}}]),e}(),H=function(){function e(t){if(s(this,e),this.fields={},t)for(var n in t)this.fields[n]={value:t[n]},x.isFile(t[n])&&(this.fields[n].filename=t[n].name);this.internal=!1,this.upload={reqId:null,deleteRequest:null,progressHandler:null}}return u(e,[{key:"add",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:null;this.fields[e]={value:t,filename:r}}},{key:"remove",value:function(e){this.fields.hasOwnProperty(e)&&delete this.fields[e]}},{key:"yield",value:function(){var e=!1;for(var t in this.fields)if(x.isFile(this.fields[t].value)){e=!0;break}if(e){var r=new n;for(var a in this.fields){var i=this.fields[a];if(x.isFile(i.value)){var s=i.value;s.filename||s.name?r.append(a,i.value,s.filename||s.name):s.data?r.append(a,i.value,i.data.name):r.append(a,i.value,"unnamed")}else r.append(a,i.value)}return r}var o={};for(var u in this.fields)o[u]=this.fields[u].value;return o}}]),e}(),j=200,F=400,G=function(){function t(e){s(this,t),this.sb=e,this.cls=P.get(this.sb._iid)}return u(t,[{key:"checkRouting",value:function(e){if(this.sb.customApiHost&&this.sb.customWsHost)"function"==typeof e&&e(null,{apiHost:this.sb.customApiHost,wsHost:this.sb.customWsHost});else{var t=this.sb.getApplicationId();e(null,{apiHost:"https://api-".concat(t,".sendbird.com"),wsHost:"wss://ws-".concat(t,".sendbird.com")})}}},{key:"_buildUrl",value:function(e){var t=e.apiHost,n=e.url,r=e.params;return r&&r.internal?"".concat(t,"/v").concat(O.SDK_MAJOR_VERSION,"/sdk").concat(n):"".concat(t,"/v").concat(O.SDK_MAJOR_VERSION).concat(n)}},{key:"_createHeader",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},r=t instanceof n&&"function"==typeof t.getHeaders?t.getHeaders():{},a=w.get(this.sb._iid).container,i=a.appId,s=a.auth,o=a.extensions,u=a.getUserAgentWithExtensions;return r.SendBird="JS,".concat(O.OS_VERSION,",").concat(O.SDK_VERSION,",").concat(i),r["SB-User-Agent"]=encodeURIComponent(u(o)),s.sessionKey&&(r["Session-Key"]=s.sessionKey),r["Request-Sent-Timestamp"]=(new Date).getTime().toString(),r}},{key:"_createQuery",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};try{var r=[];for(var a in n){var s=n[a];if(null!=s){var o="";o="object"===i(s)?Array.isArray(s)?s.map(function(e){return encodeURIComponent(e)}).join(","):encodeURIComponent(JSON.stringify(s)):encodeURIComponent(s),r.push("".concat(a,"=").concat(o))}}return 0<r.length?"".concat(e,"?").concat(r.join("&")):e}catch(t){return R.debug("createWithEncodedGetParams is failed. - ",t),e}}},{key:"_parseError",value:function(e){if(e.isAbort||e.aborted)return new I("Request has been canceled.",I.REQUEST_CANCELED);try{var t=JSON.parse(e.responseText),n=t?t.message:"Request failed.",r=t?t.code:I.REQUEST_FAILED;return new I(n,r)}catch(e){return e instanceof I?e:new I("Request failed.",I.REQUEST_FAILED)}}},{key:"get",value:function(t,n,r){var a=this;this.checkRouting(function(i,s){if(i)r(new I("Request failed.",I.REQUEST_FAILED),null);else{var o=a._buildUrl({apiHost:s.apiHost,url:t,params:n}),u=n?n.yield():{},l=a._createHeader(u);e.get(a._createQuery(o,u),{headers:l}).then(function(e){var t=e.status,n=e.data,i=e.request;if(j<=t&&t<F)r(null,n);else{var s=a._parseError(i);R.debug(s),r(s,null)}}).catch(function(e){R.debug(e),r(e,null)})}})}},{key:"dummyCall",value:function(t){var n=this;this.checkRouting(function(r,a){if(r)t(new I("Request failed.",I.REQUEST_FAILED),null);else{var i=a.apiHost,s=n._createHeader();e.get(n._createQuery(i),{headers:s}).then(function(e){var r=e.status,a=e.data,i=e.request;if(j<=r&&r<F)t(null,a);else{var s=n._parseError(i);R.debug(s),t(s,null)}}).catch(function(e){R.debug(e),t(e,null)})}})}},{key:"post",value:function(t,r,a){var i=this;this.checkRouting(function(s,o){if(s)a(new I("Request failed.",I.REQUEST_FAILED),null);else{var u=i._buildUrl({apiHost:o.apiHost,url:t,params:r}),l=r?r.yield():{},c=i._createHeader(l),d=null;if(l instanceof n){var f=e.CancelToken.source();d=f.token;var h=i.cls.FileMessageQueue,p=r.upload.reqId;p&&(h.uploadRequest[p]=f)}e.post(u,"function"==typeof l.getBuffer?l.getBuffer():l,{headers:c,cancelToken:d,onUploadProgress:function(e){r.upload.progressHandler&&r.upload.progressHandler(e,r.upload.reqId)}}).then(function(e){var t=e.status,n=e.data,s=e.request;if(j<=t&&t<F)"function"==typeof r.upload.deleteRequest&&r.upload.deleteRequest(),a(null,n);else{"function"==typeof r.upload.deleteRequest&&r.upload.deleteRequest();var o=i._parseError(s);R.debug(o),a(o,null)}}).catch(function(e){"function"==typeof r.upload.deleteRequest&&r.upload.deleteRequest(),R.debug(e),a(e,null)})}})}},{key:"put",value:function(t,n,r){var a=this;this.checkRouting(function(i,s){if(i)r(new I("Request failed.",I.REQUEST_FAILED),null);else{var o=a._buildUrl({apiHost:s.apiHost,url:t,params:n}),u=n?n.yield():{},l=a._createHeader(u);e.put(o,u,{headers:l}).then(function(e){var t=e.status,n=e.data,i=e.request;if(j<=t&&t<F)r(null,n);else{var s=a._parseError(i);R.debug(s),r(s,null)}}).catch(function(e){R.debug(e),r(e,null)})}})}},{key:"delete",value:function(t,n,r){var a=this;this.checkRouting(function(i,s){if(i)r(new I("Request failed.",I.REQUEST_FAILED),null);else{var o=a._buildUrl({apiHost:s.apiHost,url:t,params:n}),u=n?n.yield():{},l=a._createHeader(u);e.delete(a._createQuery(o,u),{headers:l}).then(function(e){var t=e.status,n=e.data,i=e.request;if(j<=t&&t<F)r(null,n);else{var s=a._parseError(i);R.debug(s),r(s,null)}}).catch(function(e){R.debug(e),r(e,null)})}})}},{key:"updateCurrentUserInfo",value:function(e,n){var r=this,a=e.nickname,i=e.profileUrl,s=e.profileImage,o=e.preferredLanguages;this.sb.ConnectionManager.ready(function(e,u){if(e)n(e,null);else{var l=t.Path.USERS_USERID.replace("%s",encodeURIComponent(u.userId)),c=new H;a&&c.add("nickname",a),i&&c.add("profile_url",i),s&&c.add("profile_file",s,s.name),o&&c.add("preferred_languages",o),r.put(l,c,n)}})}},{key:"getMyGroupChannelChangeLogs",value:function(e,n){var r=this,a=e.ts,i=e.token,s=e.customTypes,o=e.includeEmpty,u=e.includeFrozen;this.sb.ConnectionManager.ready(function(e,l){if(e)n(e,null);else{var c=t.Path.USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS.replace("%s",encodeURIComponent(l.userId)),d=new H({show_read_receipt:!0,show_delivery_receipt:!0,show_member:!0});i&&d.add("token",i),a&&d.add("change_ts",a),s&&0<s.length&&d.add("custom_types",s),"boolean"==typeof o&&d.add("show_empty",o),"boolean"==typeof u&&d.add("show_frozen",u),r.get(c,d,n)}})}},{key:"getChannelInvitationPreference",value:function(e,n){var r=this;this.sb.ConnectionManager.ready(function(e,a){if(e)n(e,null);else{var i=t.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"getGroupChannelCount",value:function(e,n){var r=this,a=e.memberStateFilter;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=r.cls.GroupChannel,o=t.Path.USERS_USERID_GROUP_CHANNEL_COUNT.replace("%s",encodeURIComponent(i.userId)),u="";switch(a){case s.MemberStateFilter.JOINED:u="joined";break;case s.MemberStateFilter.INVITED:u="invited";break;case s.MemberStateFilter.INVITED_BY_FRIEND:u="invited_by_friend";break;case s.MemberStateFilter.INVITED_BY_NON_FRIEND:u="invited_by_non_friend";break;default:u="all"}var l=new H({state:u});r.get(o,l,n)}})}},{key:"getUnreadItemCount",value:function(e,n){var r=this,a=e.keys;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_UNREAD_ITEM_COUNT.replace("%s",encodeURIComponent(i.userId)),o=new H({item_keys:a});r.get(s,o,n)}})}},{key:"getTotalUnreadMessageCount",value:function(e,n){var r=this,a=e.customTypesFilter,i=e.superChannelFilter;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=t.Path.USERS_USERID_UNREAD_MESSAGE_COUNT.replace("%s",encodeURIComponent(s.userId)),u=new H({super_mode:i});null!==a&&0<a.length&&u.add("custom_types",a),r.get(o,u,n)}})}},{key:"getTotalUnreadChannelCount",value:function(e,n){var r=this;this.sb.ConnectionManager.ready(function(e,a){if(e)n(e,null);else{var i=t.Path.USERS_USERID_UNREAD_CHANNEL_COUNT.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"searchMessages",value:function(e,n){var r=this,a=e.keyword,i=e.limit,s=e.reverse,o=e.exactMatch,u=e.channelUrl,l=e.channelCustomType,c=e.messageTimestampFrom,d=e.messageTimestampTo,f=e.order,h=e.nextToken;this.sb.ConnectionManager.ready(function(e,p){if(e)n(e,null);else{var y=t.Path.SEARCH_MESSAGE,g=new H({limit:i,reverse:s,query:a,custom_type:l});c&&g.add("message_ts_from",c),d&&g.add("message_ts_to",d),u&&g.add("channel_url",u),f&&g.add("sort_field",f),"boolean"==typeof o&&g.add("exact_match",o),null!==h&&0<h.length&&g.add("after",h),r.get(y,g,n)}})}},{key:"markAsReadAll",value:function(e,n){var r=this,a=e.channelUrls;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_MARKASREADALL.replace("%s",encodeURIComponent(i.userId)),o=new H;a&&o.add("channel_urls",a),r.put(s,o,n)}})}},{key:"markAsDelivered",value:function(e,n){var r=this,a=e.channelUrl,i=e.userId;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED.replace("%s",encodeURIComponent(a)),u=new H;i&&u.add("user_id",i),r.put(o,u,n)}})}},{key:"setChannelInvitationPreference",value:function(e,n){var r=this,a=e.isAutoAccept;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE.replace("%s",encodeURIComponent(i.userId)),o=new H({auto_accept:a});r.put(s,o,n)}})}},{key:"blockUser",value:function(e,n){var r=this,a=e.blockedUserId;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(i.userId)),o=new H({target_id:a});r.post(s,o,n)}})}},{key:"unblockUser",value:function(e,n){var r=this,a=e.unblockedUserId;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_BLOCK_TARGETID.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"getPushTriggerOption",value:function(e,n){var r=this;this.sb.ConnectionManager.ready(function(e,a){if(e)n(e,null);else{var i=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"setPushTriggerOption",value:function(e,n){var r=this,a=e.pushTriggerOption;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(i.userId)),o=new H({push_trigger_option:a});r.put(s,o,n)}})}},{key:"getPushTokens",value:function(e,n){var r=this,a=e.ts,i=e.token,s=e.type;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=t.Path.USERS_USERID_PUSH_DEVICE_TOKENS.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(s)),l=new H;i&&l.add("token",i),a&&l.add("created_ts",a),r.get(u,l,n)}})}},{key:"getPushTemplate",value:function(e,n){var r=this;this.sb.ConnectionManager.ready(function(e,a){if(e)n(e,null);else{var i=t.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"setPushTemplate",value:function(e,n){var r=this,a=e.templateName;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSH_TEMPLATE.replace("%s",encodeURIComponent(i.userId)),o=new H({name:a});r.put(s,o,n)}})}},{key:"getDoNotDisturb",value:function(e,n){var r=this;this.sb.ConnectionManager.ready(function(e,a){if(e)n(e,null);else{var i=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"setDoNotDisturb",value:function(e,n){var r=this,a=e.doNotDisturbOn,i=e.startHour,s=e.startMin,o=e.endHour,u=e.endMin,l=e.timezone;this.sb.ConnectionManager.ready(function(e,c){if(e)n(e,null);else{var d=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(c.userId)),f=new H({do_not_disturb:a,start_hour:i,start_min:s,end_hour:o,end_min:u,timezone:l});r.put(d,f,n)}})}},{key:"getSnoozePeriod",value:function(e,n){var r=this;this.sb.ConnectionManager.ready(function(e,a){if(e)n(e,null);else{var i=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(a.userId));r.get(i,null,n)}})}},{key:"setSnoozePeriod",value:function(e,n){var r=this,a=e.snoozeOn,i=e.startTs,s=e.endTs;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=t.Path.USERS_USERID_PUSHPREFERENCE.replace("%s",encodeURIComponent(o.userId)),l=new H({snooze_enabled:a,snooze_start_ts:i,snooze_end_ts:s});r.put(u,l,n)}})}},{key:"registerGCMPushToken",value:function(e,n){var r=this,a=e.token;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(i.userId)),o=new H({gcm_reg_token:a,always_push:!0});r.post(s,o,n)}})}},{key:"unregisterGCMPushToken",value:function(e,n){var r=this,a=e.token;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSH_GCM_TOKEN.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"unregisterAllGCMPushTokens",value:function(e,n){var r=this;this.sb.ConnectionManager.ready(function(e,a){if(e)n(e,null);else{var i=t.Path.USERS_USERID_PUSH_GCM.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}})}},{key:"registerAPNSPushToken",value:function(e,n){var r=this,a=e.token;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(i.userId)),o=new H({apns_device_token:a,always_push:!0});r.post(s,o,n)}})}},{key:"unregisterAPNSPushToken",value:function(e,n){var r=this,a=e.token;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSH_APNS_TOKEN.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"unregisterAllAPNSPushTokens",value:function(e,n){var r=this;this.sb.ConnectionManager.ready(function(e,a){if(e)n(e,null);else{var i=t.Path.USERS_USERID_PUSH_APNS.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}})}},{key:"unregisterAllPushTokens",value:function(e,n){var r=this;this.sb.ConnectionManager.ready(function(e,a){if(e)n(e,null);else{var i=t.Path.USERS_USERID_PUSH.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}})}},{key:"loadFriendList",value:function(e,n){var r=this,a=e.token,i=e.limit;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=t.Path.FRIENDS.replace("%s",encodeURIComponent(s.userId)),u=new H({limit:i,token:a});r.get(o,u,n)}})}},{key:"getFriendChangeLogsByToken",value:function(e,n){var r=this,a=e.token;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.FRIENDS_CHANGE_LOGS.replace("%s",encodeURIComponent(i.userId)),o=new H;a&&o.add("token",a),r.get(s,o,n)}})}},{key:"addFriends",value:function(e,n){var r=this,a=e.userIds;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.FRIENDS.replace("%s",encodeURIComponent(i.userId)),o=new H({user_ids:a});r.post(s,o,n)}})}},{key:"deleteFriends",value:function(e,n){var r=this,a=e.userIds;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.FRIENDS.replace("%s",encodeURIComponent(i.userId)),o=new H({user_ids:a});r.delete(s,o,n)}})}},{key:"uploadFriendDiscoveries",value:function(e,n){var r=this,a=e.discoveries;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(i.userId)),o=[];a.forEach(function(e){o.push({friend_discovery_key:e.friendDiscoveryKey,friend_name:"string"==typeof e.friendName||e.friendName?e.friendName:null})});var u=new H({friend_discoveries:o});r.put(s,u,n)}})}},{key:"deleteFriendDiscoveries",value:function(e,n){var r=this,a=e.discoveryKeys;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.FRIENDS_DISCOVERIES.replace("%s",encodeURIComponent(i.userId)),o=new H({friend_discovery_keys:a});r.delete(s,o,n)}})}},{key:"loadUserList",value:function(e,n){var r=this,a=e.token,i=e.limit,s=e.userIdsFilter,o=e.metaDataKeyFilter,u=e.metaDataValuesFilter;this.sb.ConnectionManager.ready(function(e,l){if(e)n(e,null);else{var c=t.Path.USERS,d=new H({token:a,limit:i});s&&0<s.length&&d.add("user_ids",s),o&&u&&0<u.length&&(d.add("metadatakey",o),d.add("metadatavalues_in",u)),r.get(c,d,n)}})}},{key:"loadBlockedUserList",value:function(e,n){var r=this,a=e.token,i=e.limit,s=e.userIdsFilter;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=t.Path.USERS_USERID_BLOCK.replace("%s",encodeURIComponent(o.userId)),l=new H({token:a,limit:i});s&&0<s.length&&l.add("user_ids",s),r.get(u,l,n)}})}},{key:"createUserMetaData",value:function(e,n){var r=this,a=e.metaData;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(i.userId)),o=new H({metadata:a});r.post(s,o,n)}})}},{key:"updateUserMetaData",value:function(e,n){var r=this,a=e.metaData,i=e.upsert;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=t.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(s.userId)),u=new H({metadata:a,upsert:i});r.put(o,u,n)}})}},{key:"deleteUserMetaData",value:function(e,n){var r=this,a=e.metaDataKey;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_METADATA_KEY.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"deleteAllUserMetaData",value:function(e,n){var r=this;this.sb.ConnectionManager.ready(function(e,a){if(e)n(e,null);else{var i=t.Path.USERS_USERID_METADATA.replace("%s",encodeURIComponent(a.userId));r.delete(i,null,n)}})}},{key:"getMessageChangeLogs",value:function(e,n){var r=this,a=e.channelUrl,i=e.ts,s=e.timestamp,o=e.token,u=e.isOpenChannel,l=e.includeMetaArray,c=e.includeReaction,d=e.includeReplies,f=e.includeParentMessageText,h=e.includeThreadInfo;this.sb.ConnectionManager.ready(function(e,p){if(e)n(e,null);else{var y=u?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS.replace("%s",encodeURIComponent(a)),g=new H;o&&g.add("token",o),i&&g.add("change_ts",i),s&&g.add("change_ts",s),"boolean"==typeof l&&g.add("with_sorted_meta_array",l),"boolean"==typeof c&&g.add("include_reactions",c),"boolean"==typeof d&&g.add("include_replies",d),"boolean"==typeof f&&g.add("include_parent_text_message",f),"boolean"==typeof h&&g.add("include_thread_info",h),r.get(y,g,n)}})}},{key:"getMyMutedInfo",value:function(e,n){var r=this,a=e.channelUrl,i=e.userId,s=e.isGroupChannel;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=s?t.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):t.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.get(u,null,n)}})}},{key:"loadBannedUserList",value:function(e,n){var r=this,a=e.token,i=e.limit,s=e.channelUrl,o=e.isOpenChannel;this.sb.ConnectionManager.ready(function(e,u){if(e)n(e,null);else{var l=o?t.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)):t.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(s)),c=new H({token:a,limit:i});r.get(l,c,n)}})}},{key:"loadMutedUserList",value:function(e,n){var r=this,a=e.token,i=e.limit,s=e.channelUrl,o=e.isOpenChannel;this.sb.ConnectionManager.ready(function(e,u){if(e)n(e,null);else{var l=o?t.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)):t.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(s)),c=new H({token:a,limit:i});r.get(l,c,n)}})}},{key:"getMessageList",value:function(e,n){var r=this,a=e.channel,i=e.token,s=e.tokenType,o=e.isInclusive,u=e.prevResultSize,l=void 0===u?0:u,c=e.nextResultSize,d=void 0===c?0:c,f=e.shouldReverse,h=e.messageType,p=e.customType,y=e.senderUserIds,g=e.includeMetaArray,m=e.includeReaction,_=e.includeThreadInfo,v=e.includeReplies,E=e.includeParentMessageText,b=e.rootMessageId,C=e.parentMessageId;this.sb.ConnectionManager.ready(function(e,u){if(e)n(e,null);else{var c=a.isOpenChannel()?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",a.url):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",a.url),S=new H({is_sdk:String(!0),prev_limit:String(l),next_limit:String(d),include:String(o),reverse:String(f)});"timestamp"===s?S.add("message_ts",i):"messageId"===s&&S.add("message_id",String(i)),h&&S.add("message_type",String(h)),p&&S.add("custom_type",String(p)),Array.isArray(y)&&0<y.length&&S.add("sender_ids",y),"boolean"==typeof g&&S.add("with_sorted_meta_array",g),"boolean"==typeof m&&S.add("include_reactions",m),"boolean"==typeof _&&S.add("include_thread_info",_),"boolean"==typeof v&&S.add("include_replies",v),"boolean"==typeof E&&S.add("include_parent_message_text",E),b&&S.add("root_message_id",b),C&&S.add("parent_message_id",C),r.get(c,S,n)}})}},{key:"translateUserMessage",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.messageId,o=e.translationTargetLanguages;this.sb.ConnectionManager.ready(function(e,u){if(e)n(e,null);else{var l=i?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(a)).replace("%s",s):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION.replace("%s",encodeURIComponent(a)).replace("%s",s),c=new H({target_langs:o});r.post(l,c,n)}})}},{key:"getMessage",value:function(e,n){var r=this,a=e.channel,i=e.messageId;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=a.isOpenChannel()?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a.url)).replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a.url)).replace("%s",encodeURIComponent(i));r.get(o,null,n)}})}},{key:"deleteMessage",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.messageId;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=i?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s));r.delete(u,null,n)}})}},{key:"muteUser",value:function(e,n){var r=this,a=e.channelUrl,i=e.userId,s=e.description,o=e.seconds,u=e.isGroupChannel;this.sb.ConnectionManager.ready(function(e,l){if(e)n(e,null);else{var c=u?t.Path.GROUPCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(a)):t.Path.OPENCHANNELS_CHANNELURL_MUTE.replace("%s",encodeURIComponent(a)),d=new H({user_id:i});o&&(0<o||-1!==o)&&d.add("seconds",o),s&&d.add("description",s),r.post(c,d,n)}})}},{key:"unmuteUser",value:function(e,n){var r=this,a=e.channelUrl,i=e.userId,s=e.isGroupChannel;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=s?t.Path.GROUPCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):t.Path.OPENCHANNELS_CHANNELURL_MUTE_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.delete(u,null,n)}})}},{key:"banUser",value:function(e,n){var r=this,a=e.channelUrl,i=e.userId,s=e.description,o=e.seconds,u=e.isGroupChannel;this.sb.ConnectionManager.ready(function(e,l){if(e)n(e,null);else{var c=u?t.Path.GROUPCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(a)):t.Path.OPENCHANNELS_CHANNELURL_BAN.replace("%s",encodeURIComponent(a)),d=new H({user_id:i});s&&d.add("description",s),d.add("seconds",String(o)),r.post(c,d,n)}})}},{key:"unbanUser",value:function(e,n){var r=this,a=e.channelUrl,i=e.userId,s=e.isGroupChannel;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=s?t.Path.GROUPCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i)):t.Path.OPENCHANNELS_CHANNELURL_BAN_USERID.replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(i));r.delete(u,null,n)}})}},{key:"getMetaCounters",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.keys;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=i?t.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),l=new H({keys:s});r.get(u,l,n)}})}},{key:"createMetaCounters",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.metaCounter;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=i?t.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),l=new H({metacounter:s});r.post(u,l,n)}})}},{key:"updateMetaCounters",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.metaCounter,o=e.upsert,u=e.mode;this.sb.ConnectionManager.ready(function(e,l){if(e)n(e,null);else{var c=i?t.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)),d=new H({metacounter:s,upsert:o,mode:u});r.put(c,d,n)}})}},{key:"deleteMetaCounter",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.key;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=i?t.Path.OPENCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s):t.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s);r.delete(u,null,n)}})}},{key:"deleteAllMetaCounters",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=i?t.Path.OPENCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_METACOUNTER.replace("%s",encodeURIComponent(a));r.delete(o,null,n)}})}},{key:"getMetaData",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.keys;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=i?t.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),l=new H({keys:s});r.get(u,l,n)}})}},{key:"createMetaData",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.metaData;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=i?t.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),l=new H({metadata:s});r.post(u,l,n)}})}},{key:"updateMetaData",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.metaData,o=e.upsert;this.sb.ConnectionManager.ready(function(e,u){if(e)n(e,null);else{var l=i?t.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)),c=new H({metadata:s,upsert:o});r.put(l,c,n)}})}},{key:"deleteMetaData",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.key;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=i?t.Path.OPENCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s):t.Path.GROUPCHANNELS_CHANNELURL_METADATA_KEY.replace("%s",encodeURIComponent(a)).replace("%s",s);r.delete(u,null,n)}})}},{key:"deleteAllMetaData",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=i?t.Path.OPENCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_METADATA.replace("%s",encodeURIComponent(a));r.delete(o,null,n)}})}},{key:"loadOperatorList",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.token,o=e.limit;this.sb.ConnectionManager.ready(function(e,u){if(e)n(e,null);else{var l=i?t.Path.OPENCHANNELS_OPERATORS.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_OPERATORS.replace("%s",encodeURIComponent(a)),c=new H({token:s,limit:o});r.get(l,c,n)}})}},{key:"getOpenChannel",value:function(e,n){var r=this,a=e.channelUrl,i=e.internalCall;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=t.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),u=new H({});u.internal=i===O.INTERNAL_CALL,r.get(o,u,n)}})}},{key:"loadOpenChannelList",value:function(e,n){var r=this,a=e.token,i=e.limit,s=e.nameKeyword,o=e.urlKeyword,u=e.customTypes,l=e.includeFrozen;this.sb.ConnectionManager.ready(function(e,c){if(e)n(e,null);else{var d=t.Path.OPENCHANNELS,f=new H({token:a,limit:i});s&&f.add("name_contains",s),o&&f.add("url_contains",o),u&&0<u.length&&f.add("custom_types",u),"boolean"==typeof l&&f.add("show_frozen",l),r.get(d,f,n)}})}},{key:"loadParticipantList",value:function(e,n){var r=this,a=e.token,i=e.limit,s=e.channelUrl;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=t.Path.OPENCHANNELS_CHANNELURL_PARTICIPANTS.replace("%s",encodeURIComponent(s)),l=new H({token:a,limit:i});r.get(u,l,n)}})}},{key:"createOpenChannel",value:function(e,n){var r=this,a=e.name,i=e.coverUrlOrImage,s=e.data,o=e.operatorUserIds,u=e.customType;this.sb.ConnectionManager.ready(function(e,l){if(e)n(e,null);else{var c=t.Path.OPENCHANNELS,d=new H;"string"==typeof i&&d.add("cover_url",i),x.isFile(i)&&d.add("cover_file",i),null!==a&&"string"==typeof a&&d.add("name",a),s&&d.add("data",s),o&&(Array.isArray(o)?d.add("operators",o):d.add("operators",[o])),u&&d.add("custom_type",u),r.post(c,d,n)}})}},{key:"updateOpenChannel",value:function(e,n){var r=this,a=e.channelUrl,i=e.name,s=e.coverUrlOrImage,o=e.data,u=e.operatorUserIds,l=e.customType;this.sb.ConnectionManager.ready(function(e,c){if(e)n(e,null);else{var d=t.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),f=new H;"string"==typeof s&&f.add("cover_url",s),x.isFile(s)&&f.add("cover_file",s,s.name),null!==i&&"string"==typeof i&&f.add("name",i),null!==o&&"string"==typeof o&&f.add("data",o),null!==u&&(Array.isArray(u)?f.add("operator_ids",u):f.add("operator_ids",[u])),null!==l&&"string"==typeof l&&f.add("custom_type",l),r.put(d,f,n)}})}},{key:"deleteOpenChannel",value:function(e,n){var r=this,a=e.channelUrl;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.OPENCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"getGroupChannel",value:function(e,n){var r=this,a=e.channelUrl,i=e.showMember,s=e.internalCall;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=t.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a)),l=new H({show_member:i,show_read_receipt:!0,show_delivery_receipt:!0});l.internal=s===O.INTERNAL_CALL,r.get(u,l,n)}})}},{key:"loadGroupChannelList",value:function(e,n){var r=this,a=e.token,i=e.limit,s=e.includeEmpty,o=e.order,u=e.userIdsFilter,l=e.nicknameContainsFilter,c=e.channelNameContainsFilter,d=e.channelUrlsFilter,f=e.customTypesFilter,h=e.customTypeStartsWithFilter,p=e.memberStateFilter,y=e.superChannelFilter,g=e.publicChannelFilter,m=e.unreadChannelFilter,_=e.metadataOrderKeyFilter,v=e.hiddenChannelFilter,E=e.searchFilter,b=e.includeFrozen;this.sb.ConnectionManager.ready(function(e,C){if(e)n(e,null);else{var S=t.Path.MYGROUPCHANNELS.replace("%s",encodeURIComponent(C.userId)),O=new H({token:a,limit:i,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),member_state_filter:p});f&&0<f.length&&O.add("custom_types",f),l&&O.add("members_nickname_contains",l),c&&O.add("name_contains",c),E.hasOwnProperty("search_query")&&E.hasOwnProperty("search_fields")&&(O.add("search_query",E.search_query),O.add("search_fields",E.search_fields)),u.userIds&&0<u.userIds.length&&(u.includeMode?(O.add("members_include_in",u.userIds),O.add("query_type",u.queryType.toUpperCase())):O.add("members_exactly_in",u.userIds)),d&&0<d.length&&O.add("channel_urls",d),O.add("super_mode",y),O.add("public_mode",g),O.add("unread_filter",m),_&&O.add("metadata_order_key",_),h&&O.add("custom_type_startswith",h),v&&O.add("hidden_mode",v),"boolean"==typeof b&&O.add("show_frozen",b),r.get(S,O,n)}})}},{key:"loadPublicGroupChannelList",value:function(e,n){var r=this,a=e.token,i=e.limit,s=e.includeEmpty,o=e.order,u=e.channelNameContainsFilter,l=e.channelUrlsFilter,c=e.customTypesFilter,d=e.customTypeStartsWithFilter,f=e.superChannelFilter,h=e.membershipFilter,p=e.metadataOrderKeyFilter,y=e.includeFrozen;this.sb.ConnectionManager.ready(function(e,g){if(e)n(e,null);else{var m=r.cls.GroupChannel,_=t.Path.GROUPCHANNELS,v=new H({token:a,limit:i,order:o,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:String(s),public_mode:m.PublicChannelFilter.PUBLIC,public_membership_mode:h});c&&0<c.length&&v.add("custom_types",c),u&&v.add("name_contains",u),l&&0<l.length&&v.add("channel_urls",l),v.add("super_mode",f),p&&v.add("metadata_order_key",p),d&&v.add("custom_type_startswith",d),"boolean"==typeof y&&v.add("show_frozen",y),r.get(_,v,n)}})}},{key:"createGroupChannel",value:function(e,n){var r=this,a=e.isDistinct,i=e.isSuper,s=e.isBroadcast,o=e.isPublic,u=e.channelUrl,l=e.isDiscoverable,c=e.isStrict,d=e.name,f=e.data,h=e.customType,p=e.coverUrl,y=e.coverImage,g=e.accessCode,m=e.isEphemeral,_=e._invitedUserIds,v=void 0===_?[]:_,E=e.operatorUserIds,C=e.messageSurvivalSeconds;this.sb.ConnectionManager.ready(function(e,_){if(e)n(e,null);else{var S=t.Path.GROUPCHANNELS,O=new H({user_ids:[_.userId].concat(b(v)).filter(function(e,t,n){return t===n.indexOf(e)})});null!==p&&"string"==typeof p&&O.add("cover_url",p),x.isFile(y)&&O.add("cover_file",y,y.name),null!==u&&O.add("channel_url",u),null!==a&&O.add("is_distinct",a),null!==i&&O.add("is_super",i),null!==s&&O.add("is_broadcast",s),null!==o&&O.add("is_public",o),null!==l&&O.add("is_discoverable",l),null!==c&&O.add("strict",c),null!==m&&O.add("is_ephemeral",m),g&&O.add("access_code",g),null!==d&&"string"==typeof d&&O.add("name",d),f&&O.add("data",f),h&&O.add("custom_type",h),Array.isArray(E)&&0<E.length&&O.add("operator_ids",E),null!==C&&-1<C&&O.add("message_survival_seconds",C),r.post(S,O,n)}})}},{key:"updateGroupChannel",value:function(e,n){var r=this,a=e.isDistinct,i=e.isPublic,s=e.channelUrl,o=e.isDiscoverable,u=e.name,l=e.data,c=e.customType,d=e.coverUrl,f=e.coverImage,h=e.accessCode,p=e.operatorUserIds,y=e.messageSurvivalSeconds;this.sb.ConnectionManager.ready(function(e,g){if(e)n(e,null);else{var m=t.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(s)),_=new H;null!==a&&_.add("is_distinct",a),null!==i&&_.add("is_public",i),null!==o&&_.add("is_discoverable",o),null!==h&&_.add("access_code",h),null!==d&&"string"==typeof d&&_.add("cover_url",d),x.isFile(f)&&_.add("cover_file",f,f.name),null!==u&&"string"==typeof u&&_.add("name",u),null!==l&&"string"==typeof l&&_.add("data",l),null!==c&&"string"==typeof c&&_.add("custom_type",c),null!==p&&(Array.isArray(p)?_.add("operator_ids",p):p&&_.add("operator_ids",[p])),null!==y&&-1<y&&_.add("message_survival_seconds",y),r.put(m,_,n)}})}},{key:"addOperators",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=void 0!==i&&i,o=e.operatorUserIds;this.sb.ConnectionManager.ready(function(e,i){if(!e){var u=(s?t.Path.OPENCHANNELS_CHANNELURL_OPERATORS:t.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(a)),l=new H({operator_ids:o});r.post(u,l,n)}})}},{key:"removeOperators",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=void 0!==i&&i,o=e.operatorUserIds;this.sb.ConnectionManager.ready(function(e,i){if(!e){var u=(s?t.Path.OPENCHANNELS_CHANNELURL_OPERATORS:t.Path.GROUPCHANNELS_CHANNELURL_OPERATORS).replace("%s",encodeURIComponent(a)),l=new H({operator_ids:o});r.delete(u,l,n)}})}},{key:"inviteToGroupChannel",value:function(e,n){var r=this,a=e.channelUrl,i=e.userIds;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=t.Path.GROUPCHANNELS_CHANNELURL_INVITE.replace("%s",encodeURIComponent(a)),u=new H({user_ids:i});r.post(o,u,n)}})}},{key:"acceptInvitation",value:function(e,n){var r=this,a=e.channelUrl,i=e.accessCode;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=t.Path.GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION.replace("%s",encodeURIComponent(a)),u=new H({user_id:s.userId});i&&u.add("access_code",i),r.put(o,u,n)}})}},{key:"declineInvitation",value:function(e,n){var r=this,a=e.channelUrl;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION.replace("%s",encodeURIComponent(a)),o=new H({user_id:i.userId});r.put(s,o,n)}})}},{key:"joinGroupChannel",value:function(e,n){var r=this,a=e.channelUrl,i=e.accessCode;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=t.Path.GROUPCHANNELS_CHANNELURL_JOIN.replace("%s",encodeURIComponent(a)),u=new H({user_id:s.userId});i&&u.add("access_code",i),r.put(o,u,n)}})}},{key:"leaveGroupChannel",value:function(e,n){var r=this,a=e.channelUrl;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.GROUPCHANNELS_CHANNELURL_LEAVE.replace("%s",encodeURIComponent(a)),o=new H({user_id:i.userId});r.put(s,o,n)}})}},{key:"hideGroupChannel",value:function(e,n){var r=this,a=e.channelUrl,i=e.hidePreviousMessages,s=e.allowAutoUnhide;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=t.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(a)),l=new H({user_id:o.userId,hide_previous_messages:i,allow_auto_unhide:s});r.put(u,l,n)}})}},{key:"unhideGroupChannel",value:function(e,n){var r=this,a=e.channelUrl;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.GROUPCHANNELS_CHANNELURL_HIDE.replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"freeze",value:function(e,n){var r=this,a=e.channelUrl,i=e.isGroupChannel,s=e.freezing;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=i?t.Path.GROUPCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(a)):t.Path.OPENCHANNELS_CHANNELURL_FREEZE.replace("%s",encodeURIComponent(a)),l=new H({freeze:s});r.put(u,l,n)}})}},{key:"deleteGroupChannel",value:function(e,n){var r=this,a=e.channelUrl;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.GROUPCHANNELS_CHANNELURL.replace("%s",encodeURIComponent(a));r.delete(s,null,n)}})}},{key:"loadMemberList",value:function(e,n){var r=this,a=e.channelUrl,i=e.token,s=e.limit,o=e.mutedMemberFilter,u=e.order,l=e.memberStateFilter,c=e.nicknameStartsWithFilter;this.sb.ConnectionManager.ready(function(e,d){if(e)n(e,null);else{var f=t.Path.GROUPCHANNELS_MEMBERS.replace("%s",encodeURIComponent(a)),h=new H({token:i,limit:s,order:u.toLowerCase(),muted_member_filter:o.toLowerCase(),member_state_filter:l,show_read_receipt:!0,show_delivery_receipt:!0});c&&h.add("nickname_startswith",c),r.get(f,h,n)}})}},{key:"report",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.reportCategory,o=e.reportingUserId,u=e.reportDescription;this.sb.ConnectionManager.ready(function(e,l){if(e)n(e,null);else{var c=t.Path.REPORT_CHANNELS.replace("%s",encodeURIComponent(i?"open_channels":"group_channels")).replace("%s",encodeURIComponent(a)),d=new H({report_category:s});null!=o&&d.add("reporting_user_id",o),null!=u&&d.add("report_description",u),r.post(c,d,n)}})}},{key:"reportUser",value:function(e,n){var r=this,a=e.offendingUserId,i=e.channelUrl,s=e.isOpenChannel,o=e.reportCategory,u=e.reportingUserId,l=e.reportDescription;this.sb.ConnectionManager.ready(function(e,c){if(e)n(e,null);else{var d=t.Path.REPORT_USERS.replace("%s",encodeURIComponent(a)),f=new H({channel_url:i,channel_type:s?"open_channels":"group_channels",report_category:o});null!=u&&f.add("reporting_user_id",u),null!=l&&f.add("report_description",l),r.post(d,f,n)}})}},{key:"reportMessage",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.messageId,o=e.reportCategory,u=e.reportingUserId,l=e.reportDescription,c=e.offendingUserId;this.sb.ConnectionManager.ready(function(e,d){if(e)n(e,null);else{var f=t.Path.REPORT_MESSAGES.replace("%s",encodeURIComponent(i?"open_channels":"group_channels")).replace("%s",encodeURIComponent(a)).replace("%s",encodeURIComponent(s)),h=new H({report_category:o,offending_user_id:c});null!=u&&h.add("reporting_user_id",u),null!=l&&h.add("report_description",l),r.post(f,h,n)}})}},{key:"sendUserMessage",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.message,o=e.data,u=e.customType,l=e.translationTargetLanguages,c=e.metaArrays,d=e.mentionType,f=e.mentionedUserIds,h=e.pushNotificationDeliveryOption,p=e.rootMessageId,y=e.parentMessageId;this.sb.ConnectionManager.ready(function(e,g){if(e)n(e,null);else{var m=r.cls.FileMessageParams,_=i?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)),v=new H({message_type:"MESG",user_id:g.userId,message:s,mention_type:d,mentioned_user_ids:[]});null!=o&&v.add("data",o),null!=u&&v.add("custom_type",u),l&&v.add("translation_target_langs",l),c&&0<c.length&&v.add("sorted_metaarray",c.map(function(e){return e.encode()})),d===r.cls.BaseMessageParams.MentionType.CHANNEL?v.add("mentioned_user_ids",[]):Array.isArray(f)&&0<f.length&&v.add("mentioned_user_ids",f),h&&h!==m.PushNotificationDeliveryOption.DEFAULT&&v.add("push_option",h),p&&v.add("root_message_id",p),y&&v.add("parent_message_id",y),r.post(_,v,n)}})}},{key:"sendFileMessage",value:function(e,n){var r=this,a=e.channelUrl,i=e.isOpenChannel,s=e.fileUrl,o=e.fileName,u=e.fileSize,l=e.fileType,c=e.data,d=e.customType,f=e.thumbnailSizes,h=e.requireAuth,p=e.metaArrays,y=e.mentionType,g=e.mentionedUserIds,m=e.pushNotificationDeliveryOption,_=e.rootMessageId,v=e.parentMessageId;this.sb.ConnectionManager.ready(function(e,E){if(e)n(e,null);else{var b=r.cls.FileMessageParams,C=i?t.Path.OPENCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)):t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES.replace("%s",encodeURIComponent(a)),S=new H({message_type:"FILE",user_id:E.userId,url:s,mention_type:y,mentioned_user_ids:[]});null!=o&&S.add("file_name",o),null!=u&&S.add("file_size",u),null!=l&&S.add("file_type",l),null!=c&&S.add("custom_field",c),null!=d&&S.add("custom_type",d),f&&S.add("thumbnails",f),h&&S.add("require_auth",h),p&&0<p.length&&S.add("sorted_metaarray",p.map(function(e){return e.encode()})),y===r.cls.BaseMessageParams.MentionType.CHANNEL?S.add("mentioned_user_ids",[]):Array.isArray(g)&&0<g.length&&S.add("mentioned_user_ids",g),m&&m!==b.PushNotificationDeliveryOption.DEFAULT&&S.add("push_option",m),_&&S.add("root_message_id",_),v&&S.add("parent_message_id",v),r.post(C,S,n)}})}},{key:"uploadFile",value:function(e,n){var r=this,a=e.file,i=e.thumbnailSizes,s=e.channelUrl,o=e.progressHandler,u=e.reqId;this.sb.ConnectionManager.ready(function(e,l){if(e)n(e,null);else{var c=t.Path.STORAGE_FILE,d=new H;if(d.add("file",a,a.name),s&&"string"==typeof s&&d.add("channel_url",s),i)for(var f=0;f<i.length;f++)d.add("thumbnail"+(f+1),i[f].maxWidth+","+i[f].maxHeight);d.upload.reqId=u,d.upload.deleteRequest=function(){var e=r.cls.FileMessageQueue;e.uploadRequest[u]&&delete e.uploadRequest[u]},d.upload.progressHandler=function(e){o&&"function"==typeof o&&o(e,u)},r.post(c,d,n)}})}},{key:"registerScheduledUserMessage",value:function(e,n){var r=this,a=e.groupChannelParams,i=e.channelUrl,s=e.isOpenChannel;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=s?t.Path.OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(i)):t.Path.GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES.replace("%s",encodeURIComponent(i)),l=new H({scheduled_dt:a._getScheduleString(),user_id:o.userId,message:a.message,data:a.data});a.customType&&l.add("custom_type",a.customType),a.metaArrayKeys&&0<Object.keys(a.metaArrayKeys).length&&l.add("metaarray",a.metaArrayKeys),a.mentionType&&l.add("mention_type",a._mentionType),a._mentionType===r.cls.BaseMessageParams.MentionType.CHANNEL?l.add("mentioned_user_ids",[]):Array.isArray(a._mentionedUserIds)&&0<a._mentionedUserIds.length&&l.add("mentioned_user_ids",a._mentionedUserIds),a.translationTargetLanguages&&0<a.translationTargetLanguages.length&&l.add("translation_target_langs",a.translationTargetLanguages),a.pushNotificationDeliveryOption&&a.pushNotificationDeliveryOption!==r.cls.BaseMessageParams.PushNotificationDeliveryOption.DEFAULT&&l.add("push_option",a.pushNotificationDeliveryOption),r.post(u,l,n)}})}},{key:"getMyPushTriggerOption",value:function(e,n){var r=this,a=e.channelUrl;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(i.userId)).replace("%s",encodeURIComponent(a));r.get(s,null,n)}})}},{key:"setMyPushTriggerOption",value:function(e,n){var r=this,a=e.channelUrl,i=e.pushTriggerOption,s=e.enable;this.sb.ConnectionManager.ready(function(e,o){if(e)n(e,null);else{var u=t.Path.USERS_USERID_PUSHPREFERENCE_CHANNELURL.replace("%s",encodeURIComponent(o.userId)).replace("%s",encodeURIComponent(a)),l=new H;i&&l.add("push_trigger_option",i),"boolean"==typeof s&&l.add("enable",s),r.put(u,l,n)}})}},{key:"setMyCountPreference",value:function(e,n){var r=this,a=e.channelUrl,i=e.countPreference;this.sb.ConnectionManager.ready(function(e,s){if(e)n(e,null);else{var o=t.Path.USERS_COUNT_PREFERENCE.replace("%s",encodeURIComponent(s.userId)).replace("%s",encodeURIComponent(a)),u=new H({count_preference:i});r.put(o,u,n)}})}},{key:"resetMyHistory",value:function(e,n){var r=this,a=e.channelUrl;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.GROUPCHANNELS_RESET_USER_HISTORY.replace("%s",encodeURIComponent(a));r.put(s,null,n)}})}},{key:"addReaction",value:function(e,n){var r=this,a=e.isGroupChannel,i=e.channelUrl,s=e.messageId,o=e.key;this.sb.ConnectionManager.ready(function(e,u){if(e)n(e,null);else{var l=a?t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)),c=new H({reaction:o});r.post(l,c,n)}})}},{key:"deleteReaction",value:function(e,n){var r=this,a=e.isGroupChannel,i=e.channelUrl,s=e.messageId,o=e.key;this.sb.ConnectionManager.ready(function(e,u){if(e)n(e,null);else{var l=a?t.Path.GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)):t.Path.OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION.replace("%s",encodeURIComponent(i)).replace("%s",encodeURIComponent(s)),c=new H({reaction:o});r.delete(l,c,n)}})}},{key:"getAllEmoji",value:function(e){var n=this;this.sb.ConnectionManager.ready(function(r,a){r?e(r,null):n.get(t.Path.EMOJI_CATEGORIES,null,e)})}},{key:"getEmojiCategory",value:function(e,n){var r=this,a=e.categoryId;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.EMOJI_CATEGORIES_CATEGORYID.replace("%s",a);r.get(s,null,n)}})}},{key:"getEmoji",value:function(e,n){var r=this,a=e.emojiKey;this.sb.ConnectionManager.ready(function(e,i){if(e)n(e,null);else{var s=t.Path.EMOJIS_EMOJIKEY.replace("%s",a);r.get(s,null,n)}})}}],[{key:"Path",get:function(){return{USERS:"/users",USERS_USERID:"/users/%s",USERS_USERID_LOGIN:"/users/%s/login",USERS_USERID_METADATA:"/users/%s/metadata",USERS_USERID_METADATA_KEY:"/users/%s/metadata/%s",USERS_USERID_MARKASREADALL:"/users/%s/mark_as_read_all",USERS_USERID_MY_GROUP_CHANNEL_CHANGELOGS:"/users/%s/my_group_channels/changelogs",USERS_USERID_UNREAD_ITEM_COUNT:"/users/%s/unread_item_count",USERS_USERID_UNREAD_MESSAGE_COUNT:"/users/%s/unread_message_count",USERS_USERID_UNREAD_CHANNEL_COUNT:"/users/%s/unread_channel_count",USERS_USERID_PUSH_GCM_TOKEN:"/users/%s/push/gcm/%s",USERS_USERID_PUSH_GCM:"/users/%s/push/gcm",USERS_USERID_PUSH_DEVICE_TOKENS:"/users/%s/push/%s/device_tokens",USERS_USERID_PUSHPREFERENCE_CHANNELURL:"/users/%s/push_preference/%s",USERS_USERID_PUSHPREFERENCE:"/users/%s/push_preference/",USERS_USERID_PUSH_TEMPLATE:"/users/%s/push/template",USERS_USERID_BLOCK:"/users/%s/block",USERS_USERID_BLOCK_TARGETID:"/users/%s/block/%s",USERS_USERID_PUSH_APNS_TOKEN:"/users/%s/push/apns/%s",USERS_USERID_PUSH_APNS:"/users/%s/push/apns",USERS_USERID_PUSH:"/users/%s/push",USERS_USERID_GROUP_CHANNEL_INVITATION_PREFERENCE:"/users/%s/channel_invitation_preference",USERS_USERID_GROUP_CHANNEL_COUNT:"/users/%s/group_channel_count",USERS_COUNT_PREFERENCE:"/users/%s/count_preference/%s",OPENCHANNELS:"/open_channels",OPENCHANNELS_CHANNELURL:"/open_channels/%s",OPENCHANNELS_CHANNELURL_MESSAGES:"/open_channels/%s/messages",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/open_channels/%s/messages/%s",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/open_channels/%s/messages/%s/translation",OPENCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/open_channels/%s/messages/changelogs",OPENCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/open_channels/%s/scheduled_messages",OPENCHANNELS_CHANNELURL_PARTICIPANTS:"/open_channels/%s/participants",OPENCHANNELS_CHANNELURL_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_METADATA:"/open_channels/%s/metadata",OPENCHANNELS_CHANNELURL_METADATA_KEY:"/open_channels/%s/metadata/%s",OPENCHANNELS_CHANNELURL_METACOUNTER:"/open_channels/%s/metacounter",OPENCHANNELS_CHANNELURL_METACOUNTER_KEY:"/open_channels/%s/metacounter/%s",OPENCHANNELS_CHANNELURL_BAN:"/open_channels/%s/ban",OPENCHANNELS_CHANNELURL_BAN_USERID:"/open_channels/%s/ban/%s",OPENCHANNELS_CHANNELURL_MUTE:"/open_channels/%s/mute",OPENCHANNELS_CHANNELURL_MUTE_USERID:"/open_channels/%s/mute/%s",OPENCHANNELS_CHANNELURL_FREEZE:"/open_channels/%s/freeze",OPENCHANNELS_OPERATORS:"/open_channels/%s/operators",OPENCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/open_channels/%s/messages/%s/reactions",GROUPCHANNELS:"/group_channels",MYGROUPCHANNELS:"/users/%s/my_group_channels",GROUPCHANNELS_CHANNELURL:"/group_channels/%s",GROUPCHANNELS_CHANNELURL_INVITE:"/group_channels/%s/invite",GROUPCHANNELS_CHANNELURL_ACCEPT_INVITATION:"/group_channels/%s/accept",GROUPCHANNELS_CHANNELURL_DECLINE_INVITATION:"/group_channels/%s/decline",GROUPCHANNELS_CHANNELURL_HIDE:"/group_channels/%s/hide",GROUPCHANNELS_CHANNELURL_LEAVE:"/group_channels/%s/leave",GROUPCHANNELS_CHANNELURL_JOIN:"/group_channels/%s/join",GROUPCHANNELS_CHANNELURL_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_CHANNELURL_MESSAGES:"/group_channels/%s/messages",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASREAD:"/group_channels/%s/messages/mark_as_read",GROUPCHANNELS_CHANNELURL_MESSAGES_MARKASDELIVERED:"/group_channels/%s/messages/mark_as_delivered",GROUPCHANNELS_CHANNELURL_MESSAGES_TOTALCOUNT:"/group_channels/%s/messages/total_count",GROUPCHANNELS_CHANNELURL_MESSAGES_UNREADCOUNT:"/group_channels/%s/messages/unread_count",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID:"/group_channels/%s/messages/%s",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_TRANSLATION:"/group_channels/%s/messages/%s/translation",GROUPCHANNELS_CHANNELURL_MESSAGES_CHANGELOGS:"/group_channels/%s/messages/changelogs",GROUPCHANNELS_CHANNELURL_SCHEDULED_MESSAGES:"/group_channels/%s/scheduled_messages",GROUPCHANNELS_CHANNELURL_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_METADATA:"/group_channels/%s/metadata",GROUPCHANNELS_CHANNELURL_METADATA_KEY:"/group_channels/%s/metadata/%s",GROUPCHANNELS_CHANNELURL_METACOUNTER:"/group_channels/%s/metacounter",GROUPCHANNELS_CHANNELURL_METACOUNTER_KEY:"/group_channels/%s/metacounter/%s",GROUPCHANNELS_RESET_USER_HISTORY:"/group_channels/%s/reset_user_history",GROUPCHANNELS_OPERATORS:"/group_channels/%s/operators",GROUPCHANNELS_MEMBERS:"/group_channels/%s/members",GROUPCHANNELS_CHANNELURL_BAN:"/group_channels/%s/ban",GROUPCHANNELS_CHANNELURL_BAN_USERID:"/group_channels/%s/ban/%s",GROUPCHANNELS_CHANNELURL_MUTE:"/group_channels/%s/mute",GROUPCHANNELS_CHANNELURL_MUTE_USERID:"/group_channels/%s/mute/%s",GROUPCHANNELS_CHANNELURL_FREEZE:"/group_channels/%s/freeze",GROUPCHANNELS_CHANNELURL_MESSAGES_MESSAGEID_REACTION:"/group_channels/%s/messages/%s/reactions",STORAGE_FILE:"/storage/file",STORAGE_PROFILE:"/storage/profile_image",FRIENDS:"/users/%s/friends",FRIENDS_CHANGE_LOGS:"/users/%s/friends/changelogs",FRIENDS_DISCOVERIES:"/users/%s/friend_discoveries",SEARCH_MESSAGE:"/search/messages",REPORT_USERS:"/report/users/%s",REPORT_CHANNELS:"/report/%s/%s",REPORT_MESSAGES:"/report/%s/%s/messages/%s",EMOJIS_EMOJIKEY:"/emojis/%s",EMOJI_CATEGORIES:"/emoji_categories",EMOJI_CATEGORIES_CATEGORYID:"/emoji_categories/%s"}}}]),t}(),B=function(){function e(t,n){s(this,e),this.sb=t,this.ws=null,this.wsHost=null,this.WebSocket=null,this.handler=n||new e.ConnectionHandler,this.explicitDisconnect=!1,this.lastActiveMillis=0;try{this.WebSocket="undefined"==typeof WebSocket?a:WebSocket}catch(t){this.WebSocket=WebSocket}}return u(e,[{key:"connect",value:function(e,t,n){var r=this;R.debug("WSClient connect called");var a=w.get(this.sb._iid).container,i=a.pinger,s=a.auth,o=a.extensions,u=a.getUserAgentWithExtensions;this.wsHost=n;try{var l="/?p=JS&pv="+encodeURIComponent(O.OS_VERSION)+"&sv="+encodeURIComponent(O.SDK_VERSION)+"&ai="+encodeURIComponent(this.sb.getApplicationId());if(s.sessionKey?l+="&key="+encodeURIComponent(s.sessionKey):l+="&user_id="+encodeURIComponent(e)+"&access_token="+encodeURIComponent(t),l+="&active=1",l+="&SB-User-Agent="+encodeURIComponent(u(o)),l+="&Request-Sent-Timestamp="+(new Date).getTime().toString(),l+="&include_extra_data="+encodeURIComponent(["premium_feature_list","file_upload_size_limit","emoji_hash"].join(",")),this.ws=new this.WebSocket(this.wsHost+l),!this.ws)return this.sb.isReconnectingOnError=!0,void this.handler.onError("ws does not exist.")}catch(e){return this.sb.isReconnectingOnError=!0,void this.handler.onError(e)}try{this.sb.getDebugMode()&&"undefined"!=typeof window&&(window.ws=this.ws)}catch(e){R.debug("window object does not exist.")}var c=!1;this.ws.onopen=function(e){R.debug("WSClient onopen called"),r.handler.onOpen(e)},this.ws.onmessage=function(e){r.active();var t=e.data.split("\n");for(var n in t){var a=t[n];if(a&&"string"==typeof a){try{if("PONG"===a.substring(0,4)){i.pong();continue}}catch(e){R.debug("ws.onmessage-command check error: ",e)}r.handler.onMessage(a)}}},this.ws.onerror=function(e){R.debug("WSClient ws.onerror called: ",e),i&&i.stop(),c=!0,r.sb.isReconnectingOnError=!0,r.handler.onError(e)},this.ws.onclose=function(e){R.debug("WSClient ws.onclose called - e, explicitDisconnect: ",e,r.explicitDisconnect),i&&i.stop(),r.explicitDisconnect?r.handler.onClose(e):c||r.handler.onError(e),r.explicitDisconnect=!1}}},{key:"disconnect",value:function(e,t){R.debug("WSClient disconnect called [explicit]: ",e);var n=w.get(this.sb._iid).container.pinger;n&&n.stop(),this.explicitDisconnect=!0===e,this.ws&&(this.ws.onopen=function(){},this.ws.onmessage=function(){},this.ws.onclose=function(){t&&t()},this.ws.onerror=function(){},this.ws.close(),this.ws=null),this.explicitDisconnect?this.handler.onClose():this.handler.onError(),this.explicitDisconnect=!1}},{key:"send",value:function(e,t){1!==this.ws.readyState?t&&t(new I("Connection is not valid. Please reconnect.",I.WEBSOCKET_CONNECTION_CLOSED),null):(this.ws.send(e.encode()),t&&t(null,null))}},{key:"active",value:function(){this.lastActiveMillis=(new Date).getTime()}},{key:"getConnectionState",value:function(){try{return 1===this.ws.readyState?this.sb.ConnectionState.OPEN:0===this.ws.readyState?this.sb.ConnectionState.CONNECTING:this.sb.ConnectionState.CLOSED}catch(e){return this.sb.ConnectionState.CLOSED}}}]),e}();B.ConnectionHandler=function e(){s(this,e),this.onReady=function(){},this.onOpen=function(){},this.onClose=function(){},this.onMessage=function(){},this.onError=function(){}},Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:Math.pow(2,53)-1});var z=function(){function e(t){s(this,e),this.sb=t,this.cls=P.get(this.sb._iid),this.ws=new B(this.sb),this.reconnectParams={interval:3,retryCount:3,multiplier:2,maxInterval:24},this.reconnectCount=0,this.reconnectDelay=0}return u(e,[{key:"connect",value:function(e,t){var n=this,r=w.get(this.sb._iid).container,a=r.auth,i=r.apiClient,s=r.commandHandler,o=this.cls.GroupChannel,u=new B.ConnectionHandler;this.ws=new B(this.sb,u),u.onMessage=function(e){s.onRawCommandReceived(e)},this.sb.loginHandler=function(e,t){if(n.sb.connecting=!1,e)n.disconnect({clearSession:!0,err:e},null);else{clearInterval(n.sb.globalTimer);var r=function(){if(o.cachedChannels)for(var e in o.cachedChannels){var t=o.cachedChannels[e];if(t.invalidateTypingStatus())for(var r in n.sb.channelHandlers)n.sb.channelHandlers[r].onTypingStatusUpdated(t)}};r(),n.sb.globalTimer=setInterval(function(){return r()},1e3),n.flushConnectionCallbacks(null,t),n.sb.connecting=!1,n.sb.reconnecting=!1,n.sb.ConnectionManager.processAllReadyHandler(null)}},u.onOpen=function(){n.sb.loginTimer=setTimeout(function(){n.sb.loginTimer=null,n.sb.onLoginTimerCancel=null,n.flushConnectionCallbacks(new I("Connection timeout.",I.LOGIN_TIMEOUT),null),n.sb.disconnect(null)},O.COMMAND_ACK_TIMEOUT),n.sb.onLoginTimerCancel=function(){n.flushConnectionCallbacks(new I("Connection has been canceled.",I.REQUEST_FAILED),null)},n.sb.connecting=!1},u.onError=function(t){R.debug("WebSocketClient.ConnectionHandler.onError",t),a.sessionKey?(n.sb.isReconnectingOnError=!0,n.sb.ConnectionManager.errorAllReadyHandler(),n.reconnect(e,!0)):n.flushConnectionCallbacks(new I("Websocket connection failed.",I.WEBSOCKET_CONNECTION_FAILED),null),n.sb.connecting=!1},u.onClose=function(){R.debug("WebSocketClient.ConnectionHandler.onClose"),n.sb.connecting=!1},i.checkRouting(function(r,a){if(r)return n.sb.connecting=!1,void n.flushConnectionCallbacks(new I("Connection routing failed.",I.REQUEST_FAILED),null);i.dummyCall(function(e){e&&R.log("API dummy call failed",e)}),n.ws.connect(e,t,a.wsHost)})}},{key:"reconnect",value:function(e,t){var n=this,r=!(1<arguments.length&&void 0!==t)||t,a=w.get(this.sb._iid).container,i=a.auth,s=a.apiClient,o=a.commandHandler,u=this.cls.OpenChannel;if(this.sb.reconnecting=!0,this.sb.reconnectTimer)R.debug("still reconnecting");else{if(this.reconnectCount+=1,this.reconnectCount<=1){if(r)for(var l in this.sb.connectionHandlers)this.sb.connectionHandlers[l].onReconnectStarted();this.reconnectDelay=0}else this.reconnectDelay=Math.min(1e3*this.reconnectParams.interval*Math.pow(this.reconnectParams.multiplier,this.reconnectCount-2),0<this.reconnectParams.maxInterval?1e3*this.reconnectParams.maxInterval:Number.MAX_SAFE_INTEGER);if(!e||!i.sessionKey||0<this.reconnectParams.retryCount&&this.reconnectCount>this.reconnectParams.retryCount){for(var c in this.disconnect({clearSession:!1,err:new I("Websocket connection failed.",I.WEBSOCKET_CONNECTION_FAILED)},null),this.reconnectCount=0,this.sb.connectionHandlers)this.sb.connectionHandlers[c].onReconnectFailed();return this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1,void this.sb.ConnectionManager.errorAllReadyHandler()}this.sb.onReconnectTimerCancel=function(){n.reconnectCount=0},this.sb.reconnectTimer=setTimeout(function(){n.sb.reconnectTimer=null,n.sb.onReconnectTimerCancel=null,n.ws&&n.ws.disconnect(!0);var t=new B.ConnectionHandler;n.ws=new B(n.sb,t),n.sb.loginHandler=function(){for(var e in n.reconnectCount=0,n.sb.connecting=!1,n.sb.reconnecting=!1,n.sb.isReconnectingOnError=!1,n.sb.connectionHandlers)n.sb.connectionHandlers[e].onReconnectSucceeded();if(n.sb.ConnectionManager.processAllReadyHandler(null),n.sb.isReconnectingOnError)for(var t in n.sb.ConnectionManager.networkHandlers)n.sb.ConnectionManager.networkHandlers[t].onReconnected();Object.keys(u.enteredChannels).forEach(function(e){u.enteredChannels[e].enter(function(t,r){if(t){var a=n.cls.FileMessageQueue;delete u.enteredChannels[e],a.delete(e)}})})},t.onOpen=function(){R.debug("reconnect onOpen"),n.sb.loginTimer=setTimeout(function(){R.debug("reconnect loginTimer timeout"),n.sb.loginTimer=null,n.reconnect(e,!0)},O.COMMAND_ACK_TIMEOUT),n.sb.onLoginTimerCancel=null,n.sb.reconnecting=!1},t.onMessage=function(e){o.onRawCommandReceived(e)},t.onError=function(t){R.debug("reconnect onError",t),n.sb.isReconnectingOnError=!0,n.sb.ConnectionManager.errorAllReadyHandler(),n.reconnect(e,!0)},t.onClose=function(){R.debug("reconnect onClose"),n.sb.reconnecting=!1},s.checkRouting(function(t,r){t?n.reconnect(e,!0):(n.sb.getCurrentApiHost()!==r.apiHost&&s.get("/",null,function(){}),n.ws.connect(e,null,r.wsHost))})},this.reconnectDelay)}}},{key:"disconnect",value:function(e,t){var n=w.get(this.sb._iid),r=n.container.ackStateMap,a=this.cls,i=a.GroupChannel,s=a.OpenChannel,o=e.clearSession,u=e.err;if(this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.onLoginTimerCancel&&(this.sb.onLoginTimerCancel(),this.sb.onLoginTimerCancel=null),this.sb.loginTimer=null),this.sb.reconnectTimer&&(clearTimeout(this.sb.reconnectTimer),this.sb.onReconnectTimerCancel&&(this.sb.onReconnectTimerCancel(),this.sb.onReconnectTimerCancel=null),this.sb.reconnectTimer=null),this.ws&&(this.reconnectCount=0,this.ws.disconnect(!0),this.ws=null),o){for(var l in s.clearEnteredChannels(),s.clearCache(),i.clearCache(),this.sb.globalTimer&&(clearInterval(this.sb.globalTimer),this.sb.globalTimer=null),r)clearTimeout(r[l].timer);this.sb.currentUser=null,n.set("ackStateMap",{}),n.set("subscribedUnreadMessageCount",{all:0,custom_types:{},ts:0}),n.set("auth",new M)}u&&(this.flushConnectionCallbacks(u,null),this.sb.connecting=!1,this.sb.reconnecting=!1,this.sb.isReconnectingOnError=!1),t&&t(null,null)}},{key:"flushConnectionCallbacks",value:function(e,t){var n=this.sb.connectionCallbacks;this.sb.connectionCallbacks=[],n.forEach(function(n){return n(e,t)})}}]),e}(),q=function(){function e(t){var n=t.type,r=t.nullable,a=void 0!==r&&r,i=t.optional,o=void 0!==i&&i,u=t.optionalIf,l=void 0===u?null:u,c=t.ignoreIf,d=void 0===c?null:c,f=t.defaultValue,h=void 0===f?null:f,p=t.constraint,y=void 0===p?null:p;s(this,e),this.type=n,this.nullable=a,this.optional=o,this.optionalIf=l,this.ignoreIf=d,this.defaultValue=h,this.constraint=y}return u(e,[{key:"isMatchingType",value:function(e){function t(t,n){return"string"==typeof n?i(t)===n||"array"===n&&Array.isArray(t)||"file"===n&&x.isFile(t)||"null"===n&&null===t||"date"===n&&t instanceof Date:"function"==typeof n?t instanceof n:"object"===i(n)&&-1<Object.keys(n).map(function(e){return n[e]}).indexOf(e)}return t(e,this.type)||Array.isArray(this.type)&&this.type.some(function(n){return t(e,n)})||this.nullable&&null===e}}],[{key:"parse",value:function(t,n){for(t=e.toArray(t);void 0===t[t.length-1];)t.pop();var r=!1,a=null;"callback"===n[n.length-1].type&&("function"==typeof t[t.length-1]&&(a=t.pop()),n.pop(),r=!0);var i=[],s=null,o=0;for(var u in n){var l=n[u];"function"==typeof l.ignoreIf&&l.ignoreIf(t)?i.push(l.hasOwnProperty("defaultValue")?l.defaultValue:null):l.isMatchingType(t[o])?(l.nullable&&null===t[o]||!l.constraint||l.constraint(t[o])||(s=e.error),i.push(t[o]),o++):l.optional||"function"==typeof l.optionalIf&&l.optionalIf(t)?i.push(l.hasOwnProperty("defaultValue")?l.defaultValue:null):(s=e.error,i.push(t[o]),o++)}return r&&a&&i.push(a),t.length!==o&&(s=e.error),[s].concat(i)}},{key:"toArray",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}},{key:"error",get:function(){return new I("Invalid parameter.",I.INVALID_PARAMETER)}}]),e}(),W=function(){function e(t){s(this,e),this.sb=t,this.authCount=0,this.readyHandlers=[],this.networkHandlers={},this.authenticateTimer=1e4,this.authInfoRequester=null}return u(e,[{key:"addReadyHandler",value:function(e){e&&"function"==typeof e&&this.readyHandlers.push(e)}},{key:"ready",value:function(e,t){var n=!(1<arguments.length&&void 0!==t)||t,r=w.get(this.sb._iid).container,a=r.auth,i=r.isInBackground;n&&a.hasSession()?e&&(this.sb.currentUser?e(null,this.sb.currentUser):(this.addReadyHandler(e),this.errorAllReadyHandler()),this.sb.getConnectionState()!==this.sb.ConnectionState.CLOSED||i||this.sb.reconnect()):(this.addReadyHandler(e),this.sb.isReconnectingOnError?this.errorAllReadyHandler():this.sb.getConnectionState()===this.sb.ConnectionState.OPEN?this.processAllReadyHandler(null):this.sb.getConnectionState()===this.sb.ConnectionState.CONNECTING||this.errorAllReadyHandler())}},{key:"processAllReadyHandler",value:function(e){if(0<this.readyHandlers.length){var t=this.sb.currentUser,n=this.readyHandlers;this.readyHandlers=[],n.forEach(function(n){n&&"function"==typeof n&&n(e,t)})}}},{key:"errorAllReadyHandler",value:function(){this.processAllReadyHandler(new I("Connection should be made first.",I.CONNECTION_REQUIRED))}},{key:"NetworkHandler",value:function(){this.onReconnected=function(){}}},{key:"addNetworkHandler",value:function(e,t){this.networkHandlers[e]=t}},{key:"removeNetworkHandler",value:function(e){delete this.networkHandlers[e]}},{key:"removeAllNetworkHandler",value:function(){this.networkHandlers={}}},{key:"authenticate",value:function(e){var t=this;if(this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnecting)this.sb.connecting=!1,e(null,this.sb.currentUser);else if(this.authInfoRequester&&"function"==typeof this.authInfoRequester){this.sb.connecting=!0,this.authCount++;var n=setTimeout(function(){n=null,t.authCount--,0===t.authCount&&0===t.sb.connectionCallbacks.length&&(t.sb.connecting=!1),t.errorAllReadyHandler(),e(new I("Connection should be made first.",I.CONNECTION_REQUIRED),null)},this.authenticateTimer);this.authInfoRequester(function(r){if(n){clearTimeout(n),n=null,t.authCount--;var a=function(n){t.sb.connecting=!1,e(n,null)};r&&r.hasOwnProperty("userId")?r.accessToken?r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.accessToken,r.apiHost,r.wsHost,a):t.sb.connect(r.userId,r.accessToken,a):r.apiHost&&r.wsHost?t.sb.connect(r.userId,r.apiHost,r.wsHost,a):t.sb.connect(r.userId,a):e(q.error,null)}})}else e(q.error,null)}}]),e}(),Y=function(){function e(t){s(this,e),this.sb=t}return u(e,[{key:"onlineWorker",value:function(){try{if("undefined"!=typeof navigator&&navigator.onLine){var e=w.get(this.sb._iid).container.auth;this.sb.reconnecting||this.sb.connecting||!e.sessionKey||this.sb.getConnectionState()===this.sb.ConnectionState.OPEN||this.sb.reconnect()}}catch(e){R.debug("There is no window.addEventListener.ononline or navigator.onLine")}}},{key:"offlineWorker",value:function(){try{if("undefined"!=typeof navigator&&!navigator.onLine){var e=w.get(this.sb._iid).container,t=e.auth,n=e.pinger;this.sb.reconnecting||this.sb.connecting||!t.sessionKey||(n&&n.stop(),this.sb.reconnect())}}catch(e){R.debug("There is no window.addEventListener.ononline or navigator.onLine")}}},{key:"start",value:function(){try{"undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&"boolean"==typeof navigator.onLine&&(window.addEventListener("online",this.onlineWorker),window.addEventListener("offline",this.offlineWorker))}catch(e){R.debug("There is no window.addEventListener.ononline or navigator.onLine")}}},{key:"stop",value:function(){try{window.removeEventListener("online",this.onlineWorker,!1),window.removeEventListener("offline",this.offlineWorker,!1)}catch(e){R.debug("There is no window.addEventListener.ononline or navigator.onLine")}}}]),e}(),V=(new Date).getTime(),Q=function(){function e(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;switch(s(this,e),this.command=t,this.requestId=r,arguments.length){case 1:if(!t||t.length<=4)this.command="NOOP",this.payload="{}";else if(this.decode(t),this.isRequestIdCommand){var a=this.getJsonElement();a&&(this.requestId=a.req_id||"")}break;case 2:case 3:!this.requestId&&this.isRequestIdCommand&&(this.requestId=e.generateRequestId()),n.req_id=this.requestId||"",this.payload=JSON.stringify(n)}}return u(e,[{key:"encode",value:function(){return this.command+this.payload+"\n"}},{key:"decode",value:function(e){e=e.trim(),this.command=e.substring(0,4),this.payload=e.substring(4)}},{key:"getJsonElement",value:function(){return JSON.parse(this.payload)}},{key:"isRequestIdCommand",get:function(){return this.isAckRequired||"EROR"===this.command}},{key:"isAckRequired",get:function(){return"MESG"===this.command||"FILE"===this.command||"ENTR"===this.command||"EXIT"===this.command||"READ"===this.command||"MEDI"===this.command||"FEDI"===this.command}}],[{key:"bPing",value:function(){return new this("PING",{id:(new Date).getTime(),active:1})}},{key:"bMessage",value:function(e){var t=e.channelUrl,n=e.message,r=e.data,a=e.customType,i=e.metaArrays,s=e.mentionType,o=e.mentionedUserIds,u=e.translationTargetLanguages,l=e.pushNotificationDeliveryOption,c=e.requestId,d=void 0===c?null:c,f=e.silent,h=void 0!==f&&f,p=e.rootMessageId,y=void 0===p?null:p,g=e.parentMessageId,m=void 0===g?null:g,_=P.get(this._iid),v=_.UserMessageParams,E=_.BaseMessageParams,b={};return b.channel_url=t,b.message=n,b.data=r,i&&0<i.length&&(b.metaarray=i.map(function(e){return e.encode()})),s&&(b.mention_type=s),b.mentioned_user_ids=[],s===E.MentionType.CHANNEL?b.mentioned_user_ids=[]:Array.isArray(o)&&0<o.length&&(b.mentioned_user_ids=o),a&&(b.custom_type=a),u&&0<u.length&&(b.target_langs=u),l&&l!==v.PushNotificationDeliveryOption.DEFAULT&&(b.push_option=l),h&&(b.silent=h),y&&(b.root_message_id=y),m&&(b.parent_message_id=m),new this("MESG",b,d)}},{key:"bFile",value:function(e){var t=e.channelUrl,n=e.url,r=e.name,a=e.type,i=e.size,s=e.data,o=e.customType,u=e.thumbnailSizes,l=e.requireAuth,c=e.metaArrays,d=e.mentionType,f=e.mentionedUserIds,h=e.pushNotificationDeliveryOption,p=e.requestId,y=void 0===p?null:p,g=e.silent,m=void 0!==g&&g,_=e.rootMessageId,v=void 0===_?null:_,E=e.parentMessageId,b=void 0===E?null:E,C=P.get(this._iid),S=C.BaseMessageParams,O=C.FileMessageParams,A={};return A.channel_url=t,A.url=n,A.name=r||"",A.type=a||"",A.size=i||0,A.custom=s,o&&(A.custom_type=o),u&&(A.thumbnails=u),l&&(A.require_auth=l),c&&0<c.length&&(A.metaarray=c.map(function(e){return e.encode()})),d&&(A.mention_type=d),A.mentioned_user_ids=[],d===S.MentionType.CHANNEL?A.mentioned_user_ids=[]:Array.isArray(f)&&0<f.length&&(A.mentioned_user_ids=f),h&&h!==O.PushNotificationDeliveryOption.DEFAULT&&(A.push_option=h),m&&(A.silent=m),v&&(A.root_message_id=v),b&&(A.parent_message_id=b),new this("FILE",A,y)}},{key:"bUpdateUserMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.message,a=void 0===r?null:r,i=e.data,s=void 0===i?null:i,o=e.customType,u=void 0===o?null:o,l=e.mentionType,c=void 0===l?null:l,d=e.mentionedUserIds,f=void 0===d?null:d,h=e.metaArrayParams,p=void 0===h?null:h,y=P.get(this._iid).BaseMessageParams,g={};return g.channel_url=t,g.msg_id=n,null!=a&&void 0!==a&&(g.message=a),null!=s&&void 0!==s&&(g.data=s),null!=u&&void 0!==u&&(g.custom_type=u),c&&(g.mention_type=c),c===y.MentionType.CHANNEL?g.mentioned_user_ids=[]:Array.isArray(f)&&0<f.length&&(g.mentioned_user_ids=f),p&&(g.metaarray=p),new this("MEDI",g)}},{key:"bUpdateFileMessage",value:function(e){var t=e.channelUrl,n=e.messageId,r=e.data,a=void 0===r?null:r,i=e.customType,s=void 0===i?null:i,o=e.mentionType,u=void 0===o?null:o,l=e.mentionedUserIds,c=void 0===l?null:l,d=e.metaArrayParams,f=void 0===d?null:d,h=P.get(this._iid).BaseMessageParams,p={};return p.channel_url=t,p.msg_id=n,null!=a&&void 0!==a&&(p.data=a),null!=s&&void 0!==s&&(p.custom_type=s),u&&(p.mention_type=u),u===h.MentionType.CHANNEL?p.mentioned_user_ids=[]:Array.isArray(c)&&0<c.length&&(p.mentioned_user_ids=c),f&&(p.metaarray=f),new this("FEDI",p)}},{key:"bRead",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("READ",n)}},{key:"bMessageAck",value:function(e){var t=e.channelUrl,n=e.messageId,r={};return r.channel_url=t,r.msg_id=n,new this("MACK",r)}},{key:"bTypeStart",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPST",r)}},{key:"bTypeEnd",value:function(e){var t=e.channelUrl,n=e.time,r={};return r.channel_url=t,r.time=n,new this("TPEN",r)}},{key:"bEnter",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("ENTR",n)}},{key:"bExit",value:function(e){var t=e.channelUrl,n={};return n.channel_url=t,new this("EXIT",n)}},{key:"generateRequestId",value:function(){return String(++V)}}]),e}(),K=new WeakMap,J=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,e);var n=[];if(t.hasOwnProperty("premium_feature_list")&&Array.isArray(t.premium_feature_list))try{var r=t.premium_feature_list;n.push.apply(n,b(r))}catch(t){}K.set(this,{emojiHash:t.hasOwnProperty("emoji_hash")?t.emoji_hash:"",uploadSizeLimit:t.hasOwnProperty("file_upload_size_limit")?1048576*t.file_upload_size_limit:Number.MAX_VALUE,useReaction:t.hasOwnProperty("use_reaction")&&t.use_reaction,premiumFeatureList:n})}return u(e,[{key:"emojiHash",get:function(){return K.get(this).emojiHash}},{key:"uploadSizeLimit",get:function(){return K.get(this).uploadSizeLimit}},{key:"premiumFeatureList",get:function(){return K.get(this).premiumFeatureList}},{key:"isUsingReaction",get:function(){return K.get(this).useReaction}}]),e}(),Z=function(){function e(){s(this,e),this.messageId=null,this.userId=null,this.key=null,this.operation="",this.updatedAt=null}return u(e,null,[{key:"createFromJson",value:function(e){var t=e.msg_id,n=e.user_id,r=e.operation,a=e.reaction,i=e.updated_at;if(("string"==typeof t||"number"==typeof t)&&t&&"string"==typeof n&&"string"==typeof r&&0<=["add","delete"].indexOf(r.toLowerCase())&&"string"==typeof a&&a&&"number"==typeof i){var s=new this;return s.messageId=parseInt(t),s.userId=n,s.key=a,s.operation=r.toLowerCase(),s.updatedAt=i,s}return null}}]),e}(),X=function(){function e(){s(this,e)}return u(e,null,[{key:"serialize",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:null,r=JSON.parse(JSON.stringify(e));return n&&n(r),function e(t){return Object.keys(t).forEach(function(n){t[n]&&"object"===i(t[n])&&e(t[n])}),Object.freeze(t)}(r)}},{key:"deserialize",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:null,r=JSON.parse(JSON.stringify(e));return n&&n(r),r}}]),e}(),$=0,ee=1,te=2;function ne(e,t,n){return void 0===n?new Promise(function(e,n){t(function(t,r){return t?n(t):e(r)})}):t(function(t,r){n&&(w.get(e).container.isErrorFirstInCallback?n(t,r):n(r,t))})}"undefined"==typeof Promise&&(Promise=function(){function e(t){var n=this;if(s(this,e),this.state=$,this._value=null,this._reason=null,"function"!=typeof t)throw"Promise resolver ".concat(t," is not a function");t(function(e){n.state===$&&(n.state=ee,n._value=e)},function(e){n.state===$&&(n.state=te,n._reason=e)})}return u(e,[{key:"then",value:function(t,n){var r=this,a=this;switch(this.state){case $:setTimeout(function(){return r.then(t,n)},100);break;case ee:t&&"function"==typeof t&&(a=t(this._value));break;case te:n&&"function"==typeof n&&(a=n(this._reason))}return a instanceof e?a:this}},{key:"catch",value:function(t){var n=this,r=this;switch(this.state){case $:setTimeout(function(){return n.catch(t)},100);break;case ee:break;case te:r=t(this._reason)}return r instanceof e?r:this}},{key:"finally",value:function(t){var n=this,r=this;switch(this.state){case $:setTimeout(function(){return n.finally(t)},100);break;case ee:case te:r=t()}return r instanceof e?r:this}},{key:"length",get:function(){return 1}}],[{key:"all",value:function(t){return new e(function(n,r){if(Array.isArray(t)||"string"==typeof t)if(0<t.length){var a=[];for(var s in t)t[s]instanceof e?a.push(t[s]):a.push(e.resolve(t[s]));var o=new Array(a.length).fill(null),u=a.length,l=function(e,t,a){t?r(t):(u--,o[e]=a,u<=0&&n(o))};a.forEach(function(e,t){e.then(function(e){l(t,null,e)}).catch(function(e){l(t,e,null)})})}else n([]);else r(new Error("Uncaught (in promise) TypeError: ".concat(i(t)," ").concat(t," is not iterable")))})}},{key:"resolve",value:function(t){return new e(function(e){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}}]),e}());var re={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},ae=new WeakMap,ie=function(){function e(t){s(this,e),this.messageId=0,this.messageType=e.MESSAGE_TYPE_BASE,this.channelUrl="",this.data=null,this.customType=null,this.silent=!1,this.createdAt=0,this.updatedAt=0,this.channelType=null,this.metaArrays=[],this.reactions=[],this.mentionType=null,this.mentionedUsers=[],ae.set(this,0),this.parentMessageId=0,this.parentMessageText=null,this.threadInfo=null,t&&this.__update(t)}return u(e,[{key:"serialize",value:function(){return X.serialize(this,function(e){e.hasOwnProperty("_sender")&&(e.sender=e._sender,delete e._sender)})}},{key:"isIdentical",value:function(e){return!("object"!==i(e)||!e.hasOwnProperty("messageId"))&&(0!==this.messageId&&0!==e.messageId?this.messageId===e.messageId:this.reqId===e.reqId)}},{key:"isEqual",value:function(e){return x.deepEqual(this,e)}},{key:"isOpenChannel",value:function(){var e=P.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=P.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isUserMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_USER}},{key:"isAdminMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_ADMIN}},{key:"isFileMessage",value:function(){return this.messageType===e.MESSAGE_TYPE_FILE}},{key:"__update",value:function(e){var t=this,n=P.get(this._iid),r=n.User,a=n.BaseChannel,i=n.BaseMessageParams,s=n.Reaction,o=n.MessageMetaArray,u=n.ThreadInfo;e.hasOwnProperty("msg_id")&&(this.messageId=parseInt(e.msg_id)),e.hasOwnProperty("message_id")&&(this.messageId=parseInt(e.message_id)),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?String(e.custom_type):"",this.silent=!!e.hasOwnProperty("silent")&&e.silent,this.createdAt=e.hasOwnProperty("ts")?parseInt(e.ts):0,e.hasOwnProperty("created_at")&&(this.createdAt=parseInt(e.created_at)),this.updatedAt=e.hasOwnProperty("updated_at")?parseInt(e.updated_at):0,this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):a.CHANNEL_TYPE_GROUP;var l=e.hasOwnProperty("metaarray")?e.metaarray:{},c=e.hasOwnProperty("metaarray_key_order")?e.metaarray_key_order:Object.keys(l).sort(function(e,t){return e.localeCompare(t)});this.metaArrays=[];for(var d=0;d<c.length;d++){var f=c[d];this.metaArrays.push(new o(f,l[f]||[]))}if(e.hasOwnProperty("sorted_metaarray")){var h=e.sorted_metaarray;Array.isArray(h)&&(this.metaArrays=h.map(function(e){return new o(e.key,e.value)}))}if(this.reactions=[],e.hasOwnProperty("reactions")&&Array.isArray(e.reactions))for(var p in e.reactions){var y=s.createFromJson(e.reactions[p]);y&&this.reactions.push(y)}this.mentionType=e.hasOwnProperty("mention_type")?e.mention_type:i.MentionType.USERS,this.mentionedUsers=[],e.hasOwnProperty("mentioned_users")&&e.mentioned_users.forEach(function(e){var n=new r(e);t.mentionedUsers.push(n)}),e.hasOwnProperty("root_message_id")&&ae.set(this,parseInt(e.root_message_id)),e.hasOwnProperty("parent_message_id")&&(this.parentMessageId=parseInt(e.parent_message_id)),e.hasOwnProperty("parent_message_text")&&(this.parentMessageText=e.parent_message_text),this.threadInfo=new u(e.thread_info)}},{key:"getMetaArraysByKeys",value:function(e){return Array.isArray(e)?this.metaArrays.filter(function(t){return-1<e.indexOf(t.key)}):[]}},{key:"getMetaArrayByKeys",value:function(e){var t={};return this.getMetaArraysByKeys(e).forEach(function(e){t[e.key]=e.value}),t}},{key:"applyReactionEvent",value:function(e){var t,n=this,r=P.get(this._iid).Reaction,a=E(q.parse(arguments,[new q({type:Z,constraint:function(e){return parseInt(e.messageId)===parseInt(n.messageId)}})]),2);if(t=a[0],e=a[1],!t){var i=!1;for(var s in this.reactions)if(this.reactions[s].key===e.key){this.reactions[s]._applyEvent(e),this.reactions[s].isEmpty&&this.reactions.splice(s,1),i=!0;break}i||"add"!==e.operation||this.reactions.push(new r(e.key,[e.userId],e.updatedAt))}}},{key:"_getThreadedMessageList",value:function(e,t,n,r){var a,i=this,s=P.get(this._iid).ThreadedMessageListParams,o=E(q.parse(arguments,[new q({type:"number"}),new q({type:"string",constraint:function(e){return Object.values(re).includes(e)}}),new q({type:s,constraint:function(e){return e._validate()}}),new q({type:"callback"})]),5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ne(this._iid,function(r){if(a)r(a,null);else{var s=P.get(i._iid),o=s.GroupChannel,u=s.OpenChannel;i.isGroupChannel()?o.getChannel(i.channelUrl,O.INTERNAL_CALL,function(a,s){if(SendBird.getInstance(i._iid).getErrorFirstCallback()){var o=[a,s];s=o[0],a=o[1]}s?r(s,null):w.get(i._iid).container.apiClient.getMessageList(c(c({channel:a,token:e,tokenType:t},n),{},{shouldReverse:n.reverse,rootMessageId:i.messageId,includeReplies:!0,includeThreadInfo:!0}),function(e,t){if(e)r(e,null);else{var n=P.get(i._iid).BaseChannel,a=t.messages.map(function(e){return n.buildMessage(e,i)}).filter(function(e){return null!==e}),s=a.filter(function(e){return e.messageId===i.messageId})[0],o=a.filter(function(e){return e.parentMessageId===i.messageId});r(null,{parentMessage:s,threadedReplies:o})}})}):i.isOpenChannel()&&u.getChannel(i.channelUrl,O.INTERNAL_CALL,function(a,s){if(SendBird.getInstance(i._iid).getErrorFirstCallback()){var o=[a,s];s=o[0],a=o[1]}s?r(s,null):w.get(i._iid).container.apiClient.getMessageList(c(c({channel:a,token:e,tokenType:t},n),{},{shouldReverse:n.reverse,rootMessageId:i.messageId,includeReplies:!0,includeThreadInfo:!0}),function(e,t){if(e)r(e,null);else{var n=P.get(i._iid).BaseChannel,a=t.messages.map(function(e){return n.buildMessage(e,i)}).filter(function(e){return null!==e}),s=a.filter(function(e){return e.messageId===i.messageId})[0],o=a.filter(function(e){return e.parentMessageId===i.messageId});r(null,{parentMessage:s,threadedReplies:o})}})})}},r)}},{key:"getThreadedMessagesByTimestamp",value:function(e,t,n){return this._getThreadedMessageList(e,re.TIMESTAMP,t,n)}},{key:"applyThreadInfoUpdateEvent",value:function(e){var t,n=P.get(this._iid),r=n.ThreadInfo,a=n.ThreadInfoUpdateEvent,i=ae.get(this),s=E(q.parse(arguments,[new q({type:a,constraint:function(e){return parseInt(e.targetMessageId)===parseInt(i)}})]),2);if(t=s[0],e=s[1],t)return!1;var o=e.threadInfo;return this.threadInfo=new r(o),!0}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach(function(t){e[t.key]=t.value}),e},set:function(e){if("object"===i(e)&&e){var t=P.get(this._iid).MessageMetaArray,n=[];for(var r in e)n.push(new t(r,e[r]));this.metaArrays=n}}}],[{key:"getMessage",value:function(e,t){var n,r=this,a=P.get(this._iid),i=a.BaseChannel,s=a.MessageRetrievalParams,o=E(q.parse(arguments,[new q({type:s,constraint:function(e){return e._validate()}}),new q({type:"callback"})]),3);return n=o[0],e=o[1],t=o[2],ne(this._iid,function(t){if(n)t(n,null);else{var a=P.get(r._iid),s=a.GroupChannel,o=a.OpenChannel;switch(e.channelType){case i.CHANNEL_TYPE_GROUP:s.getChannel(e.channelUrl,O.INTERNAL_CALL,function(n,a){if(SendBird.getInstance(r._iid).getErrorFirstCallback()){var s=[n,a];a=s[0],n=s[1]}a?t(a,null):w.get(r._iid).container.apiClient.getMessage(c({channel:n},e),function(e,r){if(e)t(e,null);else{var a=i.buildMessage(r,n);t(null,a)}})});break;case i.CHANNEL_TYPE_OPEN:o.getChannel(e.channelUrl,O.INTERNAL_CALL,function(n,a){if(SendBird.getInstance(r._iid).getErrorFirstCallback()){var s=[n,a];a=s[0],n=s[1]}a?t(a,null):w.get(r._iid).container.apiClient.getMessage(c({channel:n},e),function(e,r){if(e)t(e,null);else{var a=i.buildMessage(r,n);t(null,a)}})})}}},t)}},{key:"MESSAGE_TYPE_BASE",get:function(){return"base"}},{key:"MESSAGE_TYPE_ADMIN",get:function(){return"admin"}},{key:"MESSAGE_TYPE_USER",get:function(){return"user"}},{key:"MESSAGE_TYPE_FILE",get:function(){return"file"}},{key:"SendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}}]),e}(),se=function(){function e(t){s(this,e),this.nickname="",this.profileUrl="",this.userId="",this.connectionStatus="",this.lastSeenAt=null,this.metaData={},this.isActive=!0,this.friendDiscoveryKey=null,this.friendName=null,this._preferredLanguages=null,t&&this.__update(t)}return u(e,[{key:"__update",value:function(t){t.hasOwnProperty("guest_id")&&(this.userId=String(t.guest_id)),t.hasOwnProperty("user_id")&&(this.userId=String(t.user_id)),t.hasOwnProperty("name")&&(this.nickname=String(t.name)),t.hasOwnProperty("nickname")&&(this.nickname=String(t.nickname)),t.hasOwnProperty("image")&&(this.profileUrl=String(t.image)),t.hasOwnProperty("profile_url")&&(this.profileUrl=String(t.profile_url)),t.hasOwnProperty("is_online")&&t.is_online!==e.NON_AVAILABLE?this.connectionStatus=t.is_online?e.ONLINE:e.OFFLINE:this.connectionStatus=e.NON_AVAILABLE,t.hasOwnProperty("last_seen_at")?this.lastSeenAt=parseInt(t.last_seen_at):this.lastSeenAt=0,t.hasOwnProperty("metadata")?this.metaData=t.metadata:this.metaData={},t.hasOwnProperty("is_active")?this.isActive=void 0===t.is_active||t.is_active:this.isActive=!0,t.hasOwnProperty("friend_discovery_key")?this.friendDiscoveryKey=t.friend_discovery_key:this.friendDiscoveryKey=null,t.hasOwnProperty("friend_name")?this.friendName=t.friend_name:this.friendName=null,t.hasOwnProperty("preferred_languages")?this._preferredLanguages=t.preferred_languages||null:this._preferredLanguages=null}},{key:"_updateMetaData",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t,r=P.get(this._iid).GroupChannel;for(var a in e)n?delete this.metaData[a]:this.metaData[a]=e[a];for(var i in r.cachedChannels)if(r.cachedChannels.hasOwnProperty(i)){var s=r.cachedChannels[i];s.memberMap.hasOwnProperty(this.userId)&&(s.memberMap[this.userId].metaData=this.metaData)}}},{key:"serialize",value:function(){return X.serialize(this,function(e){e.hasOwnProperty("_preferredLanguages")&&(e.preferredLanguages=e._preferredLanguages,delete e._preferredLanguages)})}},{key:"getOriginalProfileUrl",value:function(){var e="";if((-1<(e=(e=-1<this.profileUrl.indexOf("://")?this.profileUrl.split("/")[2]:this.profileUrl.split("/")[0]).split("?")[0]).indexOf("sendbird.com")||-1<e.indexOf("intoz.com")||-1<e.indexOf("file-local"))&&-1<this.profileUrl.indexOf(e+"/profile_images/")){var t=this.profileUrl.replace("profile_images/","");return t===this.profileUrl?"":t}return""}},{key:"createMetaData",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return 0<Object.keys(e).length&&!Array.isArray(e)}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.createUserMetaData({metaData:e},function(e,n){e||r._updateMetaData(n),t(e,n)})},t)}},{key:"updateMetaData",value:function(e,t,n){var r,a=this,i=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"callback"})]),4);return r=i[0],e=i[1],t=i[2],n=i[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.updateUserMetaData({metaData:e,upsert:t},function(e,t){e||a._updateMetaData(t),n(e,t)})},n)}},{key:"deleteMetaData",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string",constraint:function(e){return 0<e.length}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){if(n)t(n,null);else{var a={};a[e]="",w.get(r._iid).container.apiClient.deleteUserMetaData({metaDataKey:e},function(e,n){e||r._updateMetaData(a,!0),t(e,n)})}},t)}},{key:"deleteAllMetaData",value:function(e){var t=this;return ne(this._iid,function(e){var n=t.metaData;w.get(t._iid).container.apiClient.deleteAllUserMetaData({},function(r,a){r||t._updateMetaData(n,!0),e(r,a)})},e)}},{key:"preferredLanguages",get:function(){return this._preferredLanguages}}],[{key:"objectify",value:function(e){var t=e.userId,n=void 0===t?null:t,r=e.nickname,a=void 0===r?"":r,i=e.profileUrl,s=void 0===i?"":i,o=e.connectionStatus,u=void 0===o?"":o,l=e.lastSeenAt,c=void 0===l?0:l,d=e.metaData,f=void 0===d?{}:d,h=e.isActive,p=void 0===h||h,y=e.friendDiscoveryKey,g=void 0===y?null:y,m=e.friendName,_=void 0===m?null:m,v=e.preferredLanguages;return{user_id:n,nickname:a,profile_url:s,is_online:u,last_seen_at:c,metadata:f,is_active:p,friend_discovery_key:g,friend_name:_,preferred_languages:void 0===v?null:v}}},{key:"build",value:function(e,t,n,r,a,i,s,o,u,l){return this.objectify({userId:e,nickname:t,profileUrl:n,connectionStatus:r,lastSeenAt:a,metaData:i,isActive:s,friendDiscoveryKey:o,friendName:u,preferredLanguages:l})}},{key:"buildFromSerializedData",value:function(e){var t=P.get(this._iid).User,n=X.deserialize(e);return new t(t.objectify(n))}},{key:"NON_AVAILABLE",get:function(){return"nonavailable"}},{key:"ONLINE",get:function(){return"online"}},{key:"OFFLINE",get:function(){return"offline"}}]),e}(),oe={TIMESTAMP:"timestamp",MESSAGE_ID:"messageId"},ue=function(){function e(t){s(this,e),this.url="",this.channelType=e.CHANNEL_TYPE_BASE,this.name="",this.coverUrl="",this.createdAt=0,this.data=null,this.customType=null,this.isFrozen=!1,this.isEphemeral=!1,t&&(this.__update(t),t.__wk&&(this.__wk=t.__wk))}return u(e,[{key:"__update",value:function(e){this.url=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.name=e.hasOwnProperty("name")?String(e.name):"",this.coverUrl=e.hasOwnProperty("cover_url")?String(e.cover_url):"",this.createdAt=e.hasOwnProperty("created_at")?1e3*e.created_at:0,this.data=e.hasOwnProperty("data")?String(e.data):"",this.customType=e.hasOwnProperty("custom_type")?e.custom_type:"",this.isFrozen=!!e.hasOwnProperty("freeze")&&e.freeze,this.isEphemeral=!!e.hasOwnProperty("is_ephemeral")&&e.is_ephemeral}},{key:"isGroupChannel",value:function(){var e=P.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){var e=P.get(this._iid).BaseChannel;return this.channelType===e.CHANNEL_TYPE_OPEN}},{key:"createOperatorListQuery",value:function(){return new(P.get(this._iid).OperatorListQuery)(this)}},{key:"createMessageListQuery",value:function(){return new(P.get(this._iid).MessageListQuery)(this)}},{key:"createPreviousMessageListQuery",value:function(){return new(P.get(this._iid).PreviousMessageListQuery)(this)}},{key:"serialize",value:function(){return X.serialize(this,function(e){if(null!==e.lastMessage&&"object"===i(e.lastMessage)){var t=e.lastMessage;t.hasOwnProperty("_sender")&&(t.sender=t._sender,delete t._sender,e.lastMessage=t)}e.hasOwnProperty("_messageOffsetTimestamp")&&(e.messageOffsetTimestamp=e._messageOffsetTimestamp,delete e._messageOffsetTimestamp)})}},{key:"getMessageChangeLogsByTimestamp",value:function(e,t,n,r){var a,i=this,s=E(q.parse(arguments,[new q({type:"number",constraint:function(e){return 0<=e}}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"callback"})]),5);return a=s[0],e=s[1],t=s[2],n=s[3],r=s[4],ne(this._iid,function(r){a?r(a,null):w.get(i._iid).container.apiClient.getMessageChangeLogs({channelUrl:i.url,ts:e,token:null,isOpenChannel:i.isOpenChannel(),includeMetaArray:t,includeReaction:n},function(e,t){var n=null;if(!e){var a=P.get(i._iid).BaseChannel;n={updatedMessages:t.updated.map(function(e){return a.buildMessage(e,i)}),deletedMessageIds:t.deleted.map(function(e){return e.message_id}),hasMore:t.has_more,token:t.next}}r(e,n)})},r)}},{key:"getMessageChangeLogsByToken",value:function(e,t,n,r){var a,i=this,s=E(q.parse(arguments,[new q({type:"string",nullable:!0}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"callback"})]),5);return a=s[0],e=s[1],t=s[2],n=s[3],r=s[4],ne(this._iid,function(r){a?r(a,null):w.get(i._iid).container.apiClient.getMessageChangeLogs({channelUrl:i.url,ts:null,token:e,isOpenChannel:i.isOpenChannel(),includeMetaArray:t,includeReaction:n},function(e,t){var n=null;if(!e){var a=P.get(i._iid).BaseChannel;n={updatedMessages:t.updated.map(function(e){return a.buildMessage(e,i)}),deletedMessageIds:t.deleted.map(function(e){return e.message_id}),hasMore:t.has_more,token:t.next}}r(e,n)})},r)}},{key:"getMessageChangeLogsSinceToken",value:function(e,t,n){var r,a=this,i=P.get(this._iid),s=i.BaseChannel,o=i.MessageChangeLogsParams,u=E(q.parse(arguments,[new q({type:"string",nullable:!0}),new q({type:o}),new q({type:"callback"})]),4);return r=u[0],e=u[1],t=u[2],n=u[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.getMessageChangeLogs(c({channelUrl:a.url,ts:null,token:e,isOpenChannel:a.isOpenChannel()},t),function(e,t){var r=null;e||(r={updatedMessages:t.updated.map(function(e){return s.buildMessage(e,a)}),deletedMessageIds:t.deleted.map(function(e){return e.message_id}),hasMore:t.has_more,token:t.next}),n(e,r)})},n)}},{key:"getMessageChangeLogsSinceTimestamp",value:function(e,t,n){var r,a=this,i=P.get(this._iid),s=i.BaseChannel,o=i.MessageChangeLogsParams,u=E(q.parse(arguments,[new q({type:"number",constraint:function(e){return 0<=e}}),new q({type:o}),new q({type:"callback"})]),4);return r=u[0],e=u[1],t=u[2],n=u[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.getMessageChangeLogs(c({channelUrl:a.url,timestamp:e,token:null,isOpenChannel:a.isOpenChannel()},t),function(e,t){var r=null;e||(r={updatedMessages:t.updated.map(function(e){return s.buildMessage(e,a)}),deletedMessageIds:t.deleted.map(function(e){return e.message_id}),hasMore:t.has_more,token:t.next}),n(e,r)})},n)}},{key:"getMyMutedInfo",value:function(e){var t=this;return ne(this._iid,function(e){var n=At.getInstance(t._iid);w.get(t._iid).container.apiClient.getMyMutedInfo({channelUrl:t.url,userId:n.currentUser?n.currentUser.userId:null,isGroupChannel:t.isGroupChannel()},function(t,n){var r=null;t||(r={isMuted:n.is_muted,startAt:n.start_at,endAt:n.end_at,remainingDuration:n.remaining_duration,description:n.description}),e(t,r)})},e)}},{key:"_parseMessageListParams",value:function(e){for(var t=new(P.get(this._iid).MessageListParams),n=null,r=!1,a=0,i=0,s=!1,o="",u="",l=null,c=!1,d=!1,f=null,h=arguments.length,p=new Array(1<h?h-1:0),y=1;y<h;y++)p[y-1]=arguments[y];switch(e){case"prev":var g=E(q.parse(p,[new q({type:"number"}),new q({type:"boolean"}),new q({type:"number"}),new q({type:"boolean"}),new q({type:"string"}),new q({type:"string"}),new q({type:"array",optional:!0}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"callback"})]),11);n=g[0],g[1],r=g[2],a=g[3],s=g[4],o=g[5],u=g[6],l=g[7],c=g[8],d=g[9],f=g[10];break;case"next":var m=E(q.parse(p,[new q({type:"number"}),new q({type:"boolean"}),new q({type:"number"}),new q({type:"boolean"}),new q({type:"string"}),new q({type:"string"}),new q({type:"array",optional:!0}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"callback"})]),11);n=m[0],m[1],r=m[2],i=m[3],s=m[4],o=m[5],u=m[6],l=m[7],c=m[8],d=m[9],f=m[10];break;case"prevnext":var _=E(q.parse(p,[new q({type:"number"}),new q({type:"number"}),new q({type:"number"}),new q({type:"boolean"}),new q({type:"string"}),new q({type:"string"}),new q({type:"array",optional:!0}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"callback"})]),11);n=_[0],_[1],a=_[2],i=_[3],s=_[4],o=_[5],u=_[6],l=_[7],c=_[8],d=_[9],f=_[10],r=!0}return n?[null,f]:(t.isInclusive=r,t.prevResultSize=a,t.nextResultSize=i,t.reverse=s,t.messageType=o,t.customType=u,t.senderUserIds=l,t.includeMetaArray=c,t.includeReaction=d,[t,f])}},{key:"_getMessageList",value:function(e,t,n,r){var a,i=this,s=P.get(this._iid).MessageListParams,o=E(q.parse(arguments,[new q({type:"number"}),new q({type:"string",constraint:function(e){return Object.values(oe).includes(e)}}),new q({type:s,constraint:function(e){return e._validate()}}),new q({type:"callback"})]),5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ne(this._iid,function(r){a?r(a,null):w.get(i._iid).container.apiClient.getMessageList(c(c({channel:i,token:e,tokenType:t},n),{},{shouldReverse:n.reverse}),function(e,t){if(e)r(e,null);else{var n=P.get(i._iid).BaseChannel,a=t.messages.map(function(e){return n.buildMessage(e,i)}).filter(function(e){return null!==e});r(null,a)}})},r)}},{key:"getPreviousMessagesByTimestamp",value:function(e){var t=E(this._parseMessageListParams.apply(this,["prev"].concat(b(q.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,oe.TIMESTAMP,n,r)}},{key:"getNextMessagesByTimestamp",value:function(e){var t=E(this._parseMessageListParams.apply(this,["next"].concat(b(q.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,oe.TIMESTAMP,n,r)}},{key:"getPreviousAndNextMessagesByTimestamp",value:function(e){var t=E(this._parseMessageListParams.apply(this,["prevnext"].concat(b(q.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,oe.TIMESTAMP,n,r)}},{key:"getPreviousMessagesByID",value:function(e){var t=E(this._parseMessageListParams.apply(this,["prev"].concat(b(q.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,oe.MESSAGE_ID,n,r)}},{key:"getNextMessagesByID",value:function(e){var t=E(this._parseMessageListParams.apply(this,["next"].concat(b(q.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,oe.MESSAGE_ID,n,r)}},{key:"getPreviousAndNextMessagesByID",value:function(e){var t=E(this._parseMessageListParams.apply(this,["prevnext"].concat(b(q.toArray(arguments)))),2),n=t[0],r=t[1];return this._getMessageList(e,oe.MESSAGE_ID,n,r)}},{key:"getMessagesByTimestamp",value:function(e,t,n){return this._getMessageList(e,oe.TIMESTAMP,t,n)}},{key:"getMessagesByMessageId",value:function(e,t,n){return this._getMessageList(e,oe.MESSAGE_ID,t,n)}},{key:"_sendUserMessage",value:function(e){var t=this,n=e.message,r=e.data,a=e.customType,i=e.metaArrays,s=e.mentionType,o=e.mentionedUserIds,u=e.translationTargetLanguages,l=e.pushNotificationDeliveryOption,c=e.reqId,d=e.rootMessageId,f=e.parentMessageId,h=e.silent,p=void 0!==h&&h,y=e.callback,g=P.get(this._iid),m=g.Command,_=g.UserMessage;c=c||m.generateRequestId();var v=At.getInstance(this._iid),E=_.objectify({messageId:0,reqId:c,user:v.currentUser||{},channel:this,message:n,data:r,customType:a,metaArrays:i,mentionType:s,rootMessageId:d,parentMessageId:f,mentionedUserIds:o,translations:u,silent:p,createdAt:(new Date).getTime()}),b=new _(E);if(b.requestState=v.MessageRequestState.PENDING,b.sendingStatus=v.MessageSendingStatus.PENDING,b.requestedMentionUserIds=o,!v.currentUser){var C=new I("Connection should be made first.",I.CONNECTION_REQUIRED),S=new _(E);return S.requestState=v.MessageRequestState.FAILED,S.sendingStatus=v.MessageSendingStatus.FAILED,S.requestedMentionUserIds=o,S.errorCode=C.code,y(C,S),b}var O=m.bMessage({channelUrl:this.url,message:n,data:r,customType:a,metaArrays:i,mentionType:s,mentionedUserIds:o,requestId:c,rootMessageId:d,parentMessageId:f,silent:p,translationTargetLanguages:u,pushNotificationDeliveryOption:l});return b.reqId=O.requestId,this.isGroupChannel()&&v.getConnectionState()!==v.ConnectionState.OPEN&&v.currentUser&&!v.connecting&&!v.reconnecting&&"string"==typeof a&&0===a.indexOf("SB_VIDEOCHAT")?w.get(v._iid).container.apiClient.sendUserMessage({channelUrl:this.url,isOpenChannel:this.isOpenChannel(),message:n,data:r,customType:a,translationTargetLanguages:u,metaArrays:i,mentionType:s,mentionedUserIds:o,pushNotificationDeliveryOption:l,rootMessageId:d,parentMessageId:f},function(e,t){var n=null;e?((n=new _(E)).requestState=v.MessageRequestState.FAILED,n.sendingStatus=v.MessageSendingStatus.FAILED,e.code===I.REQUEST_CANCELED&&(n.sendingStatus=v.MessageSendingStatus.CANCELED),n.requestedMentionUserIds=o,n.errorCode=e.code):((n=new _(t)).requestState=v.MessageRequestState.SUCCEEDED,n.sendingStatus=v.MessageSendingStatus.SUCCEEDED),y(e,n)}):v.sendCommand(O,function(e,n){if(v.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n){var a=new _(E);a.reqId=O.requestId,a.requestState=v.MessageRequestState.FAILED,a.sendingStatus=v.MessageSendingStatus.FAILED,n.code===I.REQUEST_CANCELED&&(a.sendingStatus=v.MessageSendingStatus.CANCELED),a.requestedMentionUserIds=o,a.errorCode=n.code,y(new I(n.message,n.code),a)}else{var i=new _(e.getJsonElement()),s=v.currentUser;if(s&&i._sender&&s.userId===i._sender.userId&&(s.nickname!==i._sender.nickname&&(s.nickname=i._sender.nickname),s.profileUrl!==i._sender.profileUrl&&(s.profileUrl=i._sender.profileUrl),x.deepEqual(s.metaData,i._sender.metaData)||(s.metaData=i._sender.metaData)),t.isGroupChannel()){for(var u in t.lastMessage=i,v.channelHandlers)v.channelHandlers[u].onChannelChanged(t);i.requestState=v.MessageRequestState.SUCCEEDED,i.sendingStatus=v.MessageSendingStatus.SUCCEEDED,y(null,i)}else i.requestState=v.MessageRequestState.SUCCEEDED,i.sendingStatus=v.MessageSendingStatus.SUCCEEDED,y(null,i)}}),b}},{key:"sendUserMessage",value:function(){var e=q.toArray(arguments),t=e.pop(),n=null,r=null,a=P.get(this._iid).UserMessageParams;if("function"==typeof t)if(e[0]instanceof a)null===(r=e[0]).data&&(r.data=""),null===r.customType&&(r.customType="");else if("string"==typeof e[0])switch((r=new a).message=e[0],e.length){case 1:break;case 2:r.data=e[1]||"";break;case 3:r.data=e[1]||"",r.customType=e[2]||"";break;case 4:r.data=e[1]||"",r.customType=e[2]||"",r.translationTargetLanguages=Array.isArray(e[3])?e[3]:[e[3]];break;default:n=q.error}else n=q.error;else n=q.error;var i=w.get(this._iid).container.isErrorFirstInCallback;return!n&&r._validate()&&r.message?this._sendUserMessage(c(c({},r),{},{metaArrays:r.metaArrays,mentionType:r.mentionType,mentionedUserIds:r._mentionedUserIds,rootMessageId:r.rootMessageId,parentMessageId:r.parentMessageId,translationTargetLanguages:r._translationTargetLanguages,callback:function(e,n){i?t(e,n):t(n,e)}})):(i?t(q.error,null):t(null,q.error),null)}},{key:"resendUserMessage",value:function(e,t){var n=this,r=P.get(this._iid),a=r.UserMessage,i=r.UserMessageParams,s=null,o=E(q.parse(arguments,[new q({type:a,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===n.url&&"string"==typeof e.message&&"string"==typeof e.data&&"string"==typeof e.customType&&Array.isArray(e.translations)}}),new q({type:"callback"})]),3);return s=o[0],e=o[1],t=o[2],ne(this._iid,function(t){if(s)s.message+=" Please check if the failed message is resend-able with `message.isResendable().`",t(s,null);else{var r=i.PushNotificationDeliveryOption.DEFAULT;n._sendUserMessage(c(c({},e),{},{mentionedUserIds:e.requestedMentionUserIds,translationTargetLanguages:e.translations,pushNotificationDeliveryOption:r,reqId:e.reqId,callback:t}))}},t)}},{key:"updateUserMessage",value:function(e,t,n,r,a){var i=this,s=P.get(this._iid),o=s.Command,u=s.UserMessage,l=s.UserMessageParams,d=arguments,f=null,h=null;if("number"==typeof e)switch(d.length){case 3:var p=E(q.parse(d,[new q({type:"number"}),new q({type:l}),new q({type:"callback"})]),4);f=p[0],e=p[1],h=p[2],a=p[3];break;case 5:h=new l;var y=E(q.parse(d,[new q({type:"number"}),new q({type:"string",nullable:!0}),new q({type:"string",nullable:!0}),new q({type:"string",nullable:!0}),new q({type:"callback"})]),6);f=y[0],e=y[1],t=y[2],n=y[3],r=y[4],a=y[5],h.message=t,h.data=n,h.customType=r}return ne(this._iid,function(t){if(!f&&h&&h._validate()){var n=o.bUpdateUserMessage(c(c({channelUrl:i.url,messageId:e},h),{},{mentionType:h._mentionType,mentionedUserIds:h._mentionedUserIds})),r=At.getInstance(i._iid);r.sendCommand(n,function(e,n){if(r.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}var i=null;n||(i=new u(e.getJsonElement())),t(n,i)})}else t(q.error,null)},a)}},{key:"translateUserMessage",value:function(e,t,n){var r,a=this,i=At.getInstance(this._iid),s=P.get(this._iid).UserMessage,o=E(q.parse(arguments,[new q({type:s,constraint:function(e){return e.channelUrl===a.url&&e.sendingStatus===i.MessageSendingStatus.SUCCEEDED}}),new q({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),4);return r=o[0],e=o[1],t=o[2],n=o[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.translateUserMessage({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),messageId:e.messageId,translationTargetLanguages:t},function(e,t){var r=null;e||(r=new s(t)),n(e,r)})},n)}},{key:"_parseFileMessageArguments",value:function(e){var t=P.get(this._iid),n=t.BaseMessageParams,r=t.FileMessageParams,a={error:null,file:null,name:null,type:null,size:null,data:"",customType:"",thumbnailSizes:[],metaArrays:[],mentionType:n.MentionType.USERS,mentionedUserIds:[],pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,rootMessageId:null,parentMessageId:null,progressHandler:null,silent:!1,callback:null};if("function"==typeof e[e.length-1]&&(a.callback=e.pop()),"function"==typeof e[e.length-1]&&(a.progressHandler=e.pop()),e[0]instanceof r)a.file=e[0].file||e[0].fileUrl,a.name=e[0].fileName,a.type=e[0].mimeType,a.size=e[0].fileSize,a.data=e[0].data,a.customType=e[0].customType,a.thumbnailSizes=e[0].thumbnailSizes,a.metaArrays=e[0].metaArrays,a.mentionType=e[0]._mentionType,a.mentionedUserIds=e[0]._mentionedUserIds,a.pushNotificationDeliveryOption=e[0].pushNotificationDeliveryOption?e[0].pushNotificationDeliveryOption:r.PushNotificationDeliveryOption.DEFAULT,a.rootMessageId=e[0].rootMessageId,a.parentMessageId=e[0].parentMessageId,a.silent=e[0].silent,e[0]._validate()||(a.error=q.error);else if(x.isFile(e[0])||"string"==typeof e[0]){switch(a.file=e[0],e.length){case 1:break;case 2:a.data=e[1];break;case 3:a.data=e[1],a.customType=e[2];break;case 4:a.data=e[1],a.customType=e[2],a.thumbnailSizes=e[3];break;case 5:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4];break;case 6:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4],a.customType=e[5];break;case 7:a.name=e[1],a.type=e[2],a.size=e[3],a.data=e[4],a.customType=e[5],a.thumbnailSizes=e[6]}var i=E(q.parse([a.file,a.name,a.type,a.size,a.data,a.customType,a.thumbnailSizes],[new q({type:["file","string"]}),new q({type:"string",nullable:!0}),new q({type:"string",nullable:!0}),new q({type:"number",nullable:!0,constraint:function(e){return 0<=e}}),new q({type:"string",nullable:!0}),new q({type:"string",nullable:!0}),new q({type:"array"})]),8);a.error=i[0],a.file=i[1],a.name=i[2],a.type=i[3],a.size=i[4],a.data=i[5],a.customType=i[6],a.thumbnailSizes=i[7]}else a.error=q.error;return x.isFile(a.file)&&(a.name=a.name||a.file.name,a.type=a.type||a.file.type,a.size=a.size||a.file.size),a}},{key:"_createTempFileMessage",value:function(e){try{var t=At.getInstance(this._iid),n=P.get(this._iid),r=n.Command,a=n.FileMessage,i=a.objectify(c(c({},e),{},{messageId:0,reqId:r.generateRequestId(),user:t.currentUser||{},channel:this,url:"string"==typeof e.file?e.file:"",thumbnails:e.thumbnailSizes.map(function(e){return{url:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}}),sendingStatus:t.MessageSendingStatus.PENDING,createdAt:(new Date).getTime()}));return new a(i)}catch(e){return null}}},{key:"sendFileMessage",value:function(){var e=this._parseFileMessageArguments(q.toArray(arguments)),t=null,n=P.get(this._iid).Command.generateRequestId();e.error||((t=this._createTempFileMessage(e)).requestedMentionUserIds=e.mentionedUserIds,n=t.reqId);var r=At.getInstance(this._iid);r&&r.currentUser||(e.error=new I("Connection should be made first.",I.CONNECTION_REQUIRED));var a=P.get(this._iid).FileMessageQueue;return a.create(this).addJob(new a.Job({fileInfo:e,pendingMessage:t,requestId:n,error:e.error,response:null})),t}},{key:"sendFileMessages",value:function(e,t){var n=this,r=1<arguments.length&&void 0!==t?t:{},a=r.progress?r.progress:function(){},i=r.sent?r.sent:function(){},s=r.complete?r.complete:function(){};if(Array.isArray(e)&&0<e.length&&e.length<=20){var o=[];return e.forEach(function(t,r){o.push(n.sendFileMessage(t,a,function(t,n){i(t,n),r===e.length-1&&s(null)}))}),o}return s(q.error),null}},{key:"resendFileMessage",value:function(e,t,n){var r=this,a=P.get(this._iid),i=a.FileMessage,s=a.FileMessageParams,o=null,u=E(q.parse(arguments,[new q({type:i,constraint:function(e){return 0===e.messageId&&e.isResendable()&&e.reqId&&e.channelUrl===r.url&&"string"==typeof e.data&&"string"==typeof e.customType&&Array.isArray(e.thumbnails)}}),new q({type:"file",optionalIf:function(e){return!!e[0].url},defaultValue:null}),new q({type:"callback"})]),4);return o=u[0],e=u[1],t=u[2],n=u[3],ne(this._iid,function(n){if(o)o.message+=" Please check if the failed message is resend-able with `message.isResendable().`",n(o,null);else{var a=new s;e.url?a.fileUrl=e.url:a.file=t,a.fileName=e.name,a.fileSize=e.size,a.mimeType=e.type,a.data=e.data,a.customType=e.customType,a.mentionType=e.mentionType,a.mentionedUserIds=e.requestedMentionUserIds,a.metaArrays=e.metaArrays,a.thumbnailSizes=e.thumbnails.map(function(e){return{maxWidth:e.width,maxHeight:e.height}}),r.sendFileMessage(a,n)}},n)}},{key:"updateFileMessage",value:function(e,t,n,r){var a=this,i=P.get(this._iid),s=i.Command,o=i.FileMessage,u=i.FileMessageParams,l=arguments,d=null,f=null;if("number"==typeof e)switch(l.length){case 3:var h=E(q.parse(l,[new q({type:"number"}),new q({type:u}),new q({type:"callback"})]),4);d=h[0],e=h[1],f=h[2],r=h[3],f&&(f._isUpdate=!0);break;case 4:f=new u;var p=E(q.parse(l,[new q({type:"number"}),new q({type:"string",nullable:!0}),new q({type:"string",nullable:!0}),new q({type:"callback"})]),5);d=p[0],e=p[1],t=p[2],n=p[3],r=p[4],f.data=t,f.customType=n,f._isUpdate=!0}return ne(this._iid,function(t){if(!d&&f&&f._validate()){var n=s.bUpdateFileMessage(c(c({channelUrl:a.url,messageId:e},f),{},{mentionType:f._mentionType,mentionedUserIds:f._mentionedUserIds})),r=At.getInstance(a._iid);r.sendCommand(n,function(e,n){if(r.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}var i=null;n||(i=new o(e.getJsonElement())),t(n,i)})}else t(q.error,null)},r)}},{key:"cancelUploadingFileMessage",value:function(e,t){var n,r=E(q.parse(arguments,[new q({type:["number","string"]}),new q({type:"callback"})]),3);n=r[0],e=r[1],t=r[2];var a=w.get(this._iid).container.isErrorFirstInCallback;return n?(a?t(n,null):t(null,n),!1):P.get(this._iid).FileMessageQueue.create(this).cancelUploadItemByRequestId(e,function(e,n){return a?t(e,n):t(n,e)})}},{key:"addReaction",value:function(e,t,n){var r,a=this,i=At.getInstance(this._iid),s=P.get(this._iid).ReactionEvent,o=E(q.parse(arguments,[new q({type:ie}),new q({type:"string",constraint:function(e){return 0<e.length}}),new q({type:"callback"})]),4);return r=o[0],e=o[1],t=o[2],n=o[3],ne(this._iid,function(n){r?n(r,null):e.sendingStatus===i.MessageSendingStatus.SUCCEEDED?w.get(a._iid).container.apiClient.addReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},function(t,r){var a=null;t||(a=s.createFromJson(c(c({},r),{},{msg_id:e.messageId}))),n(t,a)}):n(new I("Cannot add reaction to a non-succeeded message.",I.REQUEST_FAILED),null)},n)}},{key:"deleteReaction",value:function(e,t,n){var r,a=this,i=At.getInstance(this._iid),s=P.get(this._iid).ReactionEvent,o=E(q.parse(arguments,[new q({type:ie}),new q({type:"string",constraint:function(e){return 0<e.length}}),new q({type:"callback"})]),4);return r=o[0],e=o[1],t=o[2],n=o[3],ne(this._iid,function(n){r?n(r,null):e.sendingStatus===i.MessageSendingStatus.SUCCEEDED?w.get(a._iid).container.apiClient.deleteReaction({isGroupChannel:e.isGroupChannel(),channelUrl:e.channelUrl,messageId:e.messageId,key:t},function(t,r){var a=null;t||(a=s.createFromJson(c(c({},r),{},{msg_id:e.messageId}))),n(t,a)}):n(new I("Cannot remove reaction to a non-succeeded message.",I.REQUEST_FAILED),null)},n)}},{key:"deleteMessage",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return!Array.isArray(e)&&null!==e&&e.hasOwnProperty("messageId")}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.deleteMessage({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),messageId:e.messageId},function(e,n){return t(e,null)})},t)}},{key:"addOperators",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.addOperators({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),operatorUserIds:e},function(e,n){return t(e,n)})},t)}},{key:"removeOperators",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.removeOperators({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),operatorUserIds:e},function(e,n){return t(e,n)})},t)}},{key:"getMetaCounters",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.getMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),keys:e},function(e,n){return t(e,n)})},t)}},{key:"getAllMetaCounters",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.getMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},function(t,n){return e(t,n)})},e)}},{key:"createMetaCounters",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"number"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.createMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e},function(e,n){return t(e,n)})},t)}},{key:"updateMetaCounters",value:function(e,t,n){var r,a=this,i=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"number"==typeof e})}}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"callback"})]),4);return r=i[0],e=i[1],t=i[2],n=i[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.updateMetaCounters({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),metaCounter:e,upsert:t,mode:"set"},function(e,t){return n(e,t)})},n)}},{key:"increaseMetaCounters",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"number"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.updateMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e,upsert:!1,mode:"increase"},function(e,n){return t(e,n)})},t)}},{key:"decreaseMetaCounters",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"number"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.updateMetaCounters({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaCounter:e,upsert:!1,mode:"decrease"},function(e,n){var r=null;if(!e)for(var a in r={},n)r[a]=n[a];t(e,r)})},t)}},{key:"deleteMetaCounter",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string"}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.deleteMetaCounter({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),key:e},function(e,n){return t(e,n)})},t)}},{key:"deleteAllMetaCounters",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.deleteAllMetaCounters({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},function(t,n){return e(t,n)})},e)}},{key:"getMetaData",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.getMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),keys:e},function(e,n){return t(e,n)})},t)}},{key:"getAllMetaData",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.getMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel(),keys:[]},function(t,n){return e(t,n)})},e)}},{key:"createMetaData",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.createMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),metaData:e},function(e,n){return t(e,n)})},t)}},{key:"updateMetaData",value:function(e,t,n){var r,a=this,i=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return e&&!Array.isArray(e)&&0<Object.keys(e).length&&Object.keys(e).map(function(t){return e[t]}).every(function(e){return"string"==typeof e})}}),new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"callback"})]),4);return r=i[0],e=i[1],t=i[2],n=i[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.updateMetaData({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),metaData:e,upsert:t},function(e,t){return n(e,t)})},n)}},{key:"deleteMetaData",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string"}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.deleteMetaData({channelUrl:r.url,isOpenChannel:r.isOpenChannel(),key:e},function(e,n){return t(e,n)})},t)}},{key:"deleteAllMetaData",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.deleteAllMetaData({channelUrl:t.url,isOpenChannel:t.isOpenChannel()},function(t,n){return e(t,n)})},e)}},{key:"_updateMessageMetaArray",value:function(e,t,n,r){var a=this;return ne(this._iid,function(r){var i=P.get(a._iid),s=i.Command,o=i.UserMessage,u=i.FileMessage,l=i.AdminMessage,c=null;if(t.isUserMessage()?c=s.bUpdateUserMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n}):t.isFileMessage()&&(c=s.bUpdateFileMessage({channelUrl:e,messageId:t.messageId,metaArrayParams:n})),c){var d=At.getInstance(a._iid);d.sendCommand(c,function(e,n){if(d.getErrorFirstCallback()){var a=[e,n];n=a[0],e=a[1]}var i=null;n||(t.isUserMessage()?i=new o(e.getJsonElement()):t.isFileMessage()?i=new u(e.getJsonElement()):t.isAdminMessage()&&(i=new l(e.getJsonElement()))),r(n,i)})}else r(q.error,null)},r)}},{key:"createMessageMetaArrayKeys",value:function(e,t,n){var r,a=P.get(this._iid).MessageMetaArray,i=E(q.parse(arguments,[new q({type:ie}),new q({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e&&""!==e})}}),new q({type:"callback"})]),4);if(r=i[0],e=i[1],t=i[2],n=i[3],r)return ne(this._iid,function(e){e(r,null)},n);var s=[];if(Array.isArray(t))for(var o=0;o<t.length;o++){var u=t[o];s.push(new a(u,[]))}return this._updateMessageMetaArray(this.url,e,{array:s.map(function(e){return e.encode()}),mode:"add",upsert:!0},n)}},{key:"deleteMessageMetaArrayKeys",value:function(e,t,n){var r,a=P.get(this._iid).MessageMetaArray,i=E(q.parse(arguments,[new q({type:ie}),new q({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e&&""!==e})}}),new q({type:"callback"})]),4);if(r=i[0],e=i[1],t=i[2],n=i[3],r)return ne(this._iid,function(e){e(r,null)},n);var s=[];if(Array.isArray(t))for(var o=0;o<t.length;o++){var u=t[o];s.push(new a(u,[]))}return this._updateMessageMetaArray(this.url,e,{array:s.map(function(e){return e.encode()}),mode:"remove",upsert:!0},n)}},{key:"addMessageMetaArrayValues",value:function(e,t,n){var r,a=P.get(this._iid).MessageMetaArray,i=E(q.parse(arguments,[new q({type:ie}),new q({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&0<e.length&&e.every(function(e){return e instanceof a})||0<Object.keys(e).length&&Object.keys(e).every(function(t){return Array.isArray(e[t])&&0<e[t].length&&e[t].every(function(e){return"string"==typeof e&&0<e.length})}))}}),new q({type:"callback"})]),4);if(r=i[0],e=i[1],t=i[2],n=i[3],r)return ne(this._iid,function(e){e(r,null)},n);var s=Array.isArray(t)?t.map(function(e){return e.encode()}):Object.keys(t).map(function(e){return{key:e,value:t[e]}});return this._updateMessageMetaArray(this.url,e,{array:s,mode:"add",upsert:!0},n)}},{key:"removeMessageMetaArrayValues",value:function(e,t,n){var r,a=P.get(this._iid).MessageMetaArray,i=E(q.parse(arguments,[new q({type:ie}),new q({type:"object",constraint:function(e){return e&&(Array.isArray(e)&&0<e.length&&e.every(function(e){return e instanceof a})||0<Object.keys(e).length&&Object.keys(e).every(function(t){return Array.isArray(e[t])&&0<e[t].length&&e[t].every(function(e){return"string"==typeof e&&0<e.length})}))}}),new q({type:"callback"})]),4);if(r=i[0],e=i[1],t=i[2],n=i[3],r)return ne(this._iid,function(e){e(r,null)},n);var s=Array.isArray(t)?t.map(function(e){return e.encode()}):Object.keys(t).map(function(e){return{key:e,value:t[e]}});return this._updateMessageMetaArray(this.url,e,{array:s,mode:"remove",upsert:!0},n)}},{key:"report",value:function(e,t,n){var r,a=this,i=P.get(this._iid).BaseChannel,s=E(q.parse(arguments,[new q({type:i.ReportCategory}),new q({type:"string"}),new q({type:"callback"})]),4);return r=s[0],e=s[1],t=s[2],n=s[3],ne(this._iid,function(n){if(r)n(r,null);else{var i=At.getInstance(a._iid);w.get(a._iid).container.apiClient.report({channelUrl:a.url,isOpenChannel:a.isOpenChannel(),reportCategory:e,reportingUserId:i.currentUser?i.currentUser.userId:null,reportDescription:t},function(e,t){n(e,null)})}},n)}},{key:"reportUser",value:function(e,t,n,r){var a,i=this,s=P.get(this._iid).BaseChannel,o=E(q.parse(arguments,[new q({type:se}),new q({type:s.ReportCategory}),new q({type:"string"}),new q({type:"callback"})]),5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ne(this._iid,function(r){if(a)r(a,null);else{var s=At.getInstance(i._iid);w.get(i._iid).container.apiClient.reportUser({channelUrl:i.url,isOpenChannel:i.isOpenChannel(),reportCategory:t,offendingUserId:e.userId,reportingUserId:s.currentUser?s.currentUser.userId:null,reportDescription:n},function(e,t){r(e,null)})}},r)}},{key:"reportMessage",value:function(e,t,n,r){var a,i=this,s=P.get(this._iid).BaseChannel,o=E(q.parse(arguments,[new q({type:ie}),new q({type:s.ReportCategory}),new q({type:"string"}),new q({type:"callback"})]),5);return a=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ne(this._iid,function(r){if(a)r(a,null);else{var s=At.getInstance(i._iid);w.get(i._iid).container.apiClient.reportMessage({messageId:e.messageId,channelUrl:i.url,isOpenChannel:i.isOpenChannel(),reportCategory:t,offendingUserId:e.sender.userId,reportingUserId:s.currentUser?s.currentUser.userId:null,reportDescription:n},function(e,t){r(e,null)})}},r)}}],[{key:"buildMessage",value:function(e,t){var n=P.get(this._iid),r=n.UserMessage,a=n.FileMessage,i=n.AdminMessage;if(e)switch(e.hasOwnProperty("channel_type")||(e.channel_type=t.channelType),e.type){case"MESG":return new r(e);case"FILE":var s=e.file;return new a(c(c({},e),{},{url:String(s.url),name:String(s.name),type:String(s.type),size:parseInt(s.size),data:String(s.data)}));case"BRDM":case"ADMM":return new i(e)}return null}},{key:"CHANNEL_TYPE_OPEN",get:function(){return"open"}},{key:"CHANNEL_TYPE_GROUP",get:function(){return"group"}},{key:"CHANNEL_TYPE_BASE",get:function(){return"base"}},{key:"MessageTypeFilter",get:function(){return{ALL:"",USER:"MESG",FILE:"FILE",ADMIN:"ADMM"}}},{key:"ReportCategory",get:function(){return{SPAM:"spam",HARASSING:"harassing",SUSPICIOUS:"suspicious",INAPPROPRIATE:"inappropriate"}}}]),e}(),le=function(){function e(t){s(this,e),t&&(this.category=t.hasOwnProperty("cat")?parseInt(t.cat):0,this.data=t.hasOwnProperty("data")?t.data:null,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this.channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):ue.CHANNEL_TYPE_GROUP)}return u(e,[{key:"isGroupChannel",value:function(){return this.channelType===ue.CHANNEL_TYPE_GROUP}},{key:"isOpenChannel",value:function(){return this.channelType===ue.CHANNEL_TYPE_OPEN}}]),e}();function ce(e){s(this,ce),e&&(this.category=e.hasOwnProperty("cat")?parseInt(e.cat):0)}le.CATEGORY_NONE=0,le.CATEGORY_CHANNEL_ENTER=10102,le.CATEGORY_CHANNEL_EXIT=10103,le.CATEGORY_USER_CHANNEL_MUTE=10201,le.CATEGORY_USER_CHANNEL_UNMUTE=10200,le.CATEGORY_USER_CHANNEL_BAN=10601,le.CATEGORY_USER_CHANNEL_UNBAN=10600,le.CATEGORY_CHANNEL_FREEZE=10701,le.CATEGORY_CHANNEL_UNFREEZE=10700,le.CATEGORY_TYPING_START=10900,le.CATEGORY_TYPING_END=10901,le.CATEGORY_CHANNEL_JOIN=1e4,le.CATEGORY_CHANNEL_LEAVE=10001,le.CATEGORY_CHANNEL_OPERATOR_UPDATE=10002,le.CATEGORY_CHANNEL_INVITE=10020,le.CATEGORY_CHANNEL_DECLINE_INVITE=10022,le.CATEGORY_CHANNEL_PROP_CHANGED=11e3,le.CATEGORY_CHANNEL_DELETED=12e3,le.CATEGORY_CHANNEL_META_DATA_CHANGED=11100,le.CATEGORY_CHANNEL_META_COUNTERS_CHANGED=11200,le.CATEGORY_CHANNEL_HIDE=13e3,le.CATEGORY_CHANNEL_UNHIDE=13001,ce.CATEGORY_USER_BLOCK=20001,ce.CATEGORY_USER_UNBLOCK=2e4,ce.CATEGORY_FRIEND_DISCOVERED=20900;var de=function(){function e(t){s(this,e),this.sb=t,this.cls=P.get(this.sb._iid)}return u(e,[{key:"onRawCommandReceived",value:function(e){var t=this,n=this.cls,r=n.Command,a=n.User,s=n.Member,o=n.BaseChannel,u=n.GroupChannel,l=n.OpenChannel,c=n.UserMessage,d=n.FileMessage,f=n.AdminMessage,h=n.BaseMessageParams,p=n.ReactionEvent,y=n.ReadStatus,g=n.ThreadInfoUpdateEvent,m=w.get(this.sb._iid),_=m.container,v=_.pinger,E=_.auth,b=_.subscribedUnreadMessageCount,C=_.ackStateMap,S=new r(e),A=S.getJsonElement();if(A.hasOwnProperty("unread_cnt")&&"object"===i(A.unread_cnt)){var U=!1,M=A.unread_cnt.ts;if("number"==typeof M&&M>b.ts){if(b.all!==A.unread_cnt.all&&(U=!0),b.all=0<=A.unread_cnt.all?A.unread_cnt.all:0,A.unread_cnt.custom_types)for(var T in A.unread_cnt.custom_types)b.custom_types[T]!==A.unread_cnt.custom_types[T]&&(U=!0),b.custom_types[T]=A.unread_cnt.custom_types[T];U=U&&0<b.ts,b.ts=M}if(U)for(var N in this.sb.userEventHandlers)this.sb.userEventHandlers[N].onTotalUnreadMessageCountUpdated(b.all,b.custom_types)}var k=S.requestId;if(k){var P=C[k];if(P){clearTimeout(P.timer);var L=P.handler;L&&("EROR"===S.command?L(new I(A.message,A.code),null):L(null,S)),C.hasOwnProperty(k)&&delete C[k]}}else switch(v&&"LOGI"!==S.command&&v.start(),S.command){case"LOGI":this.sb.loginTimer&&(clearTimeout(this.sb.loginTimer),this.sb.loginTimer=null,this.sb.onLoginTimerCancel=null,A.hasOwnProperty("error")?(this.sb.isSessionOpened=!1,this.sb.loginHandler(new I(A.message,A.code),null)):(this.sb.isSessionOpened=!0,A.hasOwnProperty("key")&&(E.sessionKey=A.key),A.hasOwnProperty("ekey")&&(E.eKey=A.ekey),A.hasOwnProperty("user_id")&&(this.sb.currentUser=new a(A)),"number"==typeof A.ping_interval&&0<A.ping_interval&&m.set("pingInterval",1e3*A.ping_interval),"number"==typeof A.pong_timeout&&0<A.pong_timeout&&m.set("pongTimeout",1e3*A.pong_timeout),"number"==typeof A.login_ts&&m.set("connectedAt",1e3*A.login_ts),"number"==typeof A.max_unread_cnt_on_super_group?m.set("maxUnreadCountOfSuperGroupChannel",A.max_unread_cnt_on_super_group):m.set("maxUnreadCountOfSuperGroupChannel",O.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL),v&&v.start(),A.hasOwnProperty("file_upload_size_limit")&&A.hasOwnProperty("premium_feature_list")&&A.hasOwnProperty("emoji_hash")&&m.set("appInfo",new J(A)),this.sb.loginHandler(null,this.sb.currentUser)),this.sb.connecting=!1,this.sb.reconnecting=!1);break;case"MESG":case"FILE":case"BRDM":case"ADMM":var D=null;if("MESG"===S.command?D=new c(A):"FILE"===S.command?D=new d(A):"BRDM"!==S.command&&"ADMM"!==S.command||(D=new f(A)),D){var H=this.sb.currentUser?this.sb.currentUser.userId:null,j=D.silent,F=!!A.force_update_last_message,G=D._sender&&D._sender.userId===H;if(D.isGroupChannel()){var B=r.bMessageAck({channelUrl:D.channelUrl,messageId:D.messageId});this.sb.sendCommand(B);var z=u.cachedChannels.hasOwnProperty(D.channelUrl);u.getChannel(D.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){if(e.isHidden=!1,e.hiddenState=u.HiddenState.UNHIDDEN,u.cachedChannels[e.url]=e,D._sender&&e.memberMap.hasOwnProperty(D._sender.userId)){var a=e.memberMap[D._sender.userId];a.nickname!==D._sender.nickname&&(a.nickname=D._sender.nickname),a.profileUrl!==D._sender.profileUrl&&(a.profileUrl=D._sender.profileUrl),x.deepEqual(a.metaData,D._sender.metaData)||(a.metaData=D._sender.metaData),a.isBlockedByMe!==D._sender.isBlockedByMe&&(a.isBlockedByMe=D._sender.isBlockedByMe)}var i=t.sb.currentUser;i&&G&&(i.nickname!==D._sender.nickname&&(i.nickname=D._sender.nickname),i.profileUrl!==D._sender.profileUrl&&(i.profileUrl=D._sender.profileUrl),x.deepEqual(i.metaData,D._sender.metaData)||(i.metaData=D._sender.metaData));var s=!1;if(D.mentionType===h.MentionType.CHANNEL)G||(s=!0);else if(D.mentionType===h.MentionType.USERS)for(var o=0;o<D.mentionedUsers.length;o++)if(!G&&D.mentionedUsers[o].userId===H){s=!0;break}if(j&&!G||(e.isEphemeral||z)&&((!e.lastMessage||e.lastMessage.createdAt<D.createdAt)&&(e.lastMessage=D),G||e._setGroupChannelUnreadCount(e.unreadMessageCount+1,e.unreadMentionCount+(s?1:0))),F&&(!e.lastMessage||e.lastMessage.createdAt<D.createdAt)&&(e.lastMessage=D),!j||G)for(var l in t.sb.channelHandlers)t.sb.channelHandlers[l].onChannelChanged(e);for(var c in t.sb.channelHandlers){var d=t.sb.channelHandlers[c];d.onMessageReceived(e,D),s&&d.onMentionReceived(e,D)}}})}else D.isOpenChannel()&&l.getChannel(D.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=!1;if(D.mentionType===h.MentionType.CHANNEL)a=!0;else if(D.mentionType===h.MentionType.USERS)for(var i=0;i<D.mentionedUsers.length;i++)if(D.mentionedUsers[i].userId===H){a=!0;break}for(var s in t.sb.channelHandlers){var o=t.sb.channelHandlers[s];l.enteredChannels[e.url]&&o.onMessageReceived(e,D),a&&o.onMentionReceived(e,D)}}})}break;case"MEDI":case"FEDI":case"AEDI":var q=null;if("MEDI"===S.command?q=new c(A):"FEDI"===S.command?q=new d(A):"AEDI"===S.command&&(q=new f(A)),q){var W=this.sb.currentUser?this.sb.currentUser.userId:null,Y=q.silent,V=q.sender&&q.sender.userId===W;if(q.isGroupChannel()){var Q=u.cachedChannels.hasOwnProperty(q.channelUrl);u.getChannel(q.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=e.cachedReadReceiptStatus[W],i=a&&a>=q.createAt,s=t.sb.currentUser;s&&V&&(s.nickname!==q._sender.nickname&&(s.nickname=q._sender.nickname),s.profileUrl!==q._sender.profileUrl&&(s.profileUrl=q._sender.profileUrl),x.deepEqual(s.metaData,q._sender.metaData)||(s.metaData=q._sender.metaData));var o=!1,u=!1;if(!V&&!i&&A&&A.hasOwnProperty("old_values")){var l=A.old_values.mention_type||q.mentionType,c=A.old_values.mentioned_user_ids||q.mentionedUsers.map(function(e){return e.userId});if(l===h.MentionType.USERS&&q.mentionType===h.MentionType.USERS){for(var d=!1,f=!1,p=0;p<c.length;p++)if(c[p]===W){d=!0;break}for(var y=0;y<q.mentionedUsers.length;y++)if(q.mentionedUsers[y].userId===W){f=!0;break}!d&&f&&(u=!0,!Y&&Q&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}else if(l===h.MentionType.USERS&&q.mentionType===h.MentionType.CHANNEL){for(var g=!1,m=0;m<c.length;m++)if(c[m]===W){g=!0;break}g||(u=!0,!Y&&Q&&(e._setGroupChannelUnreadCount(e.unreadMessageCount,e.unreadMentionCount+1),o=!0))}}if(!e.lastMessage||e.lastMessage.createdAt<q.createdAt?(e.lastMessage=q,o=!0):e.lastMessage.createdAt===q.createdAt&&e.lastMessage.messageId===q.messageId&&(Q?e.lastMessage.updatedAt<q.updatedAt&&(e.lastMessage=q,o=!0):o=!0),(!Y||V)&&o)for(var _ in t.sb.channelHandlers)t.sb.channelHandlers[_].onChannelChanged(e);for(var v in t.sb.channelHandlers){var E=t.sb.channelHandlers[v];E.onMessageUpdated(e,q),u&&E.onMentionReceived(e,q)}}})}else q.isOpenChannel()&&l.getChannel(q.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n)for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onMessageUpdated(e,q)})}break;case"DELM":var K=String(A.channel_type),Z=String(A.channel_url),X=String(A.msg_id);switch(K){case o.CHANNEL_TYPE_GROUP:u.getChannel(Z,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command);else for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onMessageDeleted(e,X)});break;case o.CHANNEL_TYPE_OPEN:l.getChannel(Z,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command);else for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onMessageDeleted(e,X)})}break;case"READ":var $=new y(A),ee=u.cachedChannels.hasOwnProperty($.channelUrl);u.getChannel($.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n&&(ee&&e.updateReadReceipt($.reader.userId,$.timestamp),t.sb.currentUser))if($.reader.userId===t.sb.currentUser.userId){if(ee){if(0<e.unreadMessageCount||0<e.unreadMentionCount)for(var a in e._setGroupChannelUnreadCount(0,0),t.sb.channelHandlers)t.sb.channelHandlers[a].onChannelChanged(e)}else if(0===e.unreadMessageCount||0===e.unreadMentionCount)for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelChanged(e)}else for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onReadReceiptUpdated(e)});break;case"MRCT":var te=String(A.channel_type),ne=String(A.channel_url),re=p.createFromJson(A);switch(te){case o.CHANNEL_TYPE_GROUP:u.getChannel(ne,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command);else for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onReactionUpdated(e,re)});break;case o.CHANNEL_TYPE_OPEN:l.getChannel(ne,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command);else for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onReactionUpdated(e,re)})}break;case"DLVR":var ae=String(A.channel_url),ie=A.hasOwnProperty("updated")?A.updated:null,se=u.cachedChannels.hasOwnProperty(ae);u.getChannel(ae,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n){var a=!1;for(var i in ie)t.sb.currentUser&&i===t.sb.currentUser.userId&&(a=!0),se&&e.updateDeliveryReceipt(i,parseInt(ie[i]));if(u.cachedChannels[e.url]=e,!a||1!==Object.keys(ie).length)for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onDeliveryReceiptUpdated(e)}});break;case"MTHD":var oe=String(A.channel_url),ue=String(A.channel_type),de=g.createFromJson(A);switch(ue){case o.CHANNEL_TYPE_GROUP:u.getChannel(oe,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n)for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onThreadInfoUpdated(e,de)});break;case o.CHANNEL_TYPE_OPEN:l.getChannel(oe,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(!n)for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onThreadInfoUpdated(e,de)})}break;case"SYEV":var fe=new le(A);switch(fe.category){case le.CATEGORY_CHANNEL_JOIN:case le.CATEGORY_CHANNEL_LEAVE:u.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{var i=fe.data.hasOwnProperty("member_count")?fe.data.member_count:null,o=fe.data.hasOwnProperty("joined_member_count")?fe.data.joined_member_count:null;if(fe.category===le.CATEGORY_CHANNEL_JOIN)(fe.data.hasOwnProperty("users")?fe.data.users:[fe.data]).forEach(function(n){e.isSuper||e.isBroadcast?e.setLatestMemberCount(i,o,A.ts):(n.state=s.JOINED,e.addMember(new s(n)),e.updateJoinedMemberCount());var r=new a(n);for(var l in t.sb.currentUser&&r.userId===t.sb.currentUser.userId&&(e.myMemberState="joined",u.cachedChannels[e.url]=e),t.sb.channelHandlers)t.sb.channelHandlers[l].onUserJoined(e,r)});else{var l=new a(fe.data);for(var c in t.sb.currentUser&&l.userId===t.sb.currentUser.userId?(e.isPublic||u.removeCachedChannel(fe.channelUrl),e.myMemberState="none",e.invitedAt=0,e._setGroupChannelUnreadCount(0,0)):u.cachedChannels[e.url]=e,e.isSuper||e.isBroadcast?e.setLatestMemberCount(i,o,A.ts):(e.removeMember(l),e.updateJoinedMemberCount()),t.sb.channelHandlers)t.sb.channelHandlers[c].onUserLeft(e,l)}}});break;case le.CATEGORY_CHANNEL_OPERATOR_UPDATE:fe.isGroupChannel()?u.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{var i=fe.data.operators.map(function(e){return new a(e)}),s=i.map(function(e){return e.userId});for(var o in e.members)e.members[o].role=0<=s.indexOf(e.members[o].userId)?u.Role.OPERATOR:u.Role.NONE;for(var l in e.myRole=t.sb.currentUser&&0<=s.indexOf(t.sb.currentUser.userId)?u.Role.OPERATOR:u.Role.NONE,t.sb.channelHandlers)t.sb.channelHandlers[l].onOperatorUpdated(e,i)}}):fe.isOpenChannel()&&l.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else for(var i in e.operators=fe.data.operators.map(function(e){return new a(e)}),t.sb.channelHandlers)t.sb.channelHandlers[i].onOperatorUpdated(e,e.operators)});break;case le.CATEGORY_CHANNEL_INVITE:u.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{var i=null;fe.data&&fe.data.inviter&&0<Object.keys(fe.data.inviter).length&&(i=new a(fe.data.inviter));for(var o=[],l=0;l<fe.data.invitees.length;l++){var c=new a(fe.data.invitees[l]);o.push(c),fe.data.invitees[l].state=s.INVITED;var d=new s(fe.data.invitees[l]);if(e.isSuper||e.isBroadcast){var f=fe.data.hasOwnProperty("member_count")?fe.data.member_count:null,h=fe.data.hasOwnProperty("joined_member_count")?fe.data.joined_member_count:null;e.setLatestMemberCount(f,h,A.ts)}else e.addMember(d);t.sb.currentUser&&d.userId===t.sb.currentUser.userId&&(e.isHidden=!1,"joined"!==e.myMemberState&&(e.myMemberState="invited"),e.invitedAt=A.ts,u.cachedChannels[e.url]=e)}for(var p in t.sb.channelHandlers)t.sb.channelHandlers[p].onUserReceivedInvitation(e,i,o)}});break;case le.CATEGORY_CHANNEL_DECLINE_INVITE:u.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{var i=null;fe.data&&fe.data.inviter&&0<Object.keys(fe.data.inviter).length&&(i=new a(fe.data.inviter));var s=new a(fe.data.invitee);if(t.sb.currentUser&&s.userId===t.sb.currentUser.userId&&(e.invitedAt=0,e.myMemberState="none",e.isPublic||u.removeCachedChannel(fe.channelUrl)),e.isSuper||e.isBroadcast){var o=fe.data.hasOwnProperty("member_count")?fe.data.member_count:null,l=fe.data.hasOwnProperty("joined_member_count")?fe.data.joined_member_count:null;e.setLatestMemberCount(o,l,A.ts)}else e.removeMember(s);for(var c in t.sb.currentUser&&s.userId!==t.sb.currentUser.userId&&(u.cachedChannels[e.url]=e),t.sb.channelHandlers)t.sb.channelHandlers[c].onUserDeclinedInvitation(e,i,s)}});break;case le.CATEGORY_TYPING_START:case le.CATEGORY_TYPING_END:u.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{var i=new a(fe.data);for(var s in fe.category===le.CATEGORY_TYPING_START?e.updateTypingStatus(i,!0):e.updateTypingStatus(i,!1),t.sb.channelHandlers)t.sb.channelHandlers[s].onTypingStatusUpdated(e)}});break;case le.CATEGORY_CHANNEL_ENTER:case le.CATEGORY_CHANNEL_EXIT:l.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{fe.data.hasOwnProperty("participant_count")&&(e.participantCount=fe.data.participant_count);var i=new a(fe.data);if(fe.category===le.CATEGORY_CHANNEL_ENTER)for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onUserEntered(e,i);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserExited(e,i)}});break;case le.CATEGORY_USER_CHANNEL_MUTE:case le.CATEGORY_USER_CHANNEL_UNMUTE:fe.isOpenChannel()?l.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{var i=new a(fe.data);if(fe.category===le.CATEGORY_USER_CHANNEL_MUTE)for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onUserMuted(e,i);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserUnmuted(e,i)}}):u.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{var i=new a(fe.data);if(t.sb.currentUser&&i.userId===t.sb.currentUser.userId&&(e.myMutedState=fe.category===le.CATEGORY_USER_CHANNEL_MUTE?"muted":"unmuted"),fe.category===le.CATEGORY_USER_CHANNEL_MUTE)for(var s in t.sb.channelHandlers)t.sb.channelHandlers[s].onUserMuted(e,i);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserUnmuted(e,i)}});break;case le.CATEGORY_USER_CHANNEL_BAN:case le.CATEGORY_USER_CHANNEL_UNBAN:fe.isOpenChannel()?l.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{var i=new a(fe.data);if(fe.category===le.CATEGORY_USER_CHANNEL_BAN)for(var s in t.sb.currentUser&&i.userId===t.sb.currentUser.userId&&(delete l.enteredChannels[fe.channelUrl],t.cls.FileMessageQueue.delete(fe.channelUrl)),t.sb.channelHandlers)t.sb.channelHandlers[s].onUserBanned(e,i);else for(var o in t.sb.channelHandlers)t.sb.channelHandlers[o].onUserUnbanned(e,i)}}):u.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{var i=new a(fe.data);if(fe.category===le.CATEGORY_USER_CHANNEL_BAN){if(t.sb.currentUser&&i.userId===t.sb.currentUser.userId&&(e.isPublic||u.removeCachedChannel(fe.channelUrl),e.myMemberState="none",e.invitedAt=0,e._setGroupChannelUnreadCount(0,0)),e.isSuper||e.isBroadcast){var s=fe.data.hasOwnProperty("member_count")?fe.data.member_count:null,o=fe.data.hasOwnProperty("joined_member_count")?fe.data.joined_member_count:null;e.setLatestMemberCount(s,o,A.ts)}else e.removeMember(i),e.updateJoinedMemberCount();for(var l in t.sb.channelHandlers)t.sb.channelHandlers[l].onUserBanned(e,i)}else for(var c in t.sb.channelHandlers)t.sb.channelHandlers[c].onUserUnbanned(e,i)}});break;case le.CATEGORY_CHANNEL_FREEZE:case le.CATEGORY_CHANNEL_UNFREEZE:fe.isOpenChannel()?l.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else if(e.isFrozen=fe.data.freeze,l.cachedChannels[e.url]=e,fe.category===le.CATEGORY_CHANNEL_FREEZE)for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onChannelFrozen(e);else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelUnfrozen(e)}):u.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else if(e.isFrozen=fe.data.freeze,u.cachedChannels[e.url]=e,fe.category===le.CATEGORY_CHANNEL_FREEZE)for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onChannelFrozen(e);else for(var i in t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelUnfrozen(e)});break;case le.CATEGORY_CHANNEL_DELETED:for(var he in fe.isGroupChannel()?u.removeCachedChannel(fe.channelUrl):l.removeCachedChannel(fe.channelUrl),this.sb.channelHandlers)this.sb.channelHandlers[he].onChannelDeleted(fe.channelUrl,fe.isGroupChannel()?"group":"open");break;case le.CATEGORY_CHANNEL_PROP_CHANGED:fe.isOpenChannel()?l.getChannelWithoutCache(fe.channelUrl,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else for(var a in t.sb.channelHandlers)t.sb.channelHandlers[a].onChannelChanged(e)}):u.getChannelWithoutCache(fe.channelUrl,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else{var a=e.unreadMessageCount,i=e.unreadMentionCount;for(var s in e.myCountPreference!==u.CountPreference.ALL&&(e.myCountPreference===u.CountPreference.UNREAD_MESSAGE_COUNT_ONLY?i=0:e.myCountPreference===u.CountPreference.UNREAD_MENTION_COUNT_ONLY?a=0:i=a=0),e._setGroupChannelUnreadCount(a,i),t.sb.channelHandlers)t.sb.channelHandlers[s].onChannelChanged(e)}});break;case le.CATEGORY_CHANNEL_META_DATA_CHANGED:case le.CATEGORY_CHANNEL_META_COUNTERS_CHANGED:var pe=fe.data.hasOwnProperty("created"),ye=fe.data.hasOwnProperty("updated"),ge=fe.data.hasOwnProperty("deleted");fe.isOpenChannel()?l.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else for(var a in t.sb.channelHandlers){var i=t.sb.channelHandlers[a];fe.category===le.CATEGORY_CHANNEL_META_DATA_CHANGED?(pe&&i.onMetaDataCreated(e,fe.data.created),ye&&i.onMetaDataUpdated(e,fe.data.updated),ge&&i.onMetaDataDeleted(e,fe.data.deleted)):(pe&&i.onMetaCountersCreated(e,fe.data.created),ye&&i.onMetaCountersUpdated(e,fe.data.updated),ge&&i.onMetaCountersDeleted(e,fe.data.deleted))}}):u.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else for(var a in t.sb.channelHandlers){var i=t.sb.channelHandlers[a];fe.category===le.CATEGORY_CHANNEL_META_DATA_CHANGED?(pe&&i.onMetaDataCreated(e,fe.data.created),ye&&i.onMetaDataUpdated(e,fe.data.updated),ge&&i.onMetaDataDeleted(e,fe.data.deleted)):(pe&&i.onMetaCountersCreated(e,fe.data.created),ye&&i.onMetaCountersUpdated(e,fe.data.updated),ge&&i.onMetaCountersDeleted(e,fe.data.deleted))}});break;case le.CATEGORY_CHANNEL_HIDE:case le.CATEGORY_CHANNEL_UNHIDE:u.getChannel(fe.channelUrl,O.INTERNAL_CALL,function(e,n){if(t.sb.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n)R.debug("Discard command",S.command,fe.category);else if(fe.category===le.CATEGORY_CHANNEL_HIDE)for(var a in e.isHidden=!0,fe.data&&(fe.data.hasOwnProperty("allow_auto_unhide")&&(e.hiddenState=fe.data.allow_auto_unhide?u.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:u.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE),fe.data.hasOwnProperty("hide_previous_messages")&&fe.data.hide_previous_messages&&e._setGroupChannelUnreadCount(0,0)),A.hasOwnProperty("ts_message_offset")&&(e._messageOffsetTimestamp=A.ts_message_offset),u.cachedChannels[e.url]=e,t.sb.channelHandlers)t.sb.channelHandlers[a].onChannelHidden(e);else for(var i in e.isHidden=!1,e.hiddenState=u.HiddenState.UNHIDDEN,u.cachedChannels[e.url]=e,t.sb.channelHandlers)t.sb.channelHandlers[i].onChannelChanged(e)})}break;case"USEV":var me=new le(A);switch(me.category){case ce.CATEGORY_USER_BLOCK:case ce.CATEGORY_USER_UNBLOCK:var _e=me.data.blocker.user_id,ve=me.data.blockee.user_id;Object.keys(u.cachedChannels).forEach(function(e){var n=u.cachedChannels[e];try{t.sb.currentUser&&(t.sb.currentUser.userId===_e?n.memberMap[ve].isBlockedByMe=me.category===ce.CATEGORY_USER_BLOCK:t.sb.currentUser.userId===ve&&(n.memberMap[_e].isBlockingMe=me.category===ce.CATEGORY_USER_BLOCK))}catch(e){}});break;case ce.CATEGORY_FRIEND_DISCOVERED:var Ee=me.data.friend_discoveries.map(function(e){return new a(e)});for(var be in this.sb.userEventHandlers)this.sb.userEventHandlers[be].onFriendsDiscovered(Ee)}break;case"LEAV":case"JOIN":case"PONG":case"MTIO":case"TPST":case"TPEN":break;default:R.debug("Discard command",S.command)}}}]),e}(),fe={},he={},pe=function(){function e(t){s(this,e),this.channel=t,this.uploadQueue=[],this.messageQueue=[],this.latestTimestampToSendMessage=0,P.get(this._iid).FileMessageQueue.queueMap[t.url]=this}return u(e,[{key:"_handleMessageQueueUpdated",value:function(e){var t=this;switch(R.debug("fileMessageQueue message queue updated: ",this.messageQueue),e){case"add":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue();break;case"update":case"remove":if(0<this.messageQueue.length){var n=P.get(this._iid).FileMessageQueue,r=this.messageQueue[0];if(r)if(r.state===n.State.UPLOADED){if(r&&r.state===n.State.UPLOADED){for(r.state=n.State.SENDING,0===this.latestTimestampToSendMessage&&(this.latestTimestampToSendMessage=(new Date).getTime()-200);(new Date).getTime()-this.latestTimestampToSendMessage<200;);this.latestTimestampToSendMessage=(new Date).getTime(),this._sendUploadedMessage(r,function(e,a){r.state=n.State.SENT,r.error=e||null,r.response=a||null,t._handleMessageQueueUpdated("update")})}}else r.state===n.State.SENT&&this._finalizeMessage()}}}},{key:"_handleUploadQueueUpdated",value:function(e,t){var n=this;switch(R.debug("fileMessageQueue upload queue updated: ",this.uploadQueue),e){case"add":var r=P.get(this._iid).FileMessageQueue;t.state=r.State.UPLOADING,t.error?(-1<this.messageQueue.map(function(e){return e.requestId}).indexOf(t.requestId)&&(t.state=r.State.SENT,this._handleMessageQueueUpdated("update")),this._finalizeUpload(t.requestId)):this._uploadFile(t,function(e){t.error&&t.state===r.State.SENT||(t.state=r.State.UPLOADED),t.fileInfo=e,n._handleMessageQueueUpdated("update"),n._finalizeUpload(t.requestId)});break;case"update":break;case"remove":this.uploadQueue.length<6&&this._moveFirstPendingMessageToUploadQueue()}}},{key:"_moveFirstPendingMessageToUploadQueue",value:function(){var e=P.get(this._iid).FileMessageQueue,t=this.messageQueue.filter(function(t){return t.state===e.State.PENDING});if(0<t.length){var n=t[0];this.uploadQueue.push(n),this._handleUploadQueueUpdated("add",n)}}},{key:"_sendUploadedMessage",value:function(e,t){var n=P.get(this._iid),r=n.Command,a=n.FileMessage,i=e.fileInfo,s=r.bFile(c(c({},i),{},{requestId:e.requestId,channelUrl:this.channel.url,url:i.file,metaArrays:i.metaArrays})),o=At.getInstance(this._iid),u=w.get(this._iid);o.getConnectionState()!==o.ConnectionState.OPEN&&o.currentUser&&!o.connecting?u.container.apiClient.sendFileMessage(c(c({channelUrl:this.channel.url,isOpenChannel:this.channel.isOpenChannel()},i),{},{fileUrl:i.file,fileName:i.name,fileSize:i.size,fileType:i.type,metaArrays:i.metaArrays}),function(e,n){var r=new a(e?s.getJsonElement():n);e&&(r.requestedMentionUserIds=i.mentionedUserIds),t(e,r)}):o.sendCommand(s,function(e,n){if(o.getErrorFirstCallback()){var r=[e,n];n=r[0],e=r[1]}if(n){var u=new a(s.getJsonElement());u.requestedMentionUserIds=i.mentionedUserIds,t(n,u)}else{var l=new a(e.getJsonElement());t(null,l)}})}},{key:"_uploadFile",value:function(e,t){var n=e.fileInfo,r=e.pendingMessage;if("string"!=typeof n.file&&n.file){var a=P.get(this._iid).FileMessageQueue;w.get(this._iid).container.apiClient.uploadFile(c(c({},n),{},{fileType:n.type,channelUrl:this.channel.url,reqId:r?r.reqId:null}),function(r,s){if(r)e.state=a.State.SENT,e.error=r,e.response=null,t(n);else{var o="object"===i(s)?s:JSON.parse(s);n.file=o.url,n.thumbnailSizes=o.hasOwnProperty("thumbnails")?o.thumbnails:[],n.requireAuth=!!o.hasOwnProperty("require_auth")&&o.require_auth,t(n)}})}else n.thumbnailSizes=[],n.requireAuth=!1,t(n)}},{key:"_finalizeUpload",value:function(e){var t=this.uploadQueue.map(function(e){return e.requestId}).indexOf(e);if(-1<t){var n=this.uploadQueue.splice(t,1);0<n.length&&this._handleUploadQueueUpdated("remove",n[0])}}},{key:"_finalizeMessage",value:function(){var e=this,t=w.get(this._iid).container.isErrorFirstInCallback,n=At.getInstance(this._iid),r=P.get(this._iid),a=r.GroupChannel,i=(r.BaseMessage,r.FileMessageQueue),s=this.messageQueue[0];if(s&&s.state===i.State.SENT){s.state=i.State.DONE;var o=s.response,u=s.error,l=s.fileInfo.callback;if(o&&!u){var c=n.currentUser;if(c&&o._sender&&c.userId===o._sender.userId&&(c.nickname!==o._sender.nickname&&(c.nickname=o._sender.nickname),c.profileUrl!==o._sender.profileUrl&&(c.profileUrl=o._sender.profileUrl)),this.channel.isGroupChannel())return void a.getChannel(this.channel.url,O.INTERNAL_CALL,function(r,a){if(n.getErrorFirstCallback()){var i=[r,a];a=i[0],r=i[1]}if(a)t?l(null,o):l(o,null),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove");else{for(var s in r.lastMessage=o,n.channelHandlers)n.channelHandlers[s].onChannelChanged(r);t?l(a,o):l(o,a),e.messageQueue.shift(),e._handleMessageQueueUpdated("remove")}})}u&&(o=s.pendingMessage)&&(u.code!==I.INVALID_PARAMETER?(o.requestState=n.MessageRequestState.FAILED,o.sendingStatus=n.MessageSendingStatus.FAILED,u.code!==I.FILE_UPLOAD_CANCEL_FAILED&&u.code!==I.REQUEST_CANCELED||(o.sendingStatus=n.MessageSendingStatus.CANCELED),o.requestedMentionUserIds=s.fileInfo.mentionedUserIds,o.errorCode=u.code):o=null),t?l(u,o):l(o,u),this.messageQueue.shift(),this._handleMessageQueueUpdated("remove")}}},{key:"addJob",value:function(e){this.messageQueue.push(e),this._handleMessageQueueUpdated("add")}},{key:"cancelUploadItemByRequestId",value:function(e,t){this._finalizeUpload(e);var n=this.messageQueue.map(function(e){return e.requestId}).indexOf(e);if(-1<n){var r=P.get(this._iid).FileMessageQueue,a=this.messageQueue[n];!a||a.state!==r.State.UPLOADING&&a.state!==r.State.PENDING||(a.state=r.State.SENT,a.response=null,a.error=new I("Uploading has been completed or canceled.",I.FILE_UPLOAD_CANCEL_FAILED),this._handleMessageQueueUpdated("update"));var i=r.uploadRequest[e];if(i)return i.cancel("Upload has been canceled."),t(null,!0),!0;t(new I("Uploading has been completed or canceled.",I.FILE_UPLOAD_CANCEL_FAILED),!1)}else t(new I("Uploading has been completed or canceled.",I.FILE_UPLOAD_CANCEL_FAILED),!1);return!1}}],[{key:"getByChannelUrl",value:function(e){return P.get(this._iid).FileMessageQueue.queueMap[e]}},{key:"create",value:function(e){var t=P.get(this._iid).FileMessageQueue;return t.queueMap.hasOwnProperty(e.url)||(t.queueMap[e.url]=new t(e)),t.queueMap[e.url]}},{key:"delete",value:function(e){var t=P.get(this._iid).FileMessageQueue;t.queueMap.hasOwnProperty(e)&&delete t.queueMap[e]}},{key:"clear",value:function(){he[this._iid]={}}},{key:"State",get:function(){return{PENDING:"pending",UPLOADING:"uploading",UPLOADED:"uploaded",SENDING:"sending",SENT:"sent",DONE:"done"}}},{key:"queueMap",get:function(){return he[this._iid]||(he[this._iid]={}),he[this._iid]}},{key:"uploadRequest",get:function(){return fe[this._iid]||(fe[this._iid]={}),fe[this._iid]}}]),e}();function ye(){s(this,ye),this.channelCustomTypesFilter=[],this.superChannelFilter=Ue.SuperChannelFilter.ALL}function ge(){s(this,ge),this.onReconnectStarted=function(){},this.onReconnectSucceeded=function(){},this.onReconnectFailed=function(){}}function me(){s(this,me),this.onFriendsDiscovered=function(e){},this.onTotalUnreadMessageCountUpdated=function(e,t){}}function _e(){s(this,_e),this.onMessageReceived=function(e,t){},this.onMessageUpdated=function(e,t){},this.onMessageDeleted=function(e,t){},this.onReadReceiptUpdated=function(e){},this.onReactionUpdated=function(e,t){},this.onDeliveryReceiptUpdated=function(e){},this.onTypingStatusUpdated=function(e){},this.onUserJoined=function(e,t){},this.onUserLeft=function(e,t){},this.onOperatorUpdated=function(e,t){},this.onUserEntered=function(e,t){},this.onUserExited=function(e,t){},this.onUserMuted=function(e,t){},this.onUserUnmuted=function(e,t){},this.onUserBanned=function(e,t){},this.onUserUnbanned=function(e,t){},this.onChannelFrozen=function(e){},this.onChannelUnfrozen=function(e){},this.onChannelChanged=function(e){},this.onChannelDeleted=function(e,t){},this.onUserReceivedInvitation=function(e,t,n){},this.onUserDeclinedInvitation=function(e,t,n){},this.onMetaDataCreated=function(e,t){},this.onMetaDataUpdated=function(e,t){},this.onMetaDataDeleted=function(e,t){},this.onMetaCountersCreated=function(e,t){},this.onMetaCountersUpdated=function(e,t){},this.onMetaCountersDeleted=function(e,t){},this.onChannelHidden=function(e){},this.onMentionReceived=function(e,t){},this.onThreadInfoUpdated=function(e,t){}}function ve(e){if(s(this,ve),e){var t=P.get(this._iid),n=t.User,r=t.BaseChannel;this.reader=new n(e.user),this.timestamp=parseInt(e.ts),this.channelUrl=e.hasOwnProperty("channel_url")?String(e.channel_url):"",this.channelType=e.hasOwnProperty("channel_type")?String(e.channel_type):r.CHANNEL_TYPE_GROUP}}pe.Job=function e(t){var n=t.fileInfo,r=t.requestId,a=t.pendingMessage,i=t.state,o=t.error,u=void 0===o?null:o,l=t.response,c=void 0===l?null:l;s(this,e),this.fileInfo=n,this.requestId=r,this.pendingMessage=a,this.state=i||pe.State.PENDING,this.error=u,this.response=c};var Ee=function(){function e(){s(this,e)}return u(e,null,[{key:"create",value:function(){return"".concat(parseInt(1e5*Math.random()),"-").concat((new Date).getTime())}}]),e}(),be={},Ce={},Se=new WeakMap,Oe=new WeakMap,Ae=new WeakMap,Ue=function(){d(t,ue);var e=_(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).channelType=ue.CHANNEL_TYPE_GROUP,r.isDistinct=!1,r.isSuper=!1,r.isBroadcast=!1,r.isPublic=!1,r.unreadMessageCount=0,r.inviter=null,r.members=[],r.memberMap={},r.lastMessage=null,r.memberCount=0,r.joinedMemberCount=0,r.cachedReadReceiptStatus={},r.cachedDeliveryReceiptStatus=null,r.myPushTriggerOption=t.PushTriggerOption.DEFAULT,r.isPushEnabled,r.isHidden=!1,r.hiddenState=t.HiddenState.UNHIDDEN,r.isDiscoverable=!0,r.myLastRead=0,r.messageSurvivalSeconds=-1,r._messageOffsetTimestamp=0,r._cachedLastDeliveredReceipt={sentAt:0,timeout:null},Se.set(m(r),{}),Oe.set(m(r),{start:0,end:0}),Ae.set(m(r),0),n&&r._update(n),r}return u(t,[{key:"_setGroupChannelUnreadCount",value:function(e,t){try{if("number"==typeof e&&0<=e)if("all"===this.myCountPreference||"unread_message_count_only"===this.myCountPreference)if(this.isSuper||this.isBroadcast){var n=w.get(this._iid).container.maxUnreadCountOfSuperGroupChannel;this.unreadMessageCount=n<=e?n:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;"number"==typeof t&&0<=t&&("all"===this.myCountPreference||"unread_mention_count_only"===this.myCountPreference?this.unreadMentionCount=t:this.unreadMentionCount=0)}catch(e){}}},{key:"_update",value:function(e){var t=P.get(this._iid),n=t.BaseChannel,r=t.GroupChannel,a=t.User,s=t.Member;if(this.isAccessCodeRequired=!!e.is_access_code_required&&e.is_access_code_required,this.isDistinct=!!e.is_distinct&&e.is_distinct,this.isPushEnabled=!!e.is_push_enabled&&e.is_push_enabled,this.isHidden=!!e.hasOwnProperty("is_hidden")&&e.is_hidden,this.myPushTriggerOption=e.push_trigger_option?e.push_trigger_option:r.PushTriggerOption.DEFAULT,this.myCountPreference=e.hasOwnProperty("count_preference")?e.count_preference:r.CountPreference.ALL,this.unreadMessageCount=0,this.unreadMentionCount=0,this._setGroupChannelUnreadCount(parseInt(e.unread_message_count),parseInt(e.unread_mention_count)),e.hasOwnProperty("read_receipt"))for(var o in this.cachedReadReceiptStatus={},e.read_receipt){var u=e.read_receipt[o];this.updateReadReceipt(o,parseInt(u))}if(e.hasOwnProperty("delivery_receipt")&&"object"===i(e.delivery_receipt)&&null!==e.delivery_receipt)for(var l in this.cachedDeliveryReceiptStatus||(this.cachedDeliveryReceiptStatus={}),e.delivery_receipt){var c=e.delivery_receipt[l];this.updateDeliveryReceipt(l,parseInt(c))}if(e.hasOwnProperty("user_last_read")&&"number"==typeof e.user_last_read?this.myLastRead=e.user_last_read:this.myLastRead=0,e.hasOwnProperty("members")){this.members=[],this.memberMap={};for(var d=0;d<e.members.length;d++){var f=new s(e.members[d]);this.members.push(f),this.memberMap[f.userId]=f}}this.myMemberState=e.member_state||"none",this.myRole=e.my_role||r.Role.NONE,e.hasOwnProperty("is_muted")?"string"==typeof e.is_muted?this.myMutedState=e.is_muted:"boolean"==typeof e.is_muted?this.myMutedState=e.is_muted?"muted":"unmuted":this.myMutedState="unmuted":this.myMutedState="unmuted",e.hasOwnProperty("member_count")&&(this.memberCount=parseInt(e.member_count)),e.hasOwnProperty("joined_member_count")&&(this.joinedMemberCount=parseInt(e.joined_member_count)),e.hasOwnProperty("last_message")&&"object"===i(e.last_message)&&e.last_message?e.last_message instanceof ie?this.lastMessage=e.last_message:this.lastMessage=n.buildMessage(e.last_message,this):this.lastMessage=null,e.hasOwnProperty("inviter")&&null!==e.inviter&&"object"===i(e.inviter)&&0<Object.keys(e.inviter).length?this.inviter=new a(e.inviter):this.inviter=null,this.invitedAt=e.invited_at||0,e.hasOwnProperty("is_super")&&"boolean"==typeof e.is_super?this.isSuper=e.is_super:this.isSuper=!1,e.hasOwnProperty("is_broadcast")&&"boolean"==typeof e.is_broadcast?this.isBroadcast=e.is_broadcast:this.isBroadcast=!1,e.hasOwnProperty("is_public")&&"boolean"==typeof e.is_public?this.isPublic=e.is_public:this.isPublic=!1,e.hasOwnProperty("hidden_state")?this.hiddenState=e.hidden_state:this.hiddenState=r.HiddenState.UNHIDDEN,e.hasOwnProperty("is_discoverable")&&"boolean"==typeof e.is_discoverable?this.isDiscoverable=e.is_discoverable:this.isDiscoverable=this.isPublic,e.hasOwnProperty("ts_message_offset")&&(this._messageOffsetTimestamp=e.ts_message_offset),e.hasOwnProperty("message_survival_seconds")&&"number"==typeof e.message_survival_seconds&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"addMember",value:function(e){if(!this.isSuper&&!this.isBroadcast){var t=P.get(this._iid).Member,n=this.removeMember(e);n&&n.state===t.JOINED&&(e.state=t.JOINED),this.memberMap[e.userId]=e,this.members.push(e),this.memberCount++,this.updateReadReceipt(e.userId,0),this.updateDeliveryReceipt(e.userId,0)}}},{key:"removeMember",value:function(e){var t=null;if(!this.isSuper&&!this.isBroadcast&&this.memberMap.hasOwnProperty(e.userId)){delete this.memberMap[e.userId];for(var n=0;n<this.members.length;n++){var r=this.members[n];if(r.userId===e.userId){t=r,this.members.splice(n,1);break}}this.memberCount--}return t}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"isIdentical",value:function(e){return e&&this.url===e.url}},{key:"isEqual",value:function(e){return x.deepEqual(this,e)}},{key:"createMemberListQuery",value:function(){return new(P.get(this._iid).MemberListQuery)(this.url)}},{key:"createBannedUserListQuery",value:function(){return new(P.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:this.isOpenChannel()})}},{key:"refresh",value:function(e){return P.get(this._iid).GroupChannel.getChannelWithoutCache(this.url,e)}},{key:"updateChannel",value:function(){var e=this,t=q.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=P.get(this._iid),a=r.GroupChannel,i=r.GroupChannelParams;if(t[0]instanceof i&&1===t.length)return ne(this._iid,function(n){var r=t[0];r.channelUrl=e.url,r._validate()?w.get(e._iid).container.apiClient.updateGroupChannel(c(c({},r),{},{operatorUserIds:r.operatorUserIds}),function(e,t){var r=null;e||(r=a.upsert(t)),n(e,r)}):n(q.error,null)},n);if(3===t.length){var s=new i;return s.channelUrl=this.url,s.name=t[0],"string"==typeof t[1]?s.coverUrl=t[1]:s.coverImage=t[1],s.data=t[2],this.updateChannel(s,n)}if(4===t.length){var o=new i;return o.channelUrl=this.url,o.isDistinct=t[0],o.name=t[1],"string"==typeof t[1]?o.coverUrl=t[2]:o.coverImage=t[2],o.data=t[3],this.updateChannel(o,n)}if(5!==t.length)return ne(this._iid,function(e){return e(q.error,null)},n);var u=new i;return u.channelUrl=this.url,u.isDistinct=t[0],u.name=t[1],"string"==typeof t[2]?u.coverUrl=t[2]:u.coverImage=t[2],u.data=t[3],u.customType=t[4],this.updateChannel(u,n)}},{key:"invite",value:function(e,t){var n,r=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return 0<e.length&&e.every(function(e){return!!e.userId&&"string"==typeof e.userId})}}),new q({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?ne(this._iid,function(e){return e(q.error,null)},t):this.inviteWithUserIds(e.map(function(e){return e.userId}),t)}},{key:"inviteWithUserIds",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.inviteToGroupChannel({channelUrl:r.url,userIds:e},function(e,n){var a=null;e||(a=P.get(r._iid).GroupChannel.upsert(n)),t(e,a)})},t)}},{key:"acceptInvitation",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string",optional:!0,defaultValue:null}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.acceptInvitation({channelUrl:r.url,accessCode:e},function(e,n){var a=null;e||((a=P.get(r._iid).GroupChannel.upsert(n)).myMemberState="joined"),t(e,a)})},t)}},{key:"declineInvitation",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.declineInvitation({channelUrl:t.url},function(n,r){var a=null;if(!n){var i=P.get(t._iid).GroupChannel;(a=i.upsert(r)).myMemberState="none",t.isPublic||i.removeCachedChannel(t.url)}e(n,a)})},e)}},{key:"join",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string",optional:!0,defaultValue:null}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.joinGroupChannel({channelUrl:r.url,accessCode:e},function(e,n){var a=null;e||((a=P.get(r._iid).GroupChannel.upsert(n)).myMemberState="joined"),t(e,a)})},t)}},{key:"leave",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.leaveGroupChannel({channelUrl:t.url},function(t,n){return e(t,null)})},e)}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var a,i=this,s=E(q.parse(arguments,[new q({type:"string"}),new q({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return-1<=e}}),new q({type:"string",optional:!0,defaultValue:""}),new q({type:"callback"})]),5);return a=s[0],e=s[1],t=s[2],n=s[3],r=s[4],ne(this._iid,function(r){a?r(a,null):w.get(i._iid).container.apiClient.muteUser({channelUrl:i.url,userId:e,description:n,seconds:t,isGroupChannel:!0},function(e,t){r(e,null)})},r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string"}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.unmuteUser({channelUrl:r.url,userId:e,isGroupChannel:!0},function(e,n){t(e,null)})},t)}},{key:"banUser",value:function(e,t,n,r){return this.banUserWithUserId(e?e.userId:null,t,n,r)}},{key:"banUserWithUserId",value:function(e,t,n,r){var a,i=this,s=E(q.parse(arguments,[new q({type:"string"}),new q({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return-1<=e}}),new q({type:"string"}),new q({type:"callback"})]),5);return a=s[0],e=s[1],t=s[2],n=s[3],r=s[4],ne(this._iid,function(r){a?r(a,null):w.get(i._iid).container.apiClient.banUser({channelUrl:i.url,userId:e,description:n,seconds:t,isGroupChannel:!0},function(e,t){r(e,null)})},r)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string"}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.unbanUser({channelUrl:r.url,userId:e,isGroupChannel:!0},function(e,n){t(e,null)})},t)}},{key:"updateJoinedMemberCount",value:function(){if(!this.isSuper&&!this.isBroadcast){var e=P.get(this._iid).Member;this.joinedMemberCount=this.members.filter(function(t){return t.state===e.JOINED}).length}}},{key:"setLatestMemberCount",value:function(e,t,n){"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&n>=Ae.get(this)&&(Ae.set(this,n),this.memberCount=e,this.joinedMemberCount=t)}},{key:"hide",value:function(e,t,n){var r,a=this,i=E(q.parse(arguments,[new q({type:"boolean",optional:!0,defaultValue:!1}),new q({type:"boolean",optional:!0,defaultValue:!0}),new q({type:"callback"})]),4);return r=i[0],e=i[1],t=i[2],n=i[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.hideGroupChannel({channelUrl:a.url,hidePreviousMessages:e,allowAutoUnhide:t},function(r,i){if(!r){var s=P.get(a._iid).GroupChannel;a.isHidden=!0,a.hiddenState=t?s.HiddenState.HIDDEN_ALLOW_AUTO_UNHIDE:s.HiddenState.HIDDEN_PREVENT_AUTO_UNHIDE,e&&a._setGroupChannelUnreadCount(0,0),i.hasOwnProperty("ts_message_offset")&&(a._messageOffsetTimestamp=i.ts_message_offset),s.cachedChannels[a.url]=a}n(r,i)})},n)}},{key:"unhide",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.unhideGroupChannel({channelUrl:t.url},function(n,r){if(!n){var a=P.get(t._iid).GroupChannel;t.isHidden=!1,t.hiddenState=a.HiddenState.UNHIDDEN,a.cachedChannels[t.url]=t}e(n,r)})},e)}},{key:"freeze",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!0},function(n,r){n||P.get(t._iid).GroupChannel.upsert(r),e(n,null)})},e)}},{key:"unfreeze",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.freeze({channelUrl:t.url,isGroupChannel:!0,freezing:!1},function(n,r){n||P.get(t._iid).GroupChannel.upsert(r),e(n,null)})},e)}},{key:"delete",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.deleteGroupChannel({channelUrl:t.url},function(n,r){n||P.get(t._iid).GroupChannel.removeCachedChannel(t.url),e(n,r)})},e)}},{key:"markAsRead",value:function(){var e=this,t=P.get(this._iid).Command,n=At.getInstance(this._iid),r=t.bRead({channelUrl:this.url});n.sendCommand(r,function(t,r){if(n.getErrorFirstCallback()){var a=[t,r];r=a[0],t=a[1]}if(!r&&n.currentUser&&(e.updateReadReceipt(n.currentUser.userId,t.getJsonElement().ts),0<e.unreadMessageCount||0<e.unreadMentionCount))for(var i in e._setGroupChannelUnreadCount(0,0),n.channelHandlers)n.channelHandlers[i].onChannelChanged(e)})}},{key:"getUnreadMemberCount",value:function(e){var t=At.getInstance(this._iid);if(e instanceof ie&&!e.isAdminMessage()&&t.currentUser&&!this.isSuper&&!this.isBroadcast){for(var n=0,r=e.createdAt,a=this.members,i=0;i<a.length;i++){var s=a[i];t.currentUser.userId===s.userId||e.sender&&e.sender.userId===s.userId||(this.cachedReadReceiptStatus[s.userId]||0)<r&&n++}return n}return 0}},{key:"getReadReceipt",value:function(e){return this.getUnreadMemberCount(e)}},{key:"markAsDelivered",value:function(){function e(){var e=At.getInstance(t._iid),n=e.currentUser?e.currentUser.userId:null;w.get(t._iid).container.apiClient.markAsDelivered({channelUrl:t.url,userId:n},function(e,r){if(e)R.debug(e);else{var a=r.hasOwnProperty("ts")?r.ts:0;t.updateDeliveryReceipt(n,a)}})}var t=this,n=this._cachedLastDeliveredReceipt;n&&Date.now()-n.sentAt<1e3?(n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(function(){n.sentAt=Date.now(),e()},n.sentAt+1e3-Date.now())):(n.sentAt=Date.now(),e())}},{key:"getUndeliveredMemberCount",value:function(e){var t=At.getInstance(this._iid);if(this.cachedDeliveryReceiptStatus&&e instanceof ie&&!e.isAdminMessage()&&t.currentUser&&!this.isSuper&&!this.isBroadcast){var n,r=e.createdAt,a=0,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=C(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}(this.members);try{for(i.s();!(n=i.n()).done;){var s=n.value;t.currentUser.userId===s.userId||e.sender&&e.sender.userId===s.userId||this.cachedDeliveryReceiptStatus[s.userId]<r&&a++}}catch(e){i.e(e)}finally{i.f()}return a}return 0}},{key:"getDeliveryReceipt",value:function(e){return this.getUndeliveredMemberCount(e)}},{key:"getReadMembers",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t,r=At.getInstance(this._iid);if(r.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof ie&&!e.isAdminMessage()){for(var a=[],i=0;i<this.members.length;i++){var s=this.members[i];(n||s.userId!==r.currentUser.userId&&s.userId!==e.sender.userId)&&(this.cachedReadReceiptStatus[s.userId]||0)>=e.createdAt&&a.push(s)}return a}return[]}},{key:"getUnreadMembers",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t,r=At.getInstance(this._iid);if(r.currentUser&&!this.isSuper&&!this.isBroadcast&&e instanceof ie&&!e.isAdminMessage()){for(var a=[],i=0;i<this.members.length;i++){var s=this.members[i];(n||s.userId!==r.currentUser.userId&&s.userId!==e.sender.userId)&&(this.cachedReadReceiptStatus[s.userId]||0)<e.createdAt&&a.push(s)}return a}return[]}},{key:"getReadStatus",value:function(e){var t=this,n=0<arguments.length&&void 0!==e&&e,r=At.getInstance(this._iid);if(!r.currentUser||this.isSuper||this.isBroadcast)return{};function a(e){if(!n&&e===r.currentUser.userId)return"continue";var a=t.cachedReadReceiptStatus[e],s=t.members.filter(function(t){return t.userId===e});i[e]={user:0<s.length?s[0]:null,last_seen_at:parseInt(a)}}var i={};for(var s in this.cachedReadReceiptStatus)a(s);return i}},{key:"updateReadReceipt",value:function(e,t){var n=this.cachedReadReceiptStatus[e];if(!n||n<t){this.cachedReadReceiptStatus[e]=t;var r=At.getInstance(this._iid);r.currentUser&&e===r.currentUser.userId&&(this.myLastRead=t)}}},{key:"updateDeliveryReceipt",value:function(e,t){if(this.cachedDeliveryReceiptStatus)if(this.cachedDeliveryReceiptStatus.hasOwnProperty(e)){var n=this.cachedDeliveryReceiptStatus[e];(!n||n<t)&&(this.cachedDeliveryReceiptStatus[e]=t)}else this.cachedDeliveryReceiptStatus[e]=t}},{key:"startTyping",value:function(){var e=At.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||9e3<n)&&(n=1e3);var r=Oe.get(this);if(t-r.start>=n){r.end=0,r.start=t;var a=P.get(this._iid).Command.bTypeStart({channelUrl:this.url,time:r.start});e.sendCommand(a,null)}}},{key:"endTyping",value:function(){var e=At.getInstance(this._iid),t=(new Date).getTime(),n=e.Options.typingIndicatorThrottle;("number"!=typeof n||n<1e3||9e3<n)&&(n=1e3);var r=Oe.get(this);if(t-r.end>=n){r.start=0,r.end=t;var a=P.get(this._iid).Command.bTypeEnd({channelUrl:this.url,time:r.end});e.sendCommand(a,null)}}},{key:"invalidateTypingStatus",value:function(){var e=Se.get(this),t=(new Date).getTime(),n=!1;for(var r in e)1e4<=t-e[r]&&(delete e[r],n=!0);return n}},{key:"getTypingMembers",value:function(){var e=Se.get(this),t=[];for(var n in e){var r=this.memberMap[n];r&&t.push(r)}return t}},{key:"updateTypingStatus",value:function(e,t){var n=Se.get(this);t?n[e.userId]=(new Date).getTime():delete n[e.userId]}},{key:"isTyping",value:function(){var e=Se.get(this);return 0!==Object.keys(e).length}},{key:"registerScheduledUserMessage",value:function(e,t){var n,r=this,a=P.get(this._iid),i=a.ScheduledUserMessage,s=a.ScheduledUserMessageParams,o=E(q.parse(arguments,[new q({type:s,constraint:function(e){return"string"==typeof e.message&&"string"==typeof e._getScheduleString()}}),new q({type:"callback"})]),3);return n=o[0],e=o[1],t=o[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.registerScheduledUserMessage({groupChannelParams:e,channelUrl:r.url,isOpenChannel:!1},function(e,n){var a=null;if(!e){a=new i(n);var s=At.getInstance(r._iid).currentUser;s&&a._sender&&s.userId===a._sender.userId&&(s.nickname=a._sender.nickname,s.profileUrl=a._sender.profileUrl,s.metaData=a._sender.metaData)}t(e,a)})},t)}},{key:"getPushPreference",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.getMyPushTriggerOption({channelUrl:t.url},function(n,r){var a=null;if(!n){try{a=r.enable}catch(n){a=!1}t.isPushEnabled=a}e&&e(n,a)})},e)}},{key:"setPushPreference",value:function(e,t){var n=this;return ne(this._iid,function(t){var r=P.get(n._iid).GroupChannel;w.get(n._iid).container.apiClient.setMyPushTriggerOption({channelUrl:n.url,enable:e},function(e,a){e||(n.isPushEnabled=a.enable,n.isPushEnabled||(n.myPushTriggerOption=r.PushTriggerOption.OFF)),t(e,a)})},t)}},{key:"getMyPushTriggerOption",value:function(e){var n=this;return ne(this._iid,function(e){w.get(n._iid).container.apiClient.getMyPushTriggerOption({channelUrl:n.url},function(r,a){var i=null;if(!r){try{i=a.push_trigger_option||t.PushTriggerOption.DEFAULT}catch(r){R.debug(r)}n.myPushTriggerOption=i}e(r,i)})},e)}},{key:"setMyPushTriggerOption",value:function(e,t){var n,r=this,a=P.get(this._iid).GroupChannel,i=E(q.parse(arguments,[new q({type:a.PushTriggerOption}),new q({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.setMyPushTriggerOption({channelUrl:r.url,pushTriggerOption:e},function(e,n){var a=null;if(!e){try{a=n.push_trigger_option}catch(e){R.debug(e)}r.myPushTriggerOption=a}t(e,a)})},t)}},{key:"setMyCountPreference",value:function(e,t){var n,r=this,a=P.get(this._iid).GroupChannel,i=E(q.parse(arguments,[new q({type:a.CountPreference}),new q({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.setMyCountPreference({channelUrl:r.url,countPreference:e},function(e,n){var i=null;e||(i=r.myCountPreference=n.count_preference,r._setGroupChannelUnreadCount(r.unreadMessageCount,r.unreadMentionCount),a.cachedChannels[r.url]=r),t(e,i)})},t)}},{key:"resetMyHistory",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.resetMyHistory({channelUrl:t.url},function(n,r){if(!n&&r.hasOwnProperty("ts_message_offset")){var a=P.get(t._iid).GroupChannel;t._messageOffsetTimestamp=r.ts_message_offset,a.cachedChannels[t.url]=t}e(n,r)})},e)}},{key:"messageOffsetTimestamp",get:function(){return this._messageOffsetTimestamp}}],[{key:"buildFromSerializedData",value:function(e){var t,n=P.get(this._iid),r=n.User,a=n.Member,s=n.GroupChannel,o=n.BaseMessage,u=n.UserMessage,l=n.FileMessage,d=n.AdminMessage,f=X.deserialize(e);return new s({channel_url:f.url,name:f.name,cover_url:f.coverUrl,data:f.data,custom_type:f.customType,invited_at:f.invitedAt,created_at:f.createdAt/1e3,is_access_code_required:f.isAccessCodeRequired,is_distinct:f.isDistinct,is_super:f.isSuper,is_broadcast:f.isBroadcast,is_public:f.isPublic,is_discoverable:f.isDiscoverable,freeze:f.isFrozen,is_ephemeral:f.isEphemeral,unread_message_count:f.unreadMessageCount,unread_mention_count:f.unreadMentionCount,is_push_enabled:f.isPushEnabled,push_trigger_option:f.myPushTriggerOption,count_preference:f.myCountPreference,is_hidden:f.isHidden,hidden_state:f.hiddenState,member_count:f.memberCount,joined_member_count:f.joinedMemberCount,member_state:f.myMemberState,my_role:f.myRole,is_muted:f.myMutedState,user_last_read:f.myLastRead,ts_message_offset:f.messageOffsetTimestamp,message_survival_seconds:f.messageSurvivalSeconds,read_receipt:f.cachedReadReceiptStatus,delivery_receipt:f.cachedDeliveryReceiptStatus,members:f.members.map(function(e){return a.objectify(c({user:e},e))}),last_message:null!=(t=f.lastMessage)&&"object"===i(t)?t.messageType===o.MESSAGE_TYPE_USER?new u(u.objectify(c(c({},t),{},{channel:{url:t.channelUrl,channelType:t.channelType},user:t.sender,mentionedUsers:t.mentionedUsers}))):t.messageType===o.MESSAGE_TYPE_FILE?new l(l.objectify(c(c({},t),{},{channel:{url:t.channelUrl,channelType:t.channelType},user:t.sender,mentionedUsers:t.mentionedUsers}))):new d(d.objectify(c(c({},t),{},{channel:{url:t.channelUrl,channelType:t.channelType},mentionedUsers:t.mentionedUsers}))):null,inviter:null!==f.inviter&&void 0!==f.inviter&&"object"===i(f.inviter)?r.objectify(f.inviter):null})}},{key:"upsert",value:function(e){var t=P.get(this._iid).GroupChannel,n=new t(e);if(t.cachedChannels.hasOwnProperty(n.url)){if(n.isEphemeral){var r=t.cachedChannels[n.url];e.last_message=r.lastMessage,e.unread_message_count=r.unreadMessageCount}t.cachedChannels[n.url].update(e)}else t.cachedChannels[n.url]=n;return t.cachedChannels[n.url]}},{key:"removeCachedChannel",value:function(e){var t=P.get(this._iid),n=t.GroupChannel,r=t.FileMessageQueue;n.cachedChannels[e]&&delete n.cachedChannels[e],r.delete(e)}},{key:"clearCache",value:function(){be[this._iid]={},P.get(this._iid).FileMessageQueue.clear()}},{key:"getChannel",value:function(e,t){var n,r,a=E(q.parse(arguments,[new q({type:"string"}),new q({type:"string",optional:!0,nullable:!0,defaultValue:null}),new q({type:"callback"})]),4);if(n=a[0],e=a[1],r=a[2],t=a[3],n)return ne(this._iid,function(e){e(n,null)},t);var i=P.get(this._iid).GroupChannel;return i.cachedChannels[e]?ne(this._iid,function(t){t(null,i.cachedChannels[e])},t):i.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n,r,a=this,i=E(q.parse(arguments,[new q({type:"string"}),new q({type:"string",optional:!0,nullable:!0,defaultValue:null}),new q({type:"callback"})]),4);return n=i[0],e=i[1],r=i[2],t=i[3],ne(this._iid,function(t){n?t(n,null):w.get(a._iid).container.apiClient.getGroupChannel({channelUrl:e,internalCall:r,showMember:!0},function(e,n){var r=null;e||(r=a.upsert(n)),t(e,r)})},t)}},{key:"createDistinctChannelIfNotExist",value:function(e,t){var n,r=this,a=P.get(this._iid).GroupChannelParams,i=E(q.parse(arguments,[new q({type:a,constraint:function(e){return e._validate()}}),new q({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],ne(this._iid,function(t){n?t(n,null):(e.isPublic||(e.accessCode=null),w.get(r._iid).container.apiClient.createGroupChannel(c(c({},e),{},{isDistinct:!0}),function(e,n){var a=null;if(!e){var i=P.get(r._iid).GroupChannel;a={channel:new i(n),isCreated:n.is_created},i.cachedChannels[a.channel.url]=a.channel}t(e,a)}))},t)}},{key:"createChannel",value:function(){var e=this,t=q.toArray(arguments),n=void 0;"function"==typeof t[t.length-1]&&(n=t.pop());var r=P.get(this._iid),a=r.GroupChannel,i=r.GroupChannelParams;if(t[0]instanceof i&&1===t.length)return ne(this._iid,function(n){var r=t[0];r.isPublic||(r.accessCode=null),r._validate()?w.get(e._iid).container.apiClient.createGroupChannel(r,function(e,t){var r=null;e||(r=new a(t),a.cachedChannels[r.url]=r),n(e,r)}):n(q.error,null)},n);if(Array.isArray(t[0])){var s=new i;switch(t.length){case 1:s.addUsers(t[0]);break;case 2:s.addUsers(t[0]),s.isDistinct=t[1];break;case 3:s.addUsers(t[0]),s.isDistinct=t[1],s.customType=t[2];break;case 5:s.addUsers(t[0]),s.isDistinct=t[1],s.name=t[2],"string"==typeof t[3]?s.coverUrl=t[3]:s.coverImage=t[3],s.data=t[4];break;case 6:s.addUsers(t[0]),s.isDistinct=t[1],s.name=t[2],"string"==typeof t[3]?s.coverUrl=t[3]:s.coverImage=t[3],s.data=t[4],s.customType=t[5];break;default:return ne(this._iid,function(e){return e(q.error,null)},n)}return n?a.createChannel(s,n):a.createChannel(s)}return ne(this._iid,function(e){return e(q.error,null)},n)}},{key:"createChannelWithUserIds",value:function(){var e=q.toArray(arguments),t=void 0;"function"==typeof e[e.length-1]&&(t=e.pop());var n=P.get(this._iid),r=n.GroupChannel,a=new n.GroupChannelParams;switch(e.length){case 1:a.addUserIds(e[0]);break;case 2:a.addUserIds(e[0]),a.isDistinct=e[1];break;case 3:a.addUserIds(e[0]),a.isDistinct=e[1],a.customType=e[2];break;case 5:a.addUserIds(e[0]),a.isDistinct=e[1],a.name=e[2],"string"==typeof e[3]?a.coverUrl=e[3]:a.coverImage=e[3],a.data=e[4];break;case 6:a.addUserIds(e[0]),a.isDistinct=e[1],a.name=e[2],"string"==typeof e[3]?a.coverUrl=e[3]:a.coverImage=e[3],a.data=e[4],a.customType=e[5];break;default:return ne(this._iid,function(e){return e(q.error,null)},t)}return r.createChannel(a,t)}},{key:"createMyGroupChannelListQuery",value:function(){return new(P.get(this._iid).GroupChannelListQuery)}},{key:"createPublicGroupChannelListQuery",value:function(){return new(P.get(this._iid).PublicGroupChannelListQuery)}},{key:"getChannelCount",value:function(e,t){return At.getInstance(this._iid).getGroupChannelCount(e,t)}},{key:"getUnreadItemCount",value:function(e,t){return At.getInstance(this._iid).getUnreadItemCount(e,t)}},{key:"getTotalUnreadMessageCount",value:function(){var e=q.toArray(arguments),t="function"==typeof e[e.length-1]?e.pop():null,n=At.getInstance(this._iid);return n.getTotalUnreadMessageCount.apply(n,b(e).concat([t]))}},{key:"getTotalUnreadChannelCount",value:function(e){return At.getInstance(this._iid).getTotalUnreadChannelCount(e)}},{key:"MemberStateFilter",get:function(){return{ALL:"all",JOINED:"joined_only",INVITED:"invited_only",INVITED_BY_FRIEND:"invited_by_friend",INVITED_BY_NON_FRIEND:"invited_by_non_friend"}}},{key:"PushTriggerOption",get:function(){return{DEFAULT:"default",ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"CountPreference",get:function(){return{ALL:"all",UNREAD_MESSAGE_COUNT_ONLY:"unread_message_count_only",UNREAD_MENTION_COUNT_ONLY:"unread_mention_count_only",OFF:"off"}}},{key:"HiddenState",get:function(){return{UNHIDDEN:"unhidden",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"PublicChannelFilter",get:function(){return{ALL:"all",PUBLIC:"public",PRIVATE:"private"}}},{key:"SuperChannelFilter",get:function(){return{ALL:"all",SUPER:"super",NON_SUPER:"nonsuper"}}},{key:"UnreadChannelFilter",get:function(){return{ALL:"all",UNREAD_MESSAGE:"unread_message"}}},{key:"HiddenChannelFilter",get:function(){return{UNHIDDEN:"unhidden_only",HIDDEN:"hidden_only",HIDDEN_ALLOW_AUTO_UNHIDE:"hidden_allow_auto_unhide",HIDDEN_PREVENT_AUTO_UNHIDE:"hidden_prevent_auto_unhide"}}},{key:"Role",get:function(){return{OPERATOR:"operator",NONE:"none"}}},{key:"UnreadItemKey",get:function(){return{GROUP_CHANNEL_UNREAD_MENTION_COUNT:"group_channel_unread_mention_count",NONSUPER_UNREAD_MENTION_COUNT:"non_super_group_channel_unread_mention_count",SUPER_UNREAD_MENTION_COUNT:"super_group_channel_unread_mention_count",GROUP_CHANNEL_UNREAD_MESSAGE_COUNT:"group_channel_unread_message_count",NONSUPER_UNREAD_MESSAGE_COUNT:"non_super_group_channel_unread_message_count",SUPER_UNREAD_MESSAGE_COUNT:"super_group_channel_unread_message_count",GROUP_CHANNEL_INVITATION_COUNT:"group_channel_invitation_count",NONSUPER_INVITATION_COUNT:"non_super_group_channel_invitation_count",SUPER_INVITATION_COUNT:"super_group_channel_invitation_count"}}},{key:"cachedChannels",get:function(){return be[this._iid]||(be[this._iid]={}),be[this._iid]}},{key:"markAsReadAllLastSentAt",get:function(){return Ce[this._iid]||0},set:function(e){Ce[this._iid]=e}}]),t}(),we=function(){d(t,se);var e=_(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).state="",r.role="",r.isBlockedByMe=!1,r.isBlockingMe=!1,n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){this.state=e.state,this.role=e.role||Ue.Role.NONE,e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me),e.hasOwnProperty("is_blocking_me")&&(this.isBlockingMe=e.is_blocking_me)}},{key:"parse",value:function(e){this._update(e)}}],[{key:"objectify",value:function(e){var t=P.get(this._iid).User,n=e.user,r=e.state,a=e.role,i=void 0===a?"":a,s=e.isBlockedByMe,o=void 0!==s&&s,u=e.isBlockingMe,l=void 0!==u&&u,c=t.objectify(n);return c.state=r,c.role=i,c.is_blocked_by_me=o,c.is_blocking_me=l,c}},{key:"build",value:function(e,t,n,r,a){var i=P.get(this._iid).User;return this.objectify({user:new i(e),state:t,role:n,isBlockedByMe:r,isBlockingMe:a})}},{key:"buildFromSerializedData",value:function(e){var t=P.get(this._iid).Member,n=X.deserialize(e);return new t(t.objectify(c({user:n},n)))}},{key:"JOINED",get:function(){return"joined"}},{key:"INVITED",get:function(){return"invited"}}]),t}(),Ie=function(){d(t,se);var e=_(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).isBlockedByMe=!1,n&&r._update(n),r}return u(t,[{key:"parse",value:function(e){this._update(e)}},{key:"_update",value:function(e){e.hasOwnProperty("is_blocked_by_me")&&(this.isBlockedByMe=e.is_blocked_by_me)}}],[{key:"objectify",value:function(e){var t=P.get(this._iid).User,n=e.user,r=e.isBlockedByMe,a=void 0!==r&&r,i=t.objectify(n);return i.is_blocked_by_me=a,i}},{key:"build",value:function(e,t){var n=P.get(this._iid).User;return this.objectify({user:new n(e),isBlockedByMe:t})}},{key:"buildFromSerializedData",value:function(e){var t=P.get(this._iid).Sender,n=X.deserialize(e);return new t(t.objectify(c({user:n},n)))}}]),t}(),Me=function(){function e(t){s(this,e),this.emojiHash=null,this.emojiCategories=null,t&&this._update(t)}return u(e,[{key:"_update",value:function(e){var t=P.get(this._iid).EmojiCategory;this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map(function(e){return new t(e)}):[]}}]),e}(),Te=function(){function e(t){s(this,e),this.id=null,this.name=null,this.url=null,this.emojis=null,t&&this._update(t)}return u(e,[{key:"_update",value:function(e){var t=P.get(this._iid).Emoji;this.id=e.id||0,this.name=e.name||"",this.url=e.url||"",this.emojis=e.emojis?e.emojis.map(function(e){return new t(e)}):[]}}]),e}(),Ne=function(){function e(t){s(this,e),this.key=null,this.url=null,t&&this._update(t)}return u(e,[{key:"_update",value:function(e){this.key=e.key,this.url=e.url}}]),e}(),Re={},ke={},Pe=function(){d(t,ue);var e=_(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).channelType=ue.CHANNEL_TYPE_OPEN,r.participantCount=0,r.operators=[],n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){var t=P.get(this._iid).User;e.hasOwnProperty("participant_count")&&(this.participantCount=parseInt(e.participant_count)),e.hasOwnProperty("operators")&&Array.isArray(e.operators)&&(this.operators=e.operators.map(function(e){return new t(e)}))}},{key:"parse",value:function(e){this._update(e)}},{key:"update",value:function(e){this.__update(e),this._update(e)}},{key:"createParticipantListQuery",value:function(){return new(P.get(this._iid).ParticipantListQuery)({channelUrl:this.url})}},{key:"createMutedUserListQuery",value:function(){return new(P.get(this._iid).MutedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"createBannedUserListQuery",value:function(){return new(P.get(this._iid).BannedUserListQuery)({channelUrl:this.url,isOpenChannel:!0})}},{key:"isOperator",value:function(e){return!!e&&this.isOperatorWithUserId(e.userId)}},{key:"isOperatorWithUserId",value:function(e){return-1<this.operators.map(function(e){return e.userId}).indexOf(e)}},{key:"refresh",value:function(e){return P.get(this._iid).OpenChannel.getChannelWithoutCache(this.url,e)}},{key:"enter",value:function(e){var t=this;return ne(this._iid,function(e){var n=P.get(t._iid).Command.bEnter({channelUrl:t.url}),r=At.getInstance(t._iid);r.sendCommand(n,function(n,a){if(r.getErrorFirstCallback()){var i=[n,a];a=i[0],n=i[1]}a?(a=a?new I(a.message,a.code):null,e(a,null)):(P.get(t._iid).OpenChannel.enteredChannels[t.url]=t).refresh(function(){return e(null,null)})})},e)}},{key:"exit",value:function(e){var t=this;return ne(this._iid,function(e){var n=P.get(t._iid),r=n.Command,a=n.FileMessageQueue,i=r.bExit({channelUrl:t.url}),s=At.getInstance(t._iid);s.sendCommand(i,function(n,r){if(s.getErrorFirstCallback()){var i=[n,r];r=i[0],n=i[1]}r?(r=r?new I(r.message,r.code):null,e(r,null)):(delete P.get(t._iid).OpenChannel.enteredChannels[t.url],a.delete(t.url),e(null,null))})},e)}},{key:"updateChannel",value:function(e,t,n,r,a,i){var s,o=this,u=E(q.parse(arguments,[new q({type:"string",nullable:!0}),new q({type:["string","file"],nullable:!0}),new q({type:"string",nullable:!0}),new q({type:"array",nullable:!0,optional:!0,defaultValue:null,constraint:function(e){return e.map(function(e){return"string"==typeof e})}}),new q({type:"string",nullable:!0,optional:!0}),new q({type:"callback"})]),7);return s=u[0],e=u[1],t=u[2],n=u[3],r=u[4],a=u[5],i=u[6],ne(this._iid,function(i){s?i(s,null):w.get(o._iid).container.apiClient.updateOpenChannel({channelUrl:o.url,name:e,coverUrlOrImage:t,data:n,operatorUserIds:r,customType:a},function(e,t){var n=null;e||(n=P.get(o._iid).OpenChannel.upsert(t)),i(e,n)})},i)}},{key:"updateChannelWithOperatorUserIds",value:function(){var e=q.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.updateChannel.apply(this,b(e).concat([t]));default:return ne(this._iid,function(e){return e(q.error,null)},t)}}},{key:"muteUser",value:function(e,t,n,r){return this.muteUserWithUserId(e?e.userId:null,t,n,r)}},{key:"muteUserWithUserId",value:function(e,t,n,r){var a,i=this,s=E(q.parse(arguments,[new q({type:"string"}),new q({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return-1<=e}}),new q({type:"string",optional:!0,defaultValue:""}),new q({type:"callback"})]),5);return a=s[0],e=s[1],t=s[2],n=s[3],r=s[4],ne(this._iid,function(r){a?r(a,null):w.get(i._iid).container.apiClient.muteUser({channelUrl:i.url,userId:e,description:n,seconds:t,isGroupChannel:!1},function(e,t){r(e,null)})},r)}},{key:"unmuteUser",value:function(e,t){return this.unmuteUserWithUserId(e?e.userId:null,t)}},{key:"unmuteUserWithUserId",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string"}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.unmuteUser({channelUrl:r.url,userId:e,isGroupChannel:!1},function(e,n){t(e,null)})},t)}},{key:"banUser",value:function(e,t,n){return this.banUserWithUserId(e?e.userId:null,t,n)}},{key:"banUserWithUserId",value:function(e,t,n){var r,a=this,i=E(q.parse(arguments,[new q({type:"string"}),new q({type:"number",optional:!0,defaultValue:-1,constraint:function(e){return-1<=e}}),new q({type:"callback"})]),4);return r=i[0],e=i[1],t=i[2],n=i[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.banUser({channelUrl:a.url,userId:e,description:null,seconds:t,isGroupChannel:!1},function(e,t){n(e,null)})},n)}},{key:"unbanUser",value:function(e,t){return this.unbanUserWithUserId(e?e.userId:null,t)}},{key:"unbanUserWithUserId",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string"}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.unbanUser({channelUrl:r.url,userId:e,isGroupChannel:!1},function(e,n){t(e,null)})},t)}},{key:"delete",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.deleteOpenChannel({channelUrl:t.url},function(n,r){n||(delete P.get(t._iid).OpenChannel.cachedChannels[t.url],P.get(t._iid).FileMessageQueue.delete(t.url)),e(n,r)})},e)}}],[{key:"buildFromSerializedData",value:function(e){var t=P.get(this._iid),n=t.User,r=t.OpenChannel,a=X.deserialize(e);return new r({channel_url:a.url,name:a.name,cover_url:a.coverUrl,data:a.data,custom_type:a.customType,created_at:a.createdAt/1e3,freeze:a.isFrozen,is_ephemeral:a.isEphemeral,participant_count:a.participantCount,operators:a.operators.map(function(e){return n.objectify(e)})})}},{key:"getChannel",value:function(e,t){var n,r,a=E(q.parse(arguments,[new q({type:"string"}),new q({type:"string",optional:!0,nullable:!0,defaultValue:null}),new q({type:"callback"})]),4);if(n=a[0],e=a[1],r=a[2],t=a[3],n)return ne(this._iid,function(e){e(n,null)},t);var i=P.get(this._iid).OpenChannel;return i.cachedChannels[e]?ne(this._iid,function(t){t(null,i.cachedChannels[e])},t):i.getChannelWithoutCache(e,r,t)}},{key:"getChannelWithoutCache",value:function(e,t){var n,r,a=this,i=E(q.parse(arguments,[new q({type:"string"}),new q({type:"string",optional:!0,nullable:!0,defaultValue:null}),new q({type:"callback"})]),4);return n=i[0],e=i[1],r=i[2],t=i[3],ne(this._iid,function(t){n?t(n,null):w.get(a._iid).container.apiClient.getOpenChannel({channelUrl:e,internalCall:r},function(e,n){var r=null;e||(r=P.get(a._iid).OpenChannel.upsert(n)),t(e,r)})},t)}},{key:"createChannel",value:function(e,t,n,r,a,i){var s,o=this,u=E(q.parse(arguments,[new q({type:"string",nullable:!0,ignoreIf:function(e){return 0===e.length}}),new q({type:["string","file"],nullable:!0,ignoreIf:function(e){return 0===e.length}}),new q({type:"string",nullable:!0,ignoreIf:function(e){return 0===e.length}}),new q({type:"array",nullable:!0,ignoreIf:function(e){return e.length<4},constraint:function(e){return e.map(function(e){return"string"==typeof e})}}),new q({type:"string",nullable:!0,ignoreIf:function(e){return e.length<5}}),new q({type:"callback"})]),7);return s=u[0],e=u[1],t=u[2],n=u[3],r=u[4],a=u[5],i=u[6],ne(this._iid,function(i){s?i(s,null):w.get(o._iid).container.apiClient.createOpenChannel({name:e,coverUrlOrImage:t,data:n,operatorUserIds:r,customType:a},function(e,t){var n=null;e||(n=P.get(o._iid).OpenChannel.upsert(t)),i(e,n)})},i)}},{key:"createChannelWithOperatorUserIds",value:function(){var e=q.toArray(arguments),t=void 0;switch("function"==typeof e[e.length-1]&&(t=e.pop()),e.length){case 4:case 5:return this.createChannel.apply(this,b(e).concat([t]));default:return ne(this._iid,function(e){return e(q.error,null)},t)}}},{key:"upsert",value:function(e){var t=new(P.get(this._iid).OpenChannel)(e);return this.cachedChannels.hasOwnProperty(t.url)?this.cachedChannels[t.url].update(e):this.cachedChannels[t.url]=t,this.cachedChannels[t.url]}},{key:"removeCachedChannel",value:function(e){this.cachedChannels[e]&&delete this.cachedChannels[e],P.get(this._iid).FileMessageQueue.delete(e)}},{key:"clearCache",value:function(){Re[this._iid]={},P.get(this._iid).FileMessageQueue.clear()}},{key:"clearEnteredChannels",value:function(){ke[this._iid]={}}},{key:"createOpenChannelListQuery",value:function(){return new(P.get(this._iid).OpenChannelListQuery)}},{key:"cachedChannels",get:function(){return Re[this._iid]||(Re[this._iid]={}),Re[this._iid]}},{key:"enteredChannels",get:function(){return ke[this._iid]||(ke[this._iid]={}),ke[this._iid]}}]),t}(),Le=function(){d(t,ie);var e=_(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).messageType=ie.MESSAGE_TYPE_USER,r.message=null,r._sender=null,r.reqId="",r.translations={},r.requestState=null,r.sendingStatus=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){var t=At.getInstance(this._iid),n=P.get(this._iid).Sender;this.message=String(e.message),this._sender=new n(e.user),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.translations=e.hasOwnProperty("translations")?e.translations:{},this.sendingStatus=0<this.messageId?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,e.hasOwnProperty("sending_status")&&(this.sendingStatus=e.sending_status),this.requestState=0<this.messageId?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"isResendable",value:function(){var e=At.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&x.isResendableError(this.errorCode)}},{key:"sender",get:function(){var e=At.getInstance(this._iid),t=P.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.profileUrl!==r.profileUrl&&(this._sender.profileUrl=r.profileUrl),x.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}}],[{key:"objectify",value:function(e){var t=At.getInstance(this._iid),n=P.get(this._iid),r=n.BaseChannel,a=n.BaseMessageParams,i=n.Sender,s=n.User,o=n.ThreadInfo,u=e.messageId,l=e.reqId,c=void 0===l?"":l,d=e.user,f=e.channel,h=e.message,p=e.data,y=void 0===p?"":p,g=e.customType,m=void 0===g?"":g,_=e.mentionType,v=void 0===_?a.MentionType.USERS:_,E=e.mentionedUsers,b=void 0===E?[]:E,C=e.mentionedUserIds,S=void 0===C?[]:C,O=e.requestedMentionUserIds,A=void 0===O?[]:O,U=e.reactions,w=void 0===U?[]:U,I=e.metaArrays,M=void 0===I?[]:I,T=e.rootMessageId,N=void 0===T?0:T,R=e.parentMessageId,k=void 0===R?0:R,L=e.parentMessageText,D=void 0===L?"":L,x=e.threadInfo,H=void 0===x?null:x,j=e.translations,F=void 0===j?{}:j,G=e.sendingStatus,B=e.errorCode,z=void 0===B?0:B,q=e.silent,W=void 0!==q&&q,Y=e.isGlobalBlocked,V=void 0!==Y&&Y,Q=e.messageSurvivalSeconds,K=void 0===Q?-1:Q,J=e.createdAt,Z=e.updatedAt,X=void 0===Z?0:Z,$={};for(var ee in $.req_id=c,$.msg_id=u,$.user=i.objectify({user:d,isBlockedByMe:d.isBlockedByMe}),$.channel_url=f.url,$.channel_type=f.channelType===r.CHANNEL_TYPE_OPEN?r.CHANNEL_TYPE_OPEN:r.CHANNEL_TYPE_GROUP,$.message=h,$.data=y,$.custom_type=m,$.translations=F,$.is_global_block=!!V,$.ts=J,$.updated_at=X,$.mention_type=v,$.mentioned_users=b.map(function(e){return s.objectify(e)}),$.mentioned_user_ids=S,$.requested_mention_user_ids=A,$.reactions=w.map(function(e){return e.serialize()}),$.metaarray={},M){var te=M[ee].key;$.metaarray[te]=M[ee].value}return $.metaarray_key_order=M.map(function(e){return e.key}),$.root_message_id=N,$.parent_message_id=k,$.parent_message_text=D,H&&($.thread_info=o.objectify(H)),$.sending_status=0<u?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,G&&($.sending_status=G),$.silent=!!W,$.error_code=z,$.message_survival_seconds=K,$}},{key:"build",value:function(e,t,n,r,a,i,s,o,u,l,c,d,f,h,p,y,g,m,_,v,E,b,C,S){return this.objectify({messageId:t,reqId:e,user:n,channel:r,message:a,data:i,customType:s,mentionType:h,mentionedUsers:p,mentionedUserIds:v,requestedMentionUserIds:b,reactions:f,metaArrays:d,rootMessageId:y,parentMessageId:g,parentMessageText:m,threadInfo:_,translations:o,sendingStatus:E,errorCode:C,isGlobalBlocked:u,messageSurvivalSeconds:S,createdAt:l,updatedAt:c})}},{key:"buildFromSerializedData",value:function(e){var t=P.get(this._iid).UserMessage,n=X.deserialize(e);return new t(t.objectify(c(c({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType},user:n.sender})))}}]),t}(),De=function(){d(t,ie);var e=_(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).messageType=ie.MESSAGE_TYPE_FILE,r.url=null,r.name="File",r.size=0,r.type=null,r.thumbnails=[],r._sender=null,r.reqId="",r.requireAuth=null,r.requestState=null,r.sendingStatus=null,r.requestedMentionUserIds=[],r.errorCode=0,r.messageSurvivalSeconds=-1,n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){var t=At.getInstance(this._iid),n=w.get(this._iid).container.auth,r=P.get(this._iid).Sender;if(this._sender=new r(e.user),this.requireAuth=!!e.hasOwnProperty("require_auth")&&e.require_auth,this.url=this.requireAuth?String(e.url).split("?auth=")[0]+"?auth="+n.eKey:String(e.url).split("?auth=")[0],this.name=e.hasOwnProperty("name")?e.name:"File",this.size=parseInt(e.size)||0,this.type=String(e.type),e.hasOwnProperty("custom")&&(this.data=String(e.custom)),this.reqId=e.hasOwnProperty("req_id")?String(e.req_id):"",this.thumbnails=e.hasOwnProperty("thumbnails")?e.thumbnails:[],this.requireAuth)for(var a in this.thumbnails)this.thumbnails[a].url=String(this.thumbnails[a].url).split("?auth=")[0]+"?auth="+n.eKey;this.sendingStatus=0<this.messageId?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,e.hasOwnProperty("sending_status")&&(this.sendingStatus=e.sending_status),this.requestState=0<this.messageId?t.MessageRequestState.SUCCEEDED:t.MessageRequestState.FAILED,e.hasOwnProperty("sending_status")&&(this.requestState=e.sending_status,this.requestState===t.MessageSendingStatus.CANCELED&&(this.requestState=t.MessageRequestState.FAILED)),this.requestedMentionUserIds=[],e.hasOwnProperty("requested_mention_user_ids")&&(this.requestedMentionUserIds=e.requested_mention_user_ids),this.errorCode=0,e.hasOwnProperty("error_code")&&(this.errorCode=e.error_code),this.messageSurvivalSeconds=-1,e.hasOwnProperty("message_survival_seconds")&&(this.messageSurvivalSeconds=e.message_survival_seconds)}},{key:"isResendable",value:function(){var e=At.getInstance(this._iid);return this.sendingStatus===e.MessageSendingStatus.FAILED&&x.isResendableError(this.errorCode)}},{key:"sender",get:function(){var e=At.getInstance(this._iid),t=P.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.profileUrl!==r.profileUrl&&(this._sender.profileUrl=r.profileUrl),x.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}}],[{key:"objectify",value:function(e){var t=At.getInstance(this._iid),n=P.get(this._iid),r=n.BaseChannel,a=n.BaseMessageParams,i=n.Sender,s=n.User,o=n.ThreadInfo,u=e.messageId,l=e.reqId,c=void 0===l?"":l,d=e.user,f=void 0===d?{}:d,h=e.channel,p=e.url,y=e.name,g=e.type,m=e.size,_=void 0===m?0:m,v=e.data,E=void 0===v?"":v,b=e.customType,C=void 0===b?"":b,S=e.mentionType,O=void 0===S?a.MentionType.USERS:S,A=e.mentionedUsers,U=void 0===A?[]:A,w=e.mentionedUserIds,I=void 0===w?[]:w,M=e.requestedMentionUserIds,T=void 0===M?[]:M,N=e.reactions,R=void 0===N?[]:N,k=e.metaArrays,L=void 0===k?[]:k,D=e.rootMessageId,x=void 0===D?0:D,H=e.parentMessageId,j=void 0===H?0:H,F=e.parentMessageText,G=void 0===F?"":F,B=e.threadInfo,z=void 0===B?null:B,q=e.thumbnails,W=void 0===q?[]:q,Y=e.requireAuth,V=void 0!==Y&&Y,Q=e.sendingStatus,K=e.errorCode,J=void 0===K?0:K,Z=e.silent,X=void 0!==Z&&Z,$=e.isGlobalBlocked,ee=void 0!==$&&$,te=e.messageSurvivalSeconds,ne=void 0===te?-1:te,re=e.createdAt,ae=e.updatedAt,ie=void 0===ae?0:ae,se={};se.req_id=c,se.msg_id=u,se.user=i.objectify({user:f,isBlockedByMe:f.isBlockedByMe}),se.channel_url=h.url,se.channel_type=h.channelType===r.CHANNEL_TYPE_OPEN?r.CHANNEL_TYPE_OPEN:r.CHANNEL_TYPE_GROUP,se.url=p,se.name=y,se.type=g,se.size=_,se.custom=E,se.custom_type=C,se.thumbnails=W,se.require_auth=V,se.is_global_block=!!ee,se.ts=re,se.updated_at=ie,se.mention_type=O,se.mentioned_users=U.map(function(e){return s.objectify(e)}),se.mentioned_user_ids=I,se.requested_mention_user_ids=T,se.reactions=R.map(function(e){return e.serialize()}),se.metaarray={};for(var oe=0;oe<L.length;oe++){var ue=L[oe].key;se.metaarray[ue]=L[oe].value}return se.metaarray_key_order=L.map(function(e){return e.key}),se.root_message_id=x,se.parent_message_id=j,se.parent_message_text=G,z&&(se.thread_info=o.objectify(z)),se.sending_status=0<u?t.MessageSendingStatus.SUCCEEDED:t.MessageSendingStatus.FAILED,Q&&(se.sending_status=Q),se.silent=!!X,se.error_code=J,se.message_survival_seconds=ne,se}},{key:"build",value:function(e,t,n,r,a,i,s,o,u,l,c,d,f,h,p,y,g,m,_,v,E,b,C,S,O,A,U,w){return this.objectify({messageId:t,reqId:e,user:n,channel:r,url:a,name:i,type:s,size:o,data:u,customType:l,mentionType:m,mentionedUsers:_,mentionedUserIds:S,requestedMentionUserIds:A,reactions:g,metaArrays:y,rootMessageId:v,parentMessageId:E,parentMessageText:b,threadInfo:C,thumbnails:f,requireAuth:h,sendingStatus:O,errorCode:U,isGlobalBlocked:c,messageSurvivalSeconds:w,createdAt:d,updatedAt:p})}},{key:"buildFromSerializedData",value:function(e){var t=P.get(this._iid).FileMessage,n=X.deserialize(e);return new t(t.objectify(c(c({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType},user:n.sender})))}}]),t}(),xe=function(){d(t,ie);var e=_(t);function t(n){var r;return s(this,t),(r=e.call(this,n)).messageType=ie.MESSAGE_TYPE_ADMIN,r.message="",r.translations={},n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){this.message=String(e.message),this.translations=e.hasOwnProperty("translations")?e.translations:{}}}],[{key:"objectify",value:function(e){var t=P.get(this._iid),n=t.BaseChannel,r=t.BaseMessageParams,a=t.User,i=t.ThreadInfo,s=e.messageId,o=e.channel,u=e.message,l=e.data,c=void 0===l?"":l,d=e.customType,f=void 0===d?"":d,h=e.mentionType,p=void 0===h?r.MentionType.USERS:h,y=e.mentionedUsers,g=void 0===y?[]:y,m=e.reactions,_=void 0===m?[]:m,v=e.metaArrays,E=void 0===v?[]:v,b=e.rootMessageId,C=void 0===b?0:b,S=e.parentMessageId,O=void 0===S?0:S,A=e.parentMessageText,U=void 0===A?"":A,w=e.threadInfo,I=void 0===w?null:w,M=e.translations,T=void 0===M?{}:M,N=e.silent,R=void 0!==N&&N,k=e.createdAt,L=e.updatedAt,D=void 0===L?0:L,x={msg_id:s,channel_url:o.url,channel_type:o.channelType===n.CHANNEL_TYPE_OPEN?n.CHANNEL_TYPE_OPEN:n.CHANNEL_TYPE_GROUP,message:u,data:c,custom_type:f,silent:R,ts:k,updated_at:D};x.translations=T,x.mention_type=p,x.mentioned_users=g.map(function(e){return a.objectify(e)}),x.reactions=_.map(function(e){return e.serialize()}),x.metaarray={};for(var H=0;H<E.length;H++){var j=E[H].key;x.metaarray[j]=E[H].value}return x.metaarray_key_order=E.map(function(e){return e.key}),x.root_message_id=C,x.parent_message_id=O,x.parent_message_text=U,I&&(x.thread_info=i.objectify(I)),x}},{key:"build",value:function(e,t,n,r,a,i,s,o,u,l,c,d,f,h,p,y){return this.objectify({messageId:e,channel:t,message:n,data:r,customType:a,mentionType:c,mentionedUsers:d,reactions:l,metaArrays:u,rootMessageId:f,parentMessageId:h,parentMessageText:p,threadInfo:y,translations:i,createdAt:s,updatedAt:o})}},{key:"buildFromSerializedData",value:function(e){var t=P.get(this._iid).AdminMessage,n=X.deserialize(e);return new t(t.objectify(c(c({},n),{},{channel:{url:n.channelUrl,channelType:n.channelType}})))}}]),t}(),He=function(){function e(t){s(this,e);var n=P.get(this._iid),r=n.BaseMessage,a=n.BaseMessageParams;this.scheduledId=0,this.scheduledDateTimeString="",this.scheduledTimezone="",this.status=e.Status.SCHEDULED,this.createdAt=0,this.updatedAt=0,this._messageType=r.MESSAGE_TYPE_BASE,this._sender=null,this._channelType="",this.channelUrl="",this.message="",this.customType="",this.data="",this.metaArrays=[],this.mentionType=a.MentionType.USERS,this.mentionedUsers=[],this.pushNotificationDeliveryOption=a.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=[],this.errorMessage="",this.errorCode=0,t&&this._update(t)}return u(e,[{key:"_update",value:function(t){var n=this,r=P.get(this._iid),a=r.User,i=r.Sender,s=r.BaseMessageParams,o=r.MessageMetaArray;this.scheduledId=t.hasOwnProperty("scheduled_id")?parseInt(t.scheduled_id):0,this.scheduledDateTimeString=t.hasOwnProperty("scheduled_dt")?String(t.scheduled_dt):"",this.scheduledTimezone=t.hasOwnProperty("scheduled_timezone")?String(t.scheduled_timezone):"",this.status=t.hasOwnProperty("status")?String(t.status):"",this.createdAt=t.hasOwnProperty("created_at")?parseInt(t.created_at):0,this.updatedAt=t.hasOwnProperty("updated_at")?parseInt(t.updated_at):0,this.channelUrl=t.hasOwnProperty("channel_url")?String(t.channel_url):"",this._channelType=t.hasOwnProperty("channel_type")?String(t.channel_type):"",this._messageType=t.hasOwnProperty("type")?String(t.type):"",this._sender=t.hasOwnProperty("user")?new i(t.user):"",this.message=t.hasOwnProperty("message")?String(t.message):"",this.customType=t.hasOwnProperty("custom_type")?String(t.custom_type):"",this.data=t.hasOwnProperty("data")?String(t.data):"";var u=t.hasOwnProperty("metaarray")?t.metaarray:{},l=t.hasOwnProperty("metaarray_key_order")?t.metaarray_key_order:Object.keys(u).sort(function(e,t){return e.localeCompare(t)});this.metaArrays=[];for(var c=0;c<l.length;c++){var d=l[c];this.metaArrays.push(new o(d,u[d]||[]))}this.mentionType=t.hasOwnProperty("mention_type")?t.mention_type:s.MentionType.USERS,this.mentionedUsers=[],t.hasOwnProperty("mentioned_users")&&t.mentioned_users.forEach(function(e){var t=new a(e);n.mentionedUsers.push(t)}),this.pushNotificationDeliveryOption=t.hasOwnProperty("push_option")?t.push_option:s.PushNotificationDeliveryOption.DEFAULT,this.translationTargetLanguages=t.hasOwnProperty("translation_target_langs")?t.translation_target_langs:[],this.status===e.Status.FAILED&&(t.hasOwnProperty("error")&&t.error.hasOwnProperty("message")&&(this.errorMessage=String(t.error.message)),t.hasOwnProperty("error")&&t.error.hasOwnProperty("code")&&(this.errorCode=parseInt(t.error.code)))}},{key:"isOpenChannel",value:function(){var e=P.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_OPEN}},{key:"isGroupChannel",value:function(){var e=P.get(this._iid).BaseChannel;return this._channelType===e.CHANNEL_TYPE_GROUP}},{key:"sender",get:function(){var e=At.getInstance(this._iid),t=P.get(this._iid).GroupChannel;if(e.Options.useMemberAsMessageSender&&this.isGroupChannel()){var n=t.cachedChannels[this.channelUrl];if(n){var r=n.memberMap[this._sender.userId];r&&(this._sender.nickname!==r.nickname&&(this._sender.nickname=r.nickname),this._sender.profileUrl!==r.profileUrl&&(this._sender.profileUrl=r.profileUrl),x.deepEqual(this._sender.metaData,r.metaData)||(this._sender.metaData=r.metaData))}}return this._sender},set:function(e){this._sender=e}},{key:"metaArray",get:function(){var e={};return this.metaArrays.forEach(function(t){e[t.key]=t.value}),e},set:function(e){if("object"===i(e)&&e){var t=P.get(this._iid).MessageMetaArray,n=[];for(var r in e)n.push(new t(r,e[r]));this.metaArrays=n}}}],[{key:"Status",get:function(){return{SCHEDULED:"scheduled",SENT:"sent",CANCELED:"canceled",FAILED:"failed"}}}]),e}(),je=function(){function e(t){s(this,e),this.replyCount=0,this.mostRepliedUsers=[],this.lastRepliedAt=0,this.updatedAt=0,t&&this._update(t)}return u(e,[{key:"_update",value:function(e){var t=P.get(this._iid).User;e.hasOwnProperty("reply_count")&&(this.replyCount=parseInt(e.reply_count)),e.hasOwnProperty("most_replies")&&Array.isArray(e.most_replies)&&e.most_replies.every(function(e){return"object"===i(e)})&&(this.mostRepliedUsers=e.most_replies.map(function(e){return new t(e)})),e.hasOwnProperty("last_replied_at")&&(this.lastRepliedAt=parseInt(e.last_replied_at)),e.hasOwnProperty("updated_at")&&(this.updatedAt=parseInt(e.updated_at))}}],[{key:"objectify",value:function(e){var t=P.get(this._iid).User,n=e.replyCount,r=e.mostRepliedUsers,a=e.lastRepliedAt,i=e.updatedAt,s={};return s.reply_count=n,Array.isArray(r)&&r.every(function(e){return e instanceof t})&&(s.most_replies=r.map(function(e){return t.objectify(e)})),s.last_replied_at=a,s.updated_at=i,s}},{key:"build",value:function(e,t,n,r){return this.objectify({replyCount:e,mostRepliedUsers:t,lastRepliedAt:n,updatedAt:r})}}]),e}(),Fe=function(){function e(){s(this,e),this.threadInfo=null,this.targetMessageId=0,this.channelUrl=null,this.channelType=null}return u(e,null,[{key:"createFromJson",value:function(e){var t=P.get(this._iid),n=t.BaseChannel,r=t.ThreadInfo,a=e.thread_info,s=e.root_message_id,o=e.channel_url,u=e.channel_type;if(!a||"object"!==i(a)||"string"!=typeof s&&"number"!=typeof s||"string"!=typeof o||"string"!=typeof u||![n.CHANNEL_TYPE_GROUP].includes(u))return null;var l=new this;return l.threadInfo=new r(a),l.targetMessageId=parseInt(s),l.channelUrl=o,l.channelType=u,l}}]),e}(),Ge=function(){function e(){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this.metaDataKeyFilter="",this.metaDataValuesFilter=[],this._token=""}return u(e,[{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){"number"==typeof t.limit&&0<t.limit&&Array.isArray(t.userIdsFilter)&&"string"==typeof t.metaDataKeyFilter&&Array.isArray(t.metaDataValuesFilter)&&!!t.metaDataKeyFilter==0<t.metaDataValuesFilter.length?t.isLoading?e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadUserList(c(c({},t),{},{token:t._token}),function(n,r){var a=null;if(!n){var i=P.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.users.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(q.error,null)},e)}}]),e}(),Be=function(){function e(t){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._isOpenChannel=!1,this._channelUrl=null,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return u(e,[{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){"number"==typeof t.limit&&0<t.limit?t.isLoading?e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadBannedUserList(c(c({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),function(n,r){var a=null;if(!n){var i=P.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.banned_list.map(function(e){return new i(e.user)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(q.error,null)},e)}}]),e}(),ze=function(){function e(){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIdsFilter=[],this._token=""}return u(e,[{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){"number"==typeof t.limit&&0<t.limit&&Array.isArray(t.userIdsFilter)?t.isLoading?e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadBlockedUserList(c(c({},t),{},{token:t._token}),function(n,r){var a=null;if(!n){var i=P.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.users.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(q.error,null)},e)}}]),e}(),qe=function(){function e(){s(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,this._token=""}return u(e,[{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){"number"==typeof t.limit&&0<t.limit?t.isLoading?e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):t.hasMore?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadFriendList(c(c({},t),{},{token:t._token}),function(n,r){var a=null;if(!n){var i=P.get(t._iid).User,s=String(r.next);t._token=s,t.hasMore=!!s,a=r.users.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(q.error,null)},e)}}]),e}(),We=function(){function e(){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=e.ORDER_LATEST_LAST_MESSAGE,this._token="",this._searchFilter={},this._userIdsFilter={userIds:[],includeMode:!0,queryType:e.QueryType.AND},this._userIdsExactFilter=[],this._userIdsIncludeFilter=[],this._userIdsIncludeFilterQueryType=e.QueryType.AND,this.nicknameContainsFilter="",this.channelNameContainsFilter="",this.memberStateFilter=Ue.MemberStateFilter.ALL,this.customTypesFilter=[],this.channelUrlsFilter=[],this.superChannelFilter=Ue.SuperChannelFilter.ALL,this.publicChannelFilter=Ue.PublicChannelFilter.ALL,this.customTypeStartsWithFilter=null,this.unreadChannelFilter=Ue.UnreadChannelFilter.ALL,this.metadataOrderKeyFilter=null,this.hiddenChannelFilter=Ue.HiddenChannelFilter.UNHIDDEN,this.includeFrozen=!0}return u(e,[{key:"setSearchFilter",value:function(e,t){Array.isArray(e)&&0!==e.length&&"string"==typeof t&&t&&(this._searchFilter={search_query:t,search_fields:e.join(",").toLocaleLowerCase()})}},{key:"serialize",value:function(){return X.serialize(this,function(e){e.isLoading=!1})}},{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){var n=P.get(t._iid),r=n.GroupChannel,a=n.GroupChannelListQuery;!("number"==typeof t.limit&&0<t.limit&&"boolean"==typeof t.includeEmpty&&"string"==typeof t.order&&-1<[a.ORDER_CHRONOLOGICAL,a.ORDER_LATEST_LAST_MESSAGE,a.CHANNEL_NAME_ALPHABETICAL,a.METADATA_VALUE_ALPHABETICAL].indexOf(t.order.toLowerCase())&&Array.isArray(t._userIdsExactFilter)&&Array.isArray(t._userIdsIncludeFilter)&&Array.isArray(t.customTypesFilter)&&Array.isArray(t.channelUrlsFilter)&&-1<Object.keys(a.QueryType).map(function(e){return a.QueryType[e]}).indexOf(t._userIdsIncludeFilterQueryType.toUpperCase())&&-1<Object.keys(r.MemberStateFilter).map(function(e){return r.MemberStateFilter[e]}).indexOf(t.memberStateFilter)&&-1<Object.keys(r.SuperChannelFilter).map(function(e){return r.SuperChannelFilter[e]}).indexOf(t.superChannelFilter)&&-1<Object.keys(r.PublicChannelFilter).map(function(e){return r.PublicChannelFilter[e]}).indexOf(t.publicChannelFilter)&&-1<Object.keys(r.UnreadChannelFilter).map(function(e){return r.UnreadChannelFilter[e]}).indexOf(t.unreadChannelFilter)&&-1<Object.keys(r.HiddenChannelFilter).map(function(e){return r.HiddenChannelFilter[e]}).indexOf(t.hiddenChannelFilter))||"string"!=typeof t.customTypeStartsWithFilter&&null!==t.customTypeStartsWithFilter||"string"!=typeof t.nicknameContainsFilter||"string"!=typeof t.channelNameContainsFilter||"string"!=typeof t.metadataOrderKeyFilter&&null!==t.metadataOrderKeyFilter||"boolean"!=typeof t.includeFrozen?e(q.error,null):t.isLoading?e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadGroupChannelList(c(c({},t),{},{token:t._token,userIdsFilter:t._userIdsFilter,searchFilter:t._searchFilter}),function(n,a){if(n)return t.isLoading=!1,void e(n,null);var i=[],s=String(a.next);t._token=s,t.hasNext=!!s;for(var o=a.channels,u=0;u<o.length;u++){var l=r.upsert(o[u]);i.push(l)}t.isLoading=!1,e(n,i)})):e(null,[])},e)}},{key:"userIdsExactFilter",get:function(){return this._userIdsExactFilter},set:function(e){Array.isArray(e)&&(this._userIdsExactFilter=e,this._userIdsIncludeFilter=[],this._userIdsFilter.userIds=this._userIdsExactFilter,this._userIdsFilter.includeMode=!1)}},{key:"userIdsIncludeFilter",get:function(){return this._userIdsIncludeFilter},set:function(e){Array.isArray(e)&&(this._userIdsIncludeFilter=e,this._userIdsExactFilter=[],this._userIdsFilter.userIds=this._userIdsIncludeFilter,this._userIdsFilter.includeMode=!0)}},{key:"userIdsIncludeFilterQueryType",get:function(){return this._userIdsIncludeFilterQueryType},set:function(t){-1<Object.keys(e.QueryType).map(function(t){return e.QueryType[t]}).indexOf(t)&&(this._userIdsIncludeFilterQueryType=t.toUpperCase(),this._userIdsFilter.queryType=this._userIdsIncludeFilterQueryType)}}],[{key:"buildFromSerializedData",value:function(e){var t=P.get(this._iid).GroupChannel,n=X.deserialize(e),r=t.createMyGroupChannelListQuery();for(var a in n)r.hasOwnProperty(a)&&(r[a]=n[a]);return r}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}},{key:"QueryType",get:function(){return{AND:"AND",OR:"OR"}}},{key:"SearchField",get:function(){return{MEMBER_NICKNAME:"member_nickname",CHANNEL_NAME:"channel_name"}}}]),e}(),Ye=function(){function e(t){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.mutedMemberFilter=e.MutedMemberFilter.ALL,this.memberStateFilter=Ue.MemberStateFilter.ALL,this.nicknameStartsWithFilter=null,this._token="",this._channelUrl=t}return u(e,[{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){var n=P.get(t._iid),r=n.GroupChannel,a=n.Member,i=n.MemberListQuery;if("number"==typeof t.limit&&0<t.limit&&-1<Object.keys(i.MutedMemberFilter).map(function(e){return i.MutedMemberFilter[e]}).indexOf(t.mutedMemberFilter)&&-1<Object.keys(r.MemberStateFilter).map(function(e){return r.MemberStateFilter[e]}).indexOf(t.memberStateFilter)&&("string"==typeof t.nicknameStartsWithFilter||null===t.nicknameStartsWithFilter))if(t.isLoading)e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null);else if(t.hasNext){t.isLoading=!0;var s=i.Order.MEMBER_NICKNAME_ALPHABETICAL;w.get(t._iid).container.apiClient.loadMemberList(c(c({},t),{},{channelUrl:t._channelUrl,order:s,token:t._token}),function(n,r){var i=null;if(!n){var s=String(r.next);t._token=s,t.hasNext=!!s,i=r.members.map(function(e){return new a(e)})}t.isLoading=!1,e(n,i)})}else e(null,[]);else e(q.error,null)},e)}}],[{key:"MutedMemberFilter",get:function(){return{ALL:"all",MUTED:"muted",UNMUTED:"unmuted"}}},{key:"Order",get:function(){return{MEMBER_NICKNAME_ALPHABETICAL:"member_nickname_alphabetical"}}}]),e}(),Ve=function(){function e(t){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t.channelUrl&&(this._channelUrl=t.channelUrl),t.isOpenChannel&&(this._isOpenChannel=t.isOpenChannel)}return u(e,[{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){"number"==typeof t.limit&&0<t.limit?t.isLoading?e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadMutedUserList(c(c({},t),{},{channelUrl:t._channelUrl,isOpenChannel:t._isOpenChannel,token:t._token}),function(n,r){var a=null;if(!n){var i=P.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.muted_list.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(q.error,null)},e)}}]),e}(),Qe=function(){function e(){s(this,e),this.limit=20,this.isLoading=!1,this.hasNext=!0,this.nameKeyword=null,this.urlKeyword=null,this.customTypes=[],this.includeFrozen=!0}return u(e,[{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){!("number"==typeof t.limit&&0<t.limit&&Array.isArray(t.customTypes))||"string"!=typeof t.nameKeyword&&null!==t.nameKeyword||"string"!=typeof t.urlKeyword&&null!==t.urlKeyword||"boolean"!=typeof t.includeFrozen?e(q.error,null):t.isLoading?e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadOpenChannelList(c(c({},t),{},{token:t._token}),function(n,r){var a=null;if(!n){var i=P.get(t._iid).OpenChannel,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.channels.map(function(e){return i.upsert(e)})}t.isLoading=!1,e(n,a)})):e(null,[])},e)}}]),e}(),Ke=new WeakMap,Je=function(){function e(t){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",Ke.set(this,t)}return u(e,[{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){if("number"==typeof t.limit&&0<t.limit)if(t.isLoading)e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null);else if(t.hasNext){t.isLoading=!0;var n=Ke.get(t);w.get(t._iid).container.apiClient.loadOperatorList(c(c({},t),{},{token:t._token,channelUrl:n.url,isOpenChannel:n.isOpenChannel()}),function(n,r){var a=null;if(!n){var i=P.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.operators.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})}else e(null,[]);else e(q.error,null)},e)}}]),e}(),Ze=new WeakMap,Xe=function(){function e(t){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this._token="",t&&Ze.set(this,t.channelUrl)}return u(e,[{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){"number"==typeof t.limit&&0<t.limit?t.isLoading?e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadParticipantList(c(c({},t),{},{channelUrl:Ze.get(t),token:t._token}),function(n,r){var a=null;if(!n){var i=P.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.participants.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(q.error,null)},e)}}]),e}(),$e=new WeakMap,et=function(){function e(t,n){var r=n.limit,a=void 0===r?20:r,i=n.reverse,o=void 0!==i&&i,u=n.exactMatch,l=void 0!==u&&u,c=n.channelUrl,d=void 0===c?"":c,f=n.channelCustomType,h=void 0===f?"":f,p=n.messageTimestampFrom,y=void 0===p?null:p,g=n.messageTimestampTo,m=void 0===g?null:g,_=n.order,v=void 0===_?"score":_;s(this,e),this.isLoading=!1,this.hasNext=!0,$e.set(this,{keyword:t,limit:a,reverse:o,exactMatch:l,channelUrl:d,channelCustomType:h,messageTimestampFrom:y,messageTimestampTo:m,order:v,previousToken:"",nextToken:""})}return u(e,[{key:"next",value:function(e){var t=this,n=P.get(this._iid),r=n.BaseChannel,a=n.GroupChannel,i=n.OpenChannel;return ne(this._iid,function(e){var n=$e.get(t),s=n.keyword,o=n.limit,u=n.reverse,l=n.exactMatch,c=n.channelUrl,d=n.channelCustomType,f=n.messageTimestampFrom,h=n.messageTimestampTo,p=n.order,y=n.nextToken;!("number"==typeof o&&0<o&&o<=1e3&&"boolean"==typeof u&&"boolean"==typeof l)||"string"!=typeof c&&null!==c||"string"!=typeof d&&null!==d||"number"!=typeof f&&null!==f||"number"!=typeof h&&null!==h||!(0<=["score","ts"].indexOf(p))?e(q.error,null):t.isLoading?e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.searchMessages({keyword:s,limit:o,reverse:u,exactMatch:l,channelUrl:c,channelCustomType:d,messageTimestampFrom:f,messageTimestampTo:h,order:p,nextToken:y},function(n,s){var o=null;if(!n){for(var u in o=[],s.results){var l=s.results[u],c=null;l.channel.hasOwnProperty("members")?(c=new a(l.channel),a.cachedChannels[c.url]=c):(c=new i(l.channel),i.cachedChannels[c.url]=c),o.push(r.buildMessage(l,c))}t.hasNext=s.has_next,$e.get(t).nextToken=s.end_cursor}t.isLoading=!1,e(n,o)})):e(null,[])},e)}},{key:"key",get:function(){return $e.get(this).keyword}},{key:"limit",get:function(){return $e.get(this).limit}},{key:"reverse",get:function(){return $e.get(this).reverse}},{key:"exactMatch",get:function(){return $e.get(this).exactMatch}},{key:"channelUrl",get:function(){return $e.get(this).channelUrl}},{key:"channelCustomType",get:function(){return $e.get(this).channelCustomType}},{key:"messageTimestampFrom",get:function(){return $e.get(this).messageTimestampFrom}},{key:"messageTimestampTo",get:function(){return $e.get(this).messageTimestampTo}},{key:"order",get:function(){return $e.get(this).order}}]),e}(),tt=new WeakMap,nt=new WeakMap,rt=function(){function e(t){s(this,e),this.isLoading=!1,this.hasMore=!0,this.limit=20,nt.set(this,Number.MAX_SAFE_INTEGER),tt.set(this,t),this.reverse=!1,this.messageTypeFilter=null,this.customTypeFilter=null,this.senderUserIdsFilter=[],this.includeMetaArray=!1,this.includeReaction=!1,this.includeReplies=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1}return u(e,[{key:"load",value:function(e,t,n,r){var a=this,i=P.get(this._iid).BaseChannel,s=null,o=E(q.parse(arguments,[new q({type:"number",optional:!0,defaultValue:this.limit}),new q({type:"boolean",optional:!0,defaultValue:this.reverse}),new q({type:["string","number"],optional:!0,defaultValue:this.messageTypeFilter,constraint:function(e){return-1<Object.keys(i.MessageTypeFilter).map(function(e){return i.MessageTypeFilter[e]}).indexOf(e)||-1<[0,1,2,3].indexOf(e)}}),new q({type:"callback"})]),5);return s=o[0],e=o[1],t=o[2],n=o[3],r=o[4],ne(this._iid,function(r){if(Array.isArray(a.senderUserIdsFilter)&&!a.senderUserIdsFilter.some(function(e){return"string"!=typeof e})||(s=q.error),s)r(s,null);else{if(a.limit=e,a.reverse=t,a.messageTypeFilter=n,"number"==typeof a.messageTypeFilter)switch(a.messageTypeFilter){case 0:a.messageTypeFilter=i.MessageTypeFilter.ALL;break;case 1:a.messageTypeFilter=i.MessageTypeFilter.USER;break;case 2:a.messageTypeFilter=i.MessageTypeFilter.FILE;break;case 3:a.messageTypeFilter=i.MessageTypeFilter.ADMIN}if(a.isLoading)r(new I("Query in progress.",I.QUERY_IN_PROGRESS),null);else if(a.hasMore){a.isLoading=!0;var o=tt.get(a);w.get(a._iid).container.apiClient.getMessageList({channel:o,token:nt.get(a)||(new Date).getTime()+1e4,tokenType:"timestamp",isInclusive:!1,prevResultSize:e,nextResultSize:0,shouldReverse:t,messageType:n,customType:a.customTypeFilter,senderUserIds:a.senderUserIdsFilter,includeMetaArray:a.includeMetaArray,includeReaction:a.includeReaction,includeReplies:a.includeReplies,includeParentMessageText:a.includeParentMessageText,includeThreadInfo:a.includeThreadInfo},function(t,n){var s=null;if(!t){(0===(s=n.messages.map(function(e){return i.buildMessage(e,o)})).length||s.length<e)&&(a.hasMore=!1);var u=nt.get(a);nt.set(a,Math.min.apply(Math,b(s.map(function(e){return e.createdAt})).concat([u])))}a.isLoading=!1,r(t,s)})}else r(null,[])}},r)}}]),e}(),at=function(){function e(){s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.includeEmpty=!1,this.order=We.ORDER_LATEST_LAST_MESSAGE,this._token="",this.channelNameContainsFilter="",this.channelUrlsFilter=[],this.customTypesFilter=[],this.customTypeStartsWithFilter=null,this.superChannelFilter=Ue.SuperChannelFilter.ALL,this.membershipFilter=e.MembershipType.JOINED,this.metadataOrderKeyFilter=null,this.includeFrozen=!0}return u(e,[{key:"next",value:function(t){var n=this;return ne(this._iid,function(t){var r=P.get(n._iid).GroupChannel;!("number"==typeof n.limit&&0<n.limit&&"boolean"==typeof n.includeEmpty&&"string"==typeof n.order&&-1<[e.ORDER_CHRONOLOGICAL,e.CHANNEL_NAME_ALPHABETICAL,e.METADATA_VALUE_ALPHABETICAL,e.ORDER_LATEST_LAST_MESSAGE].indexOf(n.order.toLowerCase())&&Array.isArray(n.customTypesFilter)&&Array.isArray(n.channelUrlsFilter)&&-1<Object.keys(e.MembershipType).map(function(t){return e.MembershipType[t]}).indexOf(n.membershipFilter)&&-1<Object.keys(r.SuperChannelFilter).map(function(e){return r.SuperChannelFilter[e]}).indexOf(n.superChannelFilter))||"string"!=typeof n.customTypeStartsWithFilter&&null!==n.customTypeStartsWithFilter||"string"!=typeof n.channelNameContainsFilter||"string"!=typeof n.metadataOrderKeyFilter&&null!==n.metadataOrderKeyFilter||"boolean"!=typeof n.includeFrozen?t(q.error,null):n.isLoading?t(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):n.hasNext?(n.isLoading=!0,w.get(n._iid).container.apiClient.loadPublicGroupChannelList(c(c({},n),{},{token:n._token}),function(e,a){var i=null;if(!e){var s=String(a.next);n._token=s,n.hasNext=!!s,i=a.channels.map(function(e){return r.upsert(e)})}n.isLoading=!1,t(e,i)})):t(null,[])},t)}}],[{key:"MembershipType",get:function(){return{ALL:"all",JOINED:"joined"}}},{key:"ORDER_LATEST_LAST_MESSAGE",get:function(){return"latest_last_message"}},{key:"ORDER_CHRONOLOGICAL",get:function(){return"chronological"}},{key:"CHANNEL_NAME_ALPHABETICAL",get:function(){return"channel_name_alphabetical"}},{key:"METADATA_VALUE_ALPHABETICAL",get:function(){return"metadata_value_alphabetical"}}]),e}(),it=function(){function e(){s(this,e),this.isDistinct=null,this.isSuper=null,this.isBroadcast=null,this.isPublic=null,this.channelUrl=null,this.isEphemeral=null,this.isDiscoverable=null,this.isStrict=null,this.name=null,this.data=null,this.customType=null,this.channelCover=null,this.coverUrl=null,this.coverImage=null,this.accessCode=null,this.messageSurvivalSeconds=null,this._invitedUserIds=[];var t=null;Object.defineProperty(this,"operators",{set:function(e){Array.isArray(e)&&e.filter(function(e){return e.hasOwnProperty("userId")}).length===e.length&&(t=e.map(function(e){return e.userId}))}}),Object.defineProperty(this,"operatorUserIds",{get:function(){return t},set:function(e){Array.isArray(e)&&e.filter(function(e){return"string"==typeof e}).length===e.length&&(t=e)}})}return u(e,[{key:"_validate",value:function(){return Array.isArray(this._invitedUserIds)&&this._invitedUserIds.every(function(e){return"string"==typeof e})&&("string"==typeof this.channelUrl||null===this.channelUrl)&&("string"==typeof this.coverUrl||null===this.coverUrl)&&(x.isFile(this.coverImage)||null===this.coverImage)&&("string"==typeof this.name||null===this.name)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&("boolean"==typeof this.isDistinct||null===this.isDistinct)&&("boolean"==typeof this.isSuper||null===this.isSuper)&&("boolean"==typeof this.isBroadcast||null===this.isBroadcast)&&("boolean"==typeof this.isPublic||null===this.isPublic)&&("boolean"==typeof this.isEphemeral||null===this.isEphemeral)&&("boolean"==typeof this.isDiscoverable||null===this.isDiscoverable)&&("boolean"==typeof this.isStrict||null===this.isStrict)&&(Array.isArray(this.operatorUserIds)&&this.operatorUserIds.every(function(e){return"string"==typeof e})||null===this.operatorUserIds)&&("string"==typeof this.accessCode||null===this.accessCode)&&("number"==typeof this.messageSurvivalSeconds||null===this.messageSurvivalSeconds)}},{key:"addUsers",value:function(e){if(Array.isArray(e)){var t,n=e.filter(function(e){return e.hasOwnProperty("userId")&&"string"==typeof e.userId}).map(function(e){return e.userId});(t=this._invitedUserIds).push.apply(t,b(n))}}},{key:"addUser",value:function(e){e.hasOwnProperty("userId")&&"string"==typeof e.userId&&this._invitedUserIds.push(e.userId)}},{key:"addUserIds",value:function(e){if(Array.isArray(e)){var t,n=e.filter(function(e){return"string"==typeof e});(t=this._invitedUserIds).push.apply(t,b(n))}}},{key:"addUserId",value:function(e){"string"==typeof e&&this._invitedUserIds.push(e)}}]),e}(),st=new WeakMap,ot=function(){function e(){s(this,e),this._mentionType=e.MentionType.USERS,this._mentionedUserIds=[],this._cachedMentionedUsers=[],this._cachedMentionedUserIds=[],this._metaArrays=[],st.set(this,null),this._parentMessageId=null}return u(e,[{key:"_validate",value:function(){var e=P.get(this._iid),t=e.BaseMessageParams,n=e.MessageMetaArray,r=st.get(this);return-1<Object.keys(t.MentionType).map(function(e){return t.MentionType[e]}).indexOf(this.mentionType)&&this._mentionedUserIds.every(function(e){return"string"==typeof e})&&Array.isArray(this._metaArrays)&&this._metaArrays.every(function(e){return e instanceof n})&&("number"==typeof r||null===r)&&("number"==typeof this._parentMessageId||null===this._parentMessageId)}},{key:"mentionType",get:function(){return this._mentionType},set:function(e){var t=P.get(this._iid).BaseMessageParams;-1<Object.keys(t.MentionType).map(function(e){return t.MentionType[e]}).indexOf(e)&&(this._mentionType=e)}},{key:"mentionedUserIds",get:function(){return this._cachedMentionedUserIds},set:function(e){if(Array.isArray(e))for(var t=At.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if("string"!=typeof r){this._cachedMentionedUserIds=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r)<0&&t.currentUser&&t.currentUser.userId!==r&&(this._cachedMentionedUserIds.push(r),this._mentionedUserIds.push(r))}}},{key:"mentionedUsers",get:function(){return this._cachedMentionedUsers},set:function(e){if(Array.isArray(e))for(var t=At.getInstance(this._iid),n=0;n<e.length;n++){var r=e[n];if(!r.hasOwnProperty("userId")){this._cachedMentionedUsers=[],this._mentionedUserIds=[];break}this._mentionedUserIds.indexOf(r.userId)<0&&t.currentUser&&t.currentUser.userId!==r.userId&&(this._cachedMentionedUsers.push(r),this._mentionedUserIds.push(r.userId))}}},{key:"metaArrayKeys",get:function(){return this._metaArrays.map(function(e){return e.key})},set:function(e){var t=P.get(this._iid).MessageMetaArray,n={};if(Array.isArray(e)){this._metaArrays=[];for(var r=0;r<e.length;r++)"string"!=typeof e[r]||n[e[r]]||(n[e[r]]=!0,this._metaArrays.push(new t(e[r])))}}},{key:"metaArrays",get:function(){return this._metaArrays},set:function(e){var t=P.get(this._iid).MessageMetaArray;if(Array.isArray(e)){this._metaArrays=[];for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof t){var a,i=this._metaArrays.map(function(e){return e.key}).indexOf(r.key);i<0?this._metaArrays.push(r):(a=this._metaArrays[i].value).push.apply(a,b(r.value))}}}}},{key:"rootMessageId",get:function(){return st.get(this)}},{key:"parentMessageId",get:function(){return this._parentMessageId},set:function(e){st.set(this,e),this._parentMessageId=e}}],[{key:"MentionType",get:function(){return{USERS:"users",CHANNEL:"channel"}}},{key:"PushNotificationDeliveryOption",get:function(){return{DEFAULT:"default",SUPPRESS:"suppress"}}}]),e}(),ut=function(){d(t,ot);var e=_(t);function t(){var n;return s(this,t),(n=e.call(this)).message=null,n.data=null,n.customType=null,n.pushNotificationDeliveryOption=null,n._translationTargetLanguages=[],n}return u(t,[{key:"_validate",value:function(){var e=P.get(this._iid).BaseMessageParams;return v(f(t.prototype),"_validate",this).call(this)&&("string"==typeof this.message||null===this.message)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&Array.isArray(this.translationTargetLanguages)&&this.translationTargetLanguages.every(function(e){return"string"==typeof e})&&(null===this.pushNotificationDeliveryOption||-1<Object.keys(e.PushNotificationDeliveryOption).map(function(t){return e.PushNotificationDeliveryOption[t]}).indexOf(this.pushNotificationDeliveryOption))}},{key:"targetLanguages",get:function(){return this.translationTargetLanguages},set:function(e){this.translationTargetLanguages=e}},{key:"translationTargetLanguages",get:function(){return this._translationTargetLanguages},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("string"!=typeof e[t])return void(this._translationTargetLanguages=[]);this._translationTargetLanguages=e}}}]),t}(),lt=function(){d(t,ot);var e=_(t);function t(){var n;return s(this,t),(n=e.call(this)).fileName=null,n.mimeType=null,n.fileSize=null,n.data=null,n.customType=null,n.pushNotificationDeliveryOption=null,n._isUpdate=!1,n._file=null,n._fileUrl=null,n._thumbnailSizes=[],n}return u(t,[{key:"_validate",value:function(){var e=P.get(this._iid).BaseMessageParams;return v(f(t.prototype),"_validate",this).call(this)&&(this._isUpdate||x.isFile(this.file)||"string"==typeof this.fileUrl)&&("string"==typeof this.fileName||null===this.fileName)&&("string"==typeof this.mimeType||null===this.mimeType)&&("number"==typeof this.fileSize||null===this.fileSize)&&("string"==typeof this.data||null===this.data)&&("string"==typeof this.customType||null===this.customType)&&(null===this._thumbnailSizes||this._thumbnailSizes.every(function(e){return"object"===i(e)&&0<e.maxWidth&&0<e.maxHeight}))&&(null===this.pushNotificationDeliveryOption||-1<Object.keys(e.PushNotificationDeliveryOption).map(function(t){return e.PushNotificationDeliveryOption[t]}).indexOf(this.pushNotificationDeliveryOption))}},{key:"file",get:function(){return this._file},set:function(e){x.isFile(e)&&(this._fileUrl=null,this._file=e)}},{key:"fileUrl",get:function(){return this._fileUrl},set:function(e){"string"==typeof e&&(this._fileUrl=e,this._file=null)}},{key:"thumbnailSizes",get:function(){return this._thumbnailSizes},set:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"!==i(e[t])||"number"!=typeof e[t].maxWidth||"number"!=typeof e[t].maxHeight)return void(this._thumbnailSizes=[]);this._thumbnailSizes=e}}}]),t}(),ct=function(){d(t,ut);var e=_(t);function t(n){var r;return s(this,t),(r=e.call(this)).year=null,r.month=null,r.day=null,r.hour=null,r.min=null,r.timezone=null,r._scheduledDateTimeString=null,n&&r._update(n),r}return u(t,[{key:"_update",value:function(e){e.hasOwnProperty("message")&&(this.message=e.message),e.hasOwnProperty("year")&&(this.year=e.year),e.hasOwnProperty("month")&&(this.month=e.month),e.hasOwnProperty("day")&&(this.day=e.day),e.hasOwnProperty("hour")&&(this.hour=e.hour),e.hasOwnProperty("min")&&(this.min=e.min),e.hasOwnProperty("timezone")&&(this.timezone=e.timezone)}},{key:"_getScheduleString",value:function(){return this.scheduledDateTimeString?this.scheduledDateTimeString+" "+this.timezone:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&1<=this.month&&this.month<=12&&"number"==typeof this.day&&1<=this.day&&this.day<=31&&"number"==typeof this.hour&&0<=this.hour&&this.hour<=24&&"number"==typeof this.min&&0<=this.min&&this.min<=60&&"string"==typeof this.timezone&&0<this.timezone.length?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2)+" "+this.timezone:null}},{key:"setSchedule",value:function(e,t,n,r,a,i){"number"==typeof e&&4===e.toString().length&&"number"==typeof t&&1<=t&&t<=12&&"number"==typeof n&&1<=n&&n<=31&&"number"==typeof r&&0<=r&&r<=24&&"number"==typeof a&&0<=a&&a<=60&&"string"==typeof i&&0<i.length&&(this.scheduledDateTimeString=e.toString()+"-"+("0"+t.toString()).substr(-2)+"-"+("0"+n.toString()).substr(-2)+" "+("0"+r.toString()).substr(-2)+":"+("0"+a.toString()).substr(-2),this.timezone=i)}},{key:"scheduledDateTimeString",get:function(){return this._scheduledDateTimeString?this._scheduledDateTimeString:"number"==typeof this.year&&4===this.year.toString().length&&"number"==typeof this.month&&1<=this.month&&this.month<=12&&"number"==typeof this.day&&1<=this.day&&this.day<=31&&"number"==typeof this.hour&&0<=this.hour&&this.hour<=24&&"number"==typeof this.min&&0<=this.min&&this.min<=60&&"string"==typeof this.timezone&&0<this.timezone.length?this.year.toString()+"-"+("0"+this.month.toString()).substr(-2)+"-"+("0"+this.day.toString()).substr(-2)+" "+("0"+this.hour.toString()).substr(-2)+":"+("0"+this.min.toString()).substr(-2):null},set:function(e){e&&"string"==typeof e&&(this._scheduledDateTimeString=e)}}]),t}(),dt=function(){function e(){s(this,e),this.channelUrl=null,this.channelType=null,this.messageId=0,this.includeMetaArray=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1}return u(e,[{key:"_validate",value:function(){var e=P.get(this._iid).BaseChannel;return"string"==typeof this.channelUrl&&"string"==typeof this.channelType&&[e.CHANNEL_TYPE_BASE,e.CHANNEL_TYPE_OPEN,e.CHANNEL_TYPE_GROUP].includes(this.channelType)&&"number"==typeof this.messageId&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeParentMessageText&&"boolean"==typeof this.includeThreadInfo}}]),e}(),ft=function(){function e(){s(this,e);var t=P.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.senderUserIds=null,this.includeMetaArray=!1,this.includeReactions=!1,this.includeReplies=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1}return u(e,[{key:"_validate",value:function(){var e=P.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every(function(e){return"string"==typeof e})||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeReplies&&"boolean"==typeof this.includeParentMessageText&&"boolean"==typeof this.includeThreadInfo}}]),e}(),ht=function(){function e(){s(this,e);var t=P.get(this._iid).BaseChannel;this.prevResultSize=0,this.nextResultSize=0,this.isInclusive=!1,this.reverse=!1,this.messageType=t.MessageTypeFilter.ALL,this.customType=null,this.senderUserIds=null,this.includeMetaArray=!1,this.includeReactions=!1,this.includeParentMessageText=!1}return u(e,[{key:"_validate",value:function(){var e=P.get(this._iid).BaseChannel;return"number"==typeof this.prevResultSize&&"number"==typeof this.nextResultSize&&"boolean"==typeof this.isInclusive&&"boolean"==typeof this.reverse&&"string"==typeof this.messageType&&Object.values(e.MessageTypeFilter).includes(this.messageType)&&("string"==typeof this.customType||null===this.customType)&&(Array.isArray(this.senderUserIds)&&this.senderUserIds.every(function(e){return"string"==typeof e})||null===this.senderUserIds)&&"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeParentMessageText}}]),e}(),pt=function(){function e(){s(this,e),this.includeMetaArray=!1,this.includeReactions=!1,this.includeReplies=!1,this.includeParentMessageText=!1,this.includeThreadInfo=!1}return u(e,[{key:"_validate",value:function(){return"boolean"==typeof this.includeMetaArray&&"boolean"==typeof this.includeReactions&&"boolean"==typeof this.includeReplies&&"boolean"==typeof this.includeParentMessageText&&"boolean"==typeof this.includeThreadInfo}}]),e}(),yt=function(){function e(){s(this,e),this.customTypes=[],this.includeEmpty=!1,this.includeFrozen=!0}return u(e,[{key:"_validate",value:function(){return(Array.isArray(this.customTypes)&&this.customTypes.every(function(e){return"string"==typeof e})||null===this.customTypes)&&("boolean"==typeof this.includeEmpty||null===this.includeEmpty)&&"boolean"==typeof this.includeFrozen}}]),e}(),gt=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];s(this,e),this.key=t,this.value=Array.isArray(n)&&n.every(function(e){return"string"==typeof e})?n:[]}return u(e,[{key:"encode",value:function(){return{key:this.key,value:this.value||[]}}}]),e}(),mt=new WeakMap,_t=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;s(this,e),this.key=t,this.userIds=n,this.updatedAt=r;var a={};for(var i in this.userIds)a[this.userIds[i]]=this.updatedAt;mt.set(this,a)}return u(e,[{key:"serialize",value:function(){return{key:this.key,user_ids:this.userIds,updated_at:this.updatedAt}}},{key:"_applyEvent",value:function(e){if(e instanceof Z){var t=mt.get(this);if(e.key===this.key&&(!t[e.userId]||t[e.userId]<e.updatedAt)){var n=this.userIds.indexOf(e.userId);switch(e.operation){case"add":n<0&&this.userIds.push(e.userId);break;case"delete":0<=n&&this.userIds.splice(n,1)}t[e.userId]=e.updatedAt}}}},{key:"isEmpty",get:function(){return 0===this.userIds.length}}],[{key:"createFromJson",value:function(e){var t=e.key,n=e.user_ids,r=e.updated_at;return"string"==typeof t&&t&&Array.isArray(n)&&0<n.length&&"number"==typeof r?new this(t,n,r):null}}]),e}(),vt=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];s(this,e),this.isLoading=!1,this.hasNext=!0,this.limit=20,this.userIds=t,this.metaDataKey="",this.metaDataValues=[],this._token=""}return u(e,[{key:"next",value:function(e){var t=this;return ne(this._iid,function(e){"number"==typeof t.limit&&0<t.limit&&Array.isArray(t.userIds)&&"string"==typeof t.metaDataKey&&Array.isArray(t.metaDataValues)&&!!t.metaDataKey==0<t.metaDataValues.length?t.isLoading?e(new I("Query in progress.",I.QUERY_IN_PROGRESS),null):t.hasNext?(t.isLoading=!0,w.get(t._iid).container.apiClient.loadUserList(c(c({},t),{},{userIdsFilter:t.userIds,metaDataKeyFilter:t.metaDataKey,metaDataValuesFilter:t.metaDataValues,token:t._token}),function(n,r){var a=null;if(!n){var i=P.get(t._iid).User,s=String(r.next);t._token=s,t.hasNext=!!s,a=r.users.map(function(e){return new i(e)})}t.isLoading=!1,e(n,a)})):e(null,[]):e(q.error,null)},e)}}]),e}(),Et=new WeakMap,bt=function(){function e(t){s(this,e),this.isLoading=!1,Et.set(this,t)}return u(e,[{key:"prev",value:function(e,t,n,r){var a=arguments,i=this;return ne(this._iid,function(r){var s,o=P.get(i._iid).BaseChannel,u=E(q.parse(a,[new q({type:"number"}),new q({type:"number"}),new q({type:"boolean"}),new q({type:"function"})]),5);if(s=u[0],e=u[1],t=u[2],n=u[3],r=u[4],s)r(s,null);else if(i.isLoading)r(new I("Query in progress.",I.QUERY_IN_PROGRESS),null);else{i.isLoading=!0;var l=Et.get(i);w.get(i._iid).container.apiClient.getMessageList({channelUrl:l.url,channelType:l.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:0,shouldReverse:n,messageType:"",customType:""},function(e,t){var n=null;e||(n=t.messages.map(function(e){return o.buildMessage(e,l)})),i.isLoading=!1,r(e,n)})}},r)}},{key:"next",value:function(e,t,n,r){var a=arguments,i=this;return ne(this._iid,function(r){var s,o=P.get(i._iid).BaseChannel,u=E(q.parse(a,[new q({type:"number"}),new q({type:"number"}),new q({type:"boolean"}),new q({type:"function"})]),5);if(s=u[0],e=u[1],t=u[2],n=u[3],r=u[4],s)r(s,null);else if(i.isLoading)r(new I("Query in progress.",I.QUERY_IN_PROGRESS),null);else{i.isLoading=!0;var l=Et.get(i);w.get(i._iid).container.apiClient.getMessageList({channelUrl:l.url,channelType:l.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:0,nextResultSize:t,shouldReverse:n,messageType:"",customType:""},function(e,t){var n=null;e||(n=t.messages.map(function(e){return o.buildMessage(e,l)})),i.isLoading=!1,r(e,n)})}},r)}},{key:"load",value:function(e,t,n,r,a){var i=arguments,s=this;return ne(this._iid,function(a){var o,u=P.get(s._iid).BaseChannel,l=E(q.parse(i,[new q({type:"number"}),new q({type:"number"}),new q({type:"number"}),new q({type:"boolean"}),new q({type:"callback"})]),6);if(o=l[0],e=l[1],t=l[2],n=l[3],r=l[4],a=l[5],o)a(o,null);else if(s.isLoading)a(new I("Query in progress.",I.QUERY_IN_PROGRESS),null);else{s.isLoading=!0;var c=Et.get(s);w.get(s._iid).container.apiClient.getMessageList({channelUrl:c.url,channelType:c.channelType,token:e,tokenType:"timestamp",isInclusive:!1,prevResultSize:t,nextResultSize:n,shouldReverse:r,messageType:"",customType:""},function(e,t){var n=null;e||(n=t.messages.map(function(e){return u.buildMessage(e,c)})),s.isLoading=!1,a(e,n)})}},a)}}]),e}(),Ct=null,St={},Ot=!1,At=function(){function e(t){s(this,e);var n=!1;if((t.newInstance||!Ct||Ct&&t.appId!==Ct.getApplicationId()&&Ct.getConnectionState()===Ct.ConnectionState.CLOSED)&&(n=!0,Ct=this),n){try{if(!t.hasOwnProperty("appId"))return R.debug("Must be set appId"),null}catch(t){return R.debug("Must be set appId"),null}var r=Ee.create();Object.defineProperty(this,"_iid",{get:function(){return r}}),(St[r]=this).customApiHost=null,this.customWsHost=null,this.connecting=!1,this.reconnecting=!1,this.isReconnectingOnError=!1,this.connectionCallbacks=[],this.ConnectionManager=new W(this),this.GCMPushToken="",this.APNSPushToken="",this.PUSH_TEMPLATE_DEFAULT="default",this.PUSH_TEMPLATE_ALTERNATIVE="alternative",this.currentUser=null,this.isSessionOpened=!1,this.globalTimer,this.loginTimer,this.reconnectTimer,this.loginHandler=null,this.onLoginTimerCancel,this.onReconnectTimerCancel,this.BaseChannel={MessageTypeFilter:ue.MessageTypeFilter};var a={User:se,Member:we,GroupChannel:Ue,OpenChannel:Pe,UserMessage:Le,FileMessage:De,AdminMessage:xe,GroupChannelListQuery:We,GroupChannelParams:it,BaseMessageParams:ot,UserMessageParams:ut,FileMessageParams:lt,ScheduledUserMessageParams:ct,GroupChannelTotalUnreadMessageCountParams:ye,MessageRetrievalParams:dt,MessageListParams:ft,ThreadedMessageListParams:ht,MessageChangeLogsParams:pt,GroupChannelChangeLogsParams:yt,MessageMetaArray:gt,UserEventHandler:me,ChannelHandler:_e,ConnectionHandler:ge},i={BaseChannel:ue,BaseMessage:ie,UserListQuery:vt,ApplicationUserListQuery:Ge,BannedUserListQuery:Be,BlockedUserListQuery:ze,FriendListQuery:qe,MemberListQuery:Ye,MutedUserListQuery:Ve,OpenChannelListQuery:Qe,OperatorListQuery:Je,ParticipantListQuery:Xe,MessageListQuery:bt,PreviousMessageListQuery:rt,MessageSearchQuery:et,PublicGroupChannelListQuery:at,ScheduledUserMessage:He,ThreadInfo:je,ThreadInfoUpdateEvent:Fe,Command:Q,Sender:Ie,ReadStatus:ve,Reaction:_t,ReactionEvent:Z,Emoji:Ne,EmojiCategory:Te,EmojiContainer:Me,FileMessageQueue:pe},o=new P(this._iid,c(c({},a),i));for(var u in o)a[u]&&(this[u]=o[u]);w.create(r,{appId:t.appId,pinger:new L(this),apiClient:new G(this),wsAdapter:new z(this),commandHandler:new de(this),onlineDetector:new Y(this),ackStateMap:{},subscribedUnreadMessageCount:{all:0,custom_types:{},ts:0},maxUnreadCountOfSuperGroupChannel:O.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,auth:new M,appInfo:null,pingInterval:15e3,pongTimeout:5e3,connectedAt:0,extensions:{},supportedExtensionKeys:["sb_uikit","sb_syncmanager"],getUserAgentWithExtensions:function(e){var t=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",n=e.sb_uikit?"u".concat(e.sb_uikit):"";return"JS/c".concat(O.SDK_VERSION,"/").concat(t,"/").concat(n)},stateChangeEnabled:!0,isInBackground:!1,closedByGoingBackground:!1,isErrorFirstInCallback:!1}),this.userEventHandlers={},this.channelHandlers={},this.connectionHandlers={},this.Options={_useMemberAsMessageSender:!0,get UseMemberAsMessageSender(){return this._useMemberAsMessageSender},set UseMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},get useMemberAsMessageSender(){return this._useMemberAsMessageSender},set useMemberAsMessageSender(e){"boolean"==typeof e&&(this._useMemberAsMessageSender=e)},_typingIndicatorThrottle:1e3,get typingIndicatorThrottle(){return this._typingIndicatorThrottle},set typingIndicatorThrottle(e){"number"==typeof e&&1e3<=e&&e<=9e3&&(this._typingIndicatorThrottle=e)}}}return Ct}return u(e,[{key:"getApplicationId",value:function(){return w.get(this._iid).get("appId")}},{key:"getCurrentUserId",value:function(){return this.currentUser?this.currentUser.userId:null}},{key:"getDebugMode",value:function(){return Ot}},{key:"setDebugMode",value:function(e){Ot=e,R.mode=e?R.Mode.DEBUG:R.Mode.PRODUCTION}},{key:"getErrorFirstCallback",value:function(){return w.get(this._iid).container.isErrorFirstInCallback}},{key:"setErrorFirstCallback",value:function(e){"boolean"==typeof e&&w.get(this._iid).set("isErrorFirstInCallback",e)}},{key:"getCurrentApiHost",value:function(){return this.customApiHost?this.customApiHost:"https://api.sendbird.com"}},{key:"clearCurrentApiHost",value:function(){this.customApiHost=null}},{key:"getCurrentWsHost",value:function(){return this.customWsHost?this.customWsHost:"wss://ws.sendbird.com"}},{key:"clearCurrentWsHost",value:function(){this.customWsHost=null}},{key:"getConnectionState",value:function(){try{var e=w.get(this._iid).container.wsAdapter;return this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:e.ws?this.connecting||this.reconnecting?this.ConnectionState.CONNECTING:this.isSessionOpened?e.ws.getConnectionState():this.ConnectionState.CLOSED:this.ConnectionState.CLOSED}catch(e){return this.ConnectionState.CLOSED}}},{key:"getPendingGCMToken",value:function(){return this.GCMPushToken}},{key:"getPendingAPNSToken",value:function(){return this.APNSPushToken}},{key:"hasLoggedIn",value:function(){var e=w.get(this._iid);return this.currentUser&&e.get("auth").hasSession()}},{key:"getLastConnectedAt",value:function(){var e=w.get(this._iid);return this.getConnectionState()===this.ConnectionState.OPEN&&this.currentUser?e.get("connectedAt"):0}},{key:"connect",value:function(e,t,n,r,a){var i=this,s=w.get(this._iid).container,o=s.wsAdapter,u=s.onlineDetector;u&&u.start();var l,c=E(q.parse(arguments,[new q({type:"string",constraint:function(e){return 0<e.length}}),new q({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||3===e.length}}),new q({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new q({type:"string",nullable:!0,ignoreIf:function(e){return 1===e.length||2===e.length}}),new q({type:"callback"})]),6);return l=c[0],e=c[1],t=c[2],n=c[3],r=c[4],a=c[5],ne(this._iid,function(a){l?a(l,null):(i.customApiHost=n,i.customWsHost=r,i.connecting=!0,i.reconnecting=!1,i.isReconnectingOnError=!1,i.reconnectTimer&&(clearTimeout(i.reconnectTimer),i.reconnectTimer=null,i.onReconnectTimerCancel=null),i.getConnectionState()===i.ConnectionState.OPEN&&i.currentUser&&i.currentUser.userId===e?(i.connecting=!1,a(null,i.currentUser)):(i.connectionCallbacks.push(a),1===i.connectionCallbacks.length&&(o.disconnect({clearSession:!0,err:null},null),o.connect(e,t))))},a)}},{key:"reconnect",value:function(){var e=w.get(this._iid).container,t=e.wsAdapter;if(e.auth.sessionKey&&this.currentUser){var n=!0;return 0<t.reconnectCount&&(n=!1),t.disconnect({clearSession:!1,err:new I("Connection has been canceled.",I.CONNECTION_CANCELED)},null),t.reconnectCount=0,t.reconnect(this.currentUser.userId,n),!0}return!1}},{key:"disconnect",value:function(e){var t=this;return ne(this._iid,function(e){var n=w.get(t._iid).container,r=n.wsAdapter,a=n.onlineDetector;a&&a.stop(),r.disconnect({clearSession:!0,err:new I("Connection has been canceled.",I.CONNECTION_CANCELED)},e)},e)}},{key:"setBackgroundState",value:function(){var e=w.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled;!t.isInBackground&&r&&(e.set("isInBackground",!0),this.getConnectionState()!==this.ConnectionState.CLOSED?(e.set("closedByGoingBackground",!0),n.disconnect({clearSession:!1,err:new I("Websocket connection failed.",I.WEBSOCKET_CONNECTION_FAILED)},null)):e.set("closedByGoingBackground",!1))}},{key:"setForegroundState",value:function(){var e=w.get(this._iid),t=e.container,n=t.wsAdapter,r=t.stateChangeEnabled,a=t.isInBackground,i=t.closedByGoingBackground;a&&r&&(e.set("isInBackground",!1),i&&this.currentUser&&n.reconnect(this.currentUser.userId,!0))}},{key:"enableStateChange",value:function(){w.get(this._iid).set("enableStateChange",!0)}},{key:"disableStateChange",value:function(){w.get(this._iid).set("enableStateChange",!1)}},{key:"addExtension",value:function(e,t){var n=w.get(this._iid).container,r=n.extensions;-1<n.supportedExtensionKeys.indexOf(e)&&(r[e]=t)}},{key:"createUserListQuery",value:function(e){return new(P.get(this._iid).UserListQuery)(e)}},{key:"createApplicationUserListQuery",value:function(){return new(P.get(this._iid).ApplicationUserListQuery)}},{key:"createBlockedUserListQuery",value:function(){return new(P.get(this._iid).BlockedUserListQuery)}},{key:"createFriendListQuery",value:function(){return new(P.get(this._iid).FriendListQuery)}},{key:"createMessageSearchQuery",value:function(e,t){return new(P.get(this._iid).MessageSearchQuery)(e,t)}},{key:"sendCommand",value:function(e,t){var n=this;return ne(this._iid,function(t){n.ConnectionManager.ready(function(r,a){if(r)t(r,null);else{var i=w.get(n._iid).container,s=i.wsAdapter,o=i.ackStateMap;if(null==s||null==s.ws||s.ws.getConnectionState()!==n.ConnectionState.OPEN||n.getConnectionState()!==n.ConnectionState.OPEN)return void t(new I("Connection is not valid. Please reconnect.",I.WEBSOCKET_CONNECTION_CLOSED),null);if(e.isAckRequired){var u=e.requestId,l={handler:t,timer:setTimeout(function(){t(new I("Command received no ack.",I.ACK_TIMEOUT),null),delete o[u]},O.COMMAND_ACK_TIMEOUT)};o[u]=l,s.ws.send(e,function(e){e&&(clearTimeout(l.timer),t(e,null))})}else s.ws.send(e,t)}},!1)},t)}},{key:"addUserEventHandler",value:function(e,t){t instanceof P.get(this._iid).UserEventHandler&&(this.userEventHandlers[e]=t)}},{key:"removeUserEventHandler",value:function(e){delete this.userEventHandlers[e]}},{key:"removeAllUserEventHandler",value:function(){this.userEventHandlers={}}},{key:"addChannelHandler",value:function(e,t){t instanceof P.get(this._iid).ChannelHandler&&(this.channelHandlers[e]=t)}},{key:"removeChannelHandler",value:function(e){delete this.channelHandlers[e]}},{key:"removeAllChannelHandlers",value:function(){this.channelHandlers={}}},{key:"addConnectionHandler",value:function(e,t){t instanceof P.get(this._iid).ConnectionHandler&&(this.connectionHandlers[e]=t)}},{key:"removeConnectionHandler",value:function(e){delete this.connectionHandlers[e]}},{key:"removeAllConnectionHandlers",value:function(){this.connectionHandlers={}}},{key:"updateCurrentUserInfo",value:function(e,t,n){var r,a=this,i=E(q.parse(arguments,[new q({type:"string",nullable:!0}),new q({type:"string",nullable:!0}),new q({type:"callback"})]),4);return r=i[0],e=i[1],t=i[2],n=i[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.updateCurrentUserInfo({nickname:e,profileUrl:t},function(r,i){var s=null;r||(a.currentUser&&(e&&(a.currentUser.nickname=e),t&&(a.currentUser.profileUrl=t)),s=a.currentUser),n(r,s)})},n)}},{key:"updateCurrentUserInfoWithProfileImage",value:function(e,t,n){var r,a=this,i=E(q.parse(arguments,[new q({type:"string",nullable:!0}),new q({type:"file",nullable:!0}),new q({type:"callback"})]),4);return r=i[0],e=i[1],t=i[2],n=i[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.updateCurrentUserInfo({nickname:e,profileImage:t},function(t,r){var i=null;t||(a.currentUser&&(e&&(a.currentUser.nickname=e),r.profile_url&&(a.currentUser.profileUrl=r.profile_url)),i=a.currentUser),n(t,i)})},n)}},{key:"updateCurrentUserInfoWithPreferredLanguages",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.updateCurrentUserInfo({preferredLanguages:e},function(n,a){var i=null;n||(r.currentUser&&e&&(r.currentUser._preferredLanguages=e),i=r.currentUser),t(n,i)})},t)}},{key:"registerGCMPushTokenForCurrentUser",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string",constraint:function(e){return 0<e.length}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,r.pushTokenRegistrationState.ERROR):r.currentUser?w.get(r._iid).container.apiClient.registerGCMPushToken({token:e},function(e,n){var a=r.pushTokenRegistrationState.ERROR;e||(r.GCMPushToken="",a=r.pushTokenRegistrationState.SUCCESS),t(e,a)}):(r.GCMPushToken=e,t(null,r.pushTokenRegistrationState.PENDING))},t)}},{key:"unregisterGCMPushTokenForCurrentUser",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string",constraint:function(e){return 0<e.length}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):r.currentUser?w.get(r._iid).container.apiClient.unregisterGCMPushToken({token:e},function(e,n){t(e,null)}):(r.GCMPushToken=e,t(null,r.pushTokenRegistrationState.PENDING))},t)}},{key:"unregisterGCMPushTokenAllForCurrentUser",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.unregisterAllGCMPushTokens({},function(t,n){e(t,null)})},e)}},{key:"registerAPNSPushTokenForCurrentUser",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string",constraint:function(e){return 0<e.length}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,r.pushTokenRegistrationState.ERROR):r.currentUser?w.get(r._iid).container.apiClient.registerAPNSPushToken({token:e},function(e,n){var a=r.pushTokenRegistrationState.ERROR;e||(r.APNSPushToken="",a=r.pushTokenRegistrationState.SUCCESS),t(e,a)}):(r.APNSPushToken=e,t(null,r.pushTokenRegistrationState.PENDING))},t)}},{key:"unregisterAPNSPushTokenForCurrentUser",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string",constraint:function(e){return 0<e.length}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):r.currentUser?w.get(r._iid).container.apiClient.unregisterAPNSPushToken({token:e},function(e,n){t(e,null)}):(r.APNSPushToken=e,t(null,r.pushTokenRegistrationState.PENDING))},t)}},{key:"unregisterAPNSPushTokenAllForCurrentUser",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.unregisterAllAPNSPushTokens({},function(t,n){e(t,null)})},e)}},{key:"unregisterPushTokenAllForCurrentUser",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.unregisterAllPushTokens({},function(t,n){e(t,null)})},e)}},{key:"getMyGroupChannelChangeLogsByToken",value:function(e,t,n,r){var a=this,i=null,s=E(q.parse(arguments,[new q({type:"string",nullable:!0}),new q({type:"array",optional:!0,nullable:!0,defaultValue:null}),new q({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new q({type:"callback"})]),5);i=s[0],e=s[1],t=s[2],n=s[3],r=s[4];var o=P.get(this._iid).GroupChannelChangeLogsParams,u=null;if(i){var l=E(q.parse(arguments,[new q({type:"string",nullable:!0}),new q({type:o,constraint:function(e){return e._validate()}}),new q({type:"callback"})]),4);i=l[0],e=l[1],u=l[2],r=l[3]}else(u=new o).customTypes=t,u.includeEmpty=n,u.includeFrozen=!0;return ne(this._iid,function(t){i?t(i,null):w.get(a._iid).container.apiClient.getMyGroupChannelChangeLogs(c({ts:null,token:e},u),function(e,n){if(e)t(e,null);else{var r=P.get(a._iid).GroupChannel,i=n.updated.map(function(e){return new r(e)}),s=n.deleted,o=n.has_more,u=n.next;t(null,{updatedChannels:i,deletedChannelUrls:s,hasMore:o,token:u})}})},r)}},{key:"getMyGroupChannelChangeLogsByTimestamp",value:function(e,t,n,r){var a=this,i=null,s=E(q.parse(arguments,[new q({type:"number",constraint:function(e){return 0<=e}}),new q({type:"array",optional:!0,nullable:!0,defaultValue:null}),new q({type:"boolean",nullable:!0,optional:!0,defaultValue:null}),new q({type:"callback"})]),5);i=s[0],e=s[1],t=s[2],n=s[3],r=s[4];var o=P.get(this._iid).GroupChannelChangeLogsParams,u=null;if(i){var l=E(q.parse(arguments,[new q({type:"number",constraint:function(e){return 0<=e}}),new q({type:o,constraint:function(e){return e._validate()}}),new q({type:"callback"})]),4);i=l[0],e=l[1],u=l[2],r=l[3]}else(u=new o).customTypes=t,u.includeEmpty=n,u.includeFrozen=!0;return ne(this._iid,function(t){i?t(i,null):w.get(a._iid).container.apiClient.getMyGroupChannelChangeLogs(c({ts:e,token:null},u),function(e,n){if(e)t(e,null);else{var r=P.get(a._iid).GroupChannel,i=n.updated.map(function(e){return new r(e)}),s=n.deleted,o=n.has_more,u=n.next;t(null,{updatedChannels:i,deletedChannelUrls:s,hasMore:o,token:u})}})},r)}},{key:"getChannelInvitationPreference",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.getChannelInvitationPreference({},function(t,n){var r=null;t||(r={autoAccept:n.auto_accept}),e(t,r)})},e)}},{key:"setChannelInvitationPreference",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"boolean"}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.setChannelInvitationPreference({isAutoAccept:e},function(e,n){var r=null;e||(r={autoAccept:n.auto_accept}),t(e,r)})},t)}},{key:"getDoNotDisturb",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.getDoNotDisturb({},function(t,n){var r=null;t||(r={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone}),e(t,r)})},e)}},{key:"setDoNotDisturb",value:function(e,t,n,r,a,i,s){var o,u=this,l=E(q.parse(arguments,[new q({type:"boolean"}),new q({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new q({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new q({type:"number",constraint:function(e){return 0<=e&&e<=23}}),new q({type:"number",constraint:function(e){return 0<=e&&e<=59}}),new q({type:"string"}),new q({type:"callback"})]),8);return o=l[0],e=l[1],t=l[2],n=l[3],r=l[4],a=l[5],i=l[6],s=l[7],ne(this._iid,function(s){o?s(o,null):w.get(u._iid).container.apiClient.setDoNotDisturb({doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:a,timezone:i},function(e,t){var n=null;e||(n={doNotDisturbOn:t.do_not_disturb,startHour:t.start_hour,startMin:t.start_min,endHour:t.end_hour,endMin:t.end_min,timezone:t.timezone}),s(e,n)})},s)}},{key:"getSnoozePeriod",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.getSnoozePeriod({},function(t,n){var r=null;t||(r={isSnoozeOn:n.snooze_enabled,startTs:n.snooze_start_ts,endTs:n.snooze_end_ts}),e(t,r)})},e)}},{key:"setSnoozePeriod",value:function(e,t,n,r){var a,i=this,s=E(q.parse(arguments,[new q({type:"boolean"}),new q({type:"number",constraint:function(e){return 0<e}}),new q({type:"number",constraint:function(e){return 0<e}}),new q({type:"callback"})]),5);return a=s[0],e=s[1],t=s[2],n=s[3],r=s[4],ne(this._iid,function(r){a?r(a,null):w.get(i._iid).container.apiClient.setSnoozePeriod({snoozeOn:e,startTs:t,endTs:n},function(e,t){var n=null;e||(n={isSnoozeOn:t.snooze_enabled,startTs:t.snooze_start_ts,endTs:t.snooze_end_ts}),r(e,n)})},r)}},{key:"blockUser",value:function(e,t){var n,r=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new q({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?ne(this._iid,function(e){e(n,null)},t):this.blockUserWithUserId(e.userId,t)}},{key:"blockUserWithUserId",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string",constraint:function(e){return e&&(!r.currentUser||e!==r.currentUser.userId)}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.blockUser({blockedUserId:e},function(e,n){var r=null;e||(r=new se(n)),t(e,r)})},t)}},{key:"unblockUser",value:function(e,t){var n,r=E(q.parse(arguments,[new q({type:"object",constraint:function(e){return e&&e.hasOwnProperty("userId")}}),new q({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?ne(this._iid,function(e){e(n,null)},t):this.unblockUserWithUserId(e.userId,t)}},{key:"unblockUserWithUserId",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string",constraint:function(e){return e&&(!r.currentUser||e!==r.currentUser.userId)}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.unblockUser({unblockedUserId:e},function(e,n){t(e,null)})},t)}},{key:"getPushTriggerOption",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.getPushTriggerOption({},function(t,n){e(t,n?n.push_trigger_option:null)})},e)}},{key:"setPushTriggerOption",value:function(e,t){var n=this;return ne(this._iid,function(t){-1<Object.keys(n.PushTriggerOption).map(function(e){return n.PushTriggerOption[e]}).indexOf(e)?w.get(n._iid).container.apiClient.setPushTriggerOption({pushTriggerOption:e},function(e,n){t(e,n?n.push_trigger_option:null)}):t(q.error,null)},t)}},{key:"getGroupChannelCount",value:function(e,t){var n,r=this,a=P.get(this._iid).GroupChannel,i=E(q.parse(arguments,[new q({type:a.MemberStateFilter,optional:!0,defaultValue:a.MemberStateFilter.ALL}),new q({type:"callback"})]),3);return n=i[0],e=i[1],t=i[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.getGroupChannelCount({memberStateFilter:e},function(e,n){var r=null;e||(r=parseInt(n.group_channel_count)),t(e,r)})},t)}},{key:"getTotalUnreadChannelCount",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.getTotalUnreadChannelCount({},function(t,n){var r=null;t||(r=parseInt(n.unread_count)),e(t,r)})},e)}},{key:"getTotalUnreadMessageCount",value:function(e,t){var n,r=this,a=P.get(this._iid),i=a.GroupChannel,s=a.GroupChannelTotalUnreadMessageCountParams,o=E(q.parse(arguments,[new q({type:"object",optional:!0,defaultValue:null,constraint:function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})||e instanceof s}}),new q({type:"callback"})]),3);return n=o[0],e=o[1],t=o[2],ne(this._iid,function(t){if(n)t(n,null);else{var a=i.SuperChannelFilter.ALL;if(e instanceof s){var o=e;e=o.channelCustomTypesFilter,a=o.superChannelFilter}w.get(r._iid).container.apiClient.getTotalUnreadMessageCount({customTypesFilter:e,superChannelFilter:a},function(e,n){var r=null;e||(r=parseInt(n.unread_count)),t(e,r)})}},t)}},{key:"getUnreadItemCount",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return 0<e.length&&e.every(function(e){return-1<Object.keys(Ue.UnreadItemKey).map(function(e){return Ue.UnreadItemKey[e]}).indexOf(e)})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){if(n)t(n,null);else{var a=e.filter(function(t,n){return e.indexOf(t)===n});w.get(r._iid).container.apiClient.getUnreadItemCount({keys:a},function(e,n){t(e,n)})}},t)}},{key:"getSubscribedTotalUnreadMessageCount",value:function(){var e=w.get(this._iid).container.subscribedUnreadMessageCount;return 0<=e.all?e.all:0}},{key:"getSubscribedCustomTypeTotalUnreadMessageCount",value:function(){var e=w.get(this._iid).container.subscribedUnreadMessageCount;if(0<Object.keys(e.custom_types).length){var t=0;for(var n in e.custom_types)t+=e.custom_types[n];return t}return 0}},{key:"getSubscribedCustomTypeUnreadMessageCount",value:function(e){if(e&&"string"==typeof e){var t=w.get(this._iid).container.subscribedUnreadMessageCount;return t.custom_types.hasOwnProperty(e)?t.custom_types[e]:0}return 0}},{key:"getMyPushTokensByToken",value:function(e,t,n){var r,a=this,i=E(q.parse(arguments,[new q({type:"string"}),new q({type:"string",constraint:function(e){return-1<["gcm","apns","apns_voip"].indexOf(e)}}),new q({type:"callback"})]),4);return r=i[0],e=i[1],t=i[2],n=i[3],ne(this._iid,function(n){r?n(r,null):w.get(a._iid).container.apiClient.getPushTokens({ts:null,token:e,type:t},function(e,t){if(e)n(e,null);else{var r=t.type;n(null,{deviceTokens:t.device_tokens,type:r?r.toLowerCase():"unknown",hasMore:t.has_more,token:t.token})}})},n)}},{key:"getPushTemplate",value:function(e){var t=this;return ne(this._iid,function(e){w.get(t._iid).container.apiClient.getPushTemplate({},function(t,n){var r=null;t||(r=n.name.toString()),e(t,r)})},e)}},{key:"setPushTemplate",value:function(e,t){var n=this;return ne(this._iid,function(t){-1<[n.PUSH_TEMPLATE_DEFAULT,n.PUSH_TEMPLATE_ALTERNATIVE].indexOf(e)?w.get(n._iid).container.apiClient.setPushTemplate({templateName:e},function(e,n){var r=null;e||(r=n.name.toString()),t(e,r)}):t(q.error,null)},t)}},{key:"markAsReadAll",value:function(e){var t=this;return ne(this._iid,function(e){var n=P.get(t._iid).GroupChannel,r=(new Date).getTime();r-n.markAsReadAllLastSentAt<1e3?e(new I("MarkAsRead rate limit exceeded.",I.MARK_AS_READ_RATE_LIMIT_EXCEEDED),null):(n.markAsReadAllLastSentAt=r,w.get(t._iid).container.apiClient.markAsReadAll({channelUrls:null},function(a,i){if(!a)for(var s in n.cachedChannels)t.currentUser&&n.cachedChannels[s].updateReadReceipt(t.currentUser.userId,r),n.cachedChannels[s]._setGroupChannelUnreadCount(0,0);e(a,null)}))},e)}},{key:"markAsReadWithChannelUrls",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){if(n)t(n,null);else{var a=(new Date).getTime();w.get(r._iid).container.apiClient.markAsReadAll({channelUrls:e},function(n,i){if(!n)for(var s in e){var o=e[s];Ue.cachedChannels[o]&&(r.currentUser&&Ue.cachedChannels[o].updateReadReceipt(r.currentUser.userId,a),Ue.cachedChannels[o]._setGroupChannelUnreadCount(0,0))}t(n,null)})}},t)}},{key:"markAsDelivered",value:function(e){"string"==typeof e&&P.get(this._iid).GroupChannel.getChannel(e,O.INTERNAL_CALL,function(e,t){e||t.markAsDelivered()})}},{key:"getFriendChangeLogsByToken",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string",optional:!0,defaultValue:null}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.getFriendChangeLogsByToken({token:e},function(e,n){var a=null;if(!e){var i=P.get(r._iid).User;a={updatedUsers:n.updated.map(function(e){return new i(e)}),deletedUserIds:n.deleted,hasMore:n.has_more,token:n.next}}t(e,a)})},t)}},{key:"uploadFriendDiscoveries",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return e.every(function(e){return e.hasOwnProperty("friendDiscoveryKey")})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.uploadFriendDiscoveries({discoveries:e},function(e,n){t(e,n)})},t)}},{key:"deleteFriendDiscovery",value:function(e,t){var n,r=E(q.parse(arguments,[new q({type:"string"}),new q({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?ne(this._iid,function(e){e(n,null)},t):this.deleteFriendDiscoveries([e],t)}},{key:"deleteFriendDiscoveries",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.deleteFriendDiscoveries({discoveryKeys:e},function(e,n){t(e,n)})},t)}},{key:"addFriends",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.addFriends({userIds:e},function(e,n){var a=null;if(!e){var i=P.get(r._iid).User;a=n.users.map(function(e){return new i(e)})}t(e,a)})},t)}},{key:"deleteFriend",value:function(e,t){var n,r=E(q.parse(arguments,[new q({type:"string"}),new q({type:"callback"})]),3);return n=r[0],e=r[1],t=r[2],n?ne(this._iid,function(e){e(n,null)},t):this.deleteFriends([e],t)}},{key:"deleteFriends",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"array",constraint:function(e){return e.every(function(e){return"string"==typeof e})}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.deleteFriends({userIds:e},function(e,n){t(e,n)})},t)}},{key:"getAllEmoji",value:function(e){var t,n=this,r=E(q.parse(arguments,[new q({type:"callback"})]),2);return t=r[0],e=r[1],ne(this._iid,function(e){t?e(t,null):w.get(n._iid).container.apiClient.getAllEmoji(function(t,r){if(t)e(t,null);else{var a=new(P.get(n._iid).EmojiContainer)(r);e(null,a)}})},e)}},{key:"getEmojiCategory",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"number",constraint:function(e){return 0<=e}}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.getEmojiCategory({categoryId:e},function(e,n){if(e)t(e,null);else{var a=new(P.get(r._iid).EmojiCategory)(n);t(null,a)}})},t)}},{key:"getEmoji",value:function(e,t){var n,r=this,a=E(q.parse(arguments,[new q({type:"string"}),new q({type:"callback"})]),3);return n=a[0],e=a[1],t=a[2],ne(this._iid,function(t){n?t(n,null):w.get(r._iid).container.apiClient.getEmoji({emojiKey:e},function(e,n){if(e)t(e,null);else{var a=new(P.get(r._iid).Emoji)(n);t(null,a)}})},t)}},{key:"ConnectionState",get:function(){return{CONNECTING:"CONNECTING",OPEN:"OPEN",CLOSED:"CLOSED"}}},{key:"MessageRequestState",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"}}},{key:"MessageSendingStatus",get:function(){return{NONE:"none",PENDING:"pending",FAILED:"failed",CANCELED:"canceled",SUCCEEDED:"succeeded"}}},{key:"pushTokenRegistrationState",get:function(){return{SUCCESS:"success",PENDING:"pending",ERROR:"error"}}},{key:"PushTriggerOption",get:function(){return{ALL:"all",MENTION_ONLY:"mention_only",OFF:"off"}}},{key:"appInfo",get:function(){return w.get(this._iid).container.appInfo}}],[{key:"getInstance",value:function(e){return e?St[e]:Ct}},{key:"version",get:function(){return O.SDK_VERSION}}]),e}();return At}(n(536),n(553),n(554))}).call(this,n(7),n(532).Buffer)},function(e,t,n){"use strict";function r(){var e=o(n(68));return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.isLeagueChannel=t.sbSetupChannelDetails=t.getChatName=t.sbAdjustMessageList=t.sbAreMessagesTenMinsApart=void 0;var a=n(87),i=o(n(88)),s=n(60);function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t){var n=new Date(e.createdAt),r=new Date(t.createdAt),a=Math.abs(n-r);return Math.floor(a/1e3/60)<10};t.sbAreMessagesTenMinsApart=u;t.sbAdjustMessageList=function(e){return e.map(function(t,n){if(t.sender&&(t.sender.isShow=!0),t.isUserMessage()||t.isFileMessage()?t.isUser=t.sender.userId===r().default.getInstance().getCurrentUserId():t.isUser=!1,n<e.length-1){var a=e[n+1];(t.isUserMessage()||t.isFileMessage())&&(a.isUserMessage()||a.isFileMessage())&&a.sender.userId===t.sender.userId&&u(a,t)&&(t.sender.isShow=!1)}return t})};var l=function(e){if("league"===e.customType)return e.name;var t=e.memberMap,n=e.name;return Object.keys(t).forEach(function(e){var r=t[e]||{};r.isMe||(n=r.nickname)}),n};t.getChatName=l;t.sbSetupChannelDetails=function(e){var t=e.members||[],n=((0,s.getChatsMapFromLocalStorage)()[e.url]||{}).isMinimized||!1;return t.map(function(t){var n=t;return n.isMe=(0,a.isUserMe)(t),n.isMe?(e.display_coverUrl||(e.display_coverUrl=e.coverUrl?e.coverUrl:i.default.DEFAULT_AVATAR),n):(e.display_coverUrl="league"!==e.customType?n.profileUrl?n.profileUrl:i.default.DEFAULT_AVATAR:e.coverUrl?e.coverUrl:i.default.DEFAULT_AVATAR,n)}),e.members=t,e.display_name=l(e),e.isMinimized=n,e};t.isLeagueChannel=function(e){return e.customType&&"league"===e.customType}},,,function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(4));t.default=r.default.shape({subscribe:r.default.func.isRequired,dispatch:r.default.func.isRequired,getState:r.default.func.isRequired})},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},function(e,t,n){"use strict";t.__esModule=!0,t.ActionTypes=void 0,t.default=function e(t,n,i){var o;"function"==typeof n&&void 0===i&&(i=n,n=void 0);if(void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var u=t;var l=n;var c=[];var d=c;var f=!1;function h(){d===c&&(d=c.slice())}function p(){return l}function y(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return h(),d.push(e),function(){if(t){t=!1,h();var n=d.indexOf(e);d.splice(n,1)}}}function g(e){if(!(0,r.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,l=u(l,e)}finally{f=!1}for(var t=c=d,n=0;n<t.length;n++){var a=t[n];a()}return e}g({type:s.INIT});return o={dispatch:g,subscribe:y,getState:p,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,g({type:s.INIT})}},o[a.default]=function(){var e,t=y;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(p())}n();var r=t(n);return{unsubscribe:r}}})[a.default]=function(){return this},e},o};var r=i(n(33)),a=i(n(135));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.ActionTypes={INIT:"@@redux/INIT"}},,function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}},function(e,t){},,,,,,,,function(e,t){var n;void 0===n&&(n={}),n.search={name:"search",height:24,width:24,path:"M9 3C5.686 3 3 5.686 3 9c0 3.313 2.686 6 6 6s6-2.687 6-6c0-3.314-2.686-6-6-6m13.713 19.713c-.387.388-1.016.388-1.404 0l-7.404-7.404C12.55 16.364 10.85 17 9 17c-4.418 0-8-3.582-8-8 0-4.42 3.582-8 8-8s8 3.58 8 8c0 1.85-.634 3.55-1.69 4.905l7.403 7.404c.39.386.39 1.015 0 1.403"},void 0!==e&&e.exports&&(e.exports=n.search)},function(e,t,n){"use strict";function r(){var e=function(e){return e&&e.__esModule?e:{default:e}}(n(68));return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.getMyUserObj=t.isUserMe=t.sbUnBlockUser=t.sbBlockUser=void 0;t.sbBlockUser=function(e){return new Promise(function(t,n){r().default.getInstance().blockUser(e,function(e,r){r?n(r):t(e)})})};t.sbUnBlockUser=function(e){return new Promise(function(t,n){r().default.getInstance().unblockUser(e,function(e,r){r?n(r):t(e)})})};t.isUserMe=function(e){var t=r().default.getInstance();return(t&&t.currentUser||{}).userId===e.userId};t.getMyUserObj=function(){return r().default.getInstance().currentUser||{}}},function(e){e.exports={MAX_OPEN_CHATS:2,CHAT_WIDTH_PIXELS:375,CHAT_SPACING_BETWEEN:10,RIGHT_PADDING:20,DEFAULT_AVATAR:"https://ct.yimg.com/cy/1768/39361574426_98028a_64sq.jpg",GIF_SOURCE:"www%40tenor",GIF_APPID:"fantasy-sports-chat",GIF_FILETYPE:"gif",GIF_DEFAULTQUERY:"sports",SURVEY_LINK:"https://www.surveymonkey.com/r/YRT7Q3Y"}},function(e,t){var n;void 0===n&&(n={}),n.information={name:"information",height:48,width:48,path:"M24.993 47.136c-12.13 0-22-9.868-22-22 0-12.13 9.87-22 22-22s22 9.87 22 22c0 12.132-9.87 22-22 22zm0-40c-9.925 0-18 8.075-18 18 0 9.927 8.075 18 18 18s18-8.073 18-18c0-9.925-8.075-18-18-18zM24.993 36.136c-1.104 0-2-.895-2-2v-10c0-1.104.896-2 2-2s2 .896 2 2v10c0 1.105-.895 2-2 2zM22.993 16.136a2 2 0 1 0 4 0 2 2 0 1 0-4 0z"},void 0!==e&&e.exports&&(e.exports=n.information)},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports={RapidManager:n(157),RapidPlugin:n(67)}},,,function(e,t){var n;void 0===n&&(n={}),n.checkmark={name:"checkmark",height:48,width:48,path:"M44.414 13.566c.78-.78.78-2.047 0-2.828-.78-.78-2.047-.78-2.826 0L18.98 33.344 8.374 22.738c-.78-.78-2.048-.78-2.828 0-.78.78-.78 2.047 0 2.828L18.98 39l25.434-25.434z"},void 0!==e&&e.exports&&(e.exports=n.checkmark)},,,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),a=s(n(4)),i=s(n(72));s(n(73));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a.store=n.store,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){return r.Children.only(this.props.children)},t}(r.Component);t.default=o,o.propTypes={store:i.default.isRequired,children:a.default.element.isRequired},o.childContextTypes={store:i.default.isRequired}},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},g=Boolean(e),m=e||d,_=void 0;_="function"==typeof t?t:t?(0,o.default)(t):f;var v=n||h,E=c.pure,b=void 0===E||E,C=c.withRef,S=void 0!==C&&C,O=b&&v!==h,A=y++;return function(e){var t="Connect("+function(e){return e.displayName||e.name||"Component"}(e)+")";var n=function(n){function i(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,r));a.version=A,a.store=e.store||r.store,(0,l.default)(a.store,'Could not find "store" in either the context or props of "'+t+'". Either wrap the root component in a <Provider>, or explicitly pass "store" as a prop to "'+t+'".');var s=a.store.getState();return a.state={storeState:s},a.clearCache(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n),i.prototype.shouldComponentUpdate=function(){return!b||this.haveOwnPropsChanged||this.hasStoreStateChanged},i.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},i.prototype.configureFinalMapState=function(e,t){var n=m(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:m,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},i.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},i.prototype.configureFinalMapDispatch=function(e,t){var n=_(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:_,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},i.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,s.default)(e,this.stateProps))&&(this.stateProps=e,!0)},i.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,s.default)(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},i.prototype.updateMergedPropsIfNeeded=function(){var e=function(e,t,n){var r=v(e,t,n);0;return r}(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&O&&(0,s.default)(e,this.mergedProps))&&(this.mergedProps=e,!0)},i.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},i.prototype.trySubscribe=function(){g&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},i.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},i.prototype.componentDidMount=function(){this.trySubscribe()},i.prototype.componentWillReceiveProps=function(e){b&&(0,s.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},i.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},i.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},i.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!b||t!==e){if(b&&!this.doStatePropsDependOnOwnProps){var n=function(e,t){try{return e.apply(t)}catch(e){return p.value=e,p}}(this.updateStatePropsIfNeeded,this);if(!n)return;n===p&&(this.statePropsPrecalculationError=p.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},i.prototype.getWrappedInstance=function(){return(0,l.default)(S,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},i.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,i=this.haveStatePropsBeenPrecalculated,s=this.statePropsPrecalculationError,o=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,s)throw s;var u=!0,l=!0;b&&o&&(u=n||t&&this.doStatePropsDependOnOwnProps,l=t&&this.doDispatchPropsDependOnOwnProps);var c=!1,d=!1;i?c=!0:u&&(c=this.updateStatePropsIfNeeded()),l&&(d=this.updateDispatchPropsIfNeeded());return!(!!(c||d||t)&&this.updateMergedPropsIfNeeded())&&o?o:(this.renderedElement=S?(0,a.createElement)(e,r({},this.mergedProps,{ref:"wrappedInstance"})):(0,a.createElement)(e,this.mergedProps),this.renderedElement)},i}(a.Component);return n.displayName=t,n.WrappedComponent=e,n.contextTypes={store:i.default},n.propTypes={store:i.default},(0,u.default)(n,e)}};var a=n(0),i=c(n(72)),s=c(n(132)),o=c(n(133)),u=(c(n(73)),c(n(33)),c(n(15))),l=c(n(23));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){return{}},f=function(e){return{dispatch:e}},h=function(e,t,n){return r({},n,e,t)};var p={value:null};var y=0},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty,i=0;i<n.length;i++)if(!a.call(t,n[i])||e[n[i]]!==t[n[i]])return!1;return!0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return function(t){return(0,r.bindActionCreators)(e,t)}};var r=n(36)},,function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(e){return e&&e.__esModule?e:{default:e}}(n(136));a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var s=(0,i.default)(a);t.default=s}).call(this,n(9),n(75)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.Symbol;"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable";return t}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){for(var t=Object.keys(e),n={},a=0;a<t.length;a++){var s=t[a];0,"function"==typeof e[s]&&(n[s]=e[s])}var o=Object.keys(n);0;var u=void 0;try{!function(e){Object.keys(e).forEach(function(t){var n=e[t],a=n(void 0,{type:r.ActionTypes.INIT});if(void 0===a)throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===n(void 0,{type:i}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+r.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){u=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(u)throw u;for(var r=!1,a={},s=0;s<o.length;s++){var l=o[s],c=n[l],d=e[l],f=c(d,t);if(void 0===f){var h=i(l,t);throw new Error(h)}a[l]=f,r=r||f!==d}return r?a:e}};var r=n(74);a(n(33)),a(n(76));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}},function(e,t,n){"use strict";function r(e,t){return function(){return t(e.apply(void 0,arguments))}}t.__esModule=!0,t.default=function(e,t){if("function"==typeof e)return r(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),a={},i=0;i<n.length;i++){var s=n[i],o=e[s];"function"==typeof o&&(a[s]=r(o,t))}return a}},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,i,s){var o=e(n,i,s),u=o.dispatch,l=[],c={getState:o.getState,dispatch:function(e){return u(e)}};return l=t.map(function(e){return e(c)}),u=a.default.apply(void 0,l)(o.dispatch),r({},o,{dispatch:u})}}};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(77))},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){!function(e){var t=function(e){return e}("undefined"!=typeof self?self:this),n={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(n.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function c(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function d(e){var t=new FileReader,n=c(t);return t.readAsArrayBuffer(e),n}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:n.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():n.arrayBuffer&&n.blob&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=c(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=i(e),t=s(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},u.prototype.delete=function(e){delete this.map[i(e)]},u.prototype.get=function(e){return e=i(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},u.prototype.set=function(e,t){this.map[i(e)]=s(t)},u.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},n.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var n=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=function(e){var t=e.toUpperCase();return p.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var r=/([?&])_=[^&]*/;r.test(this.url)?this.url=this.url.replace(r,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function g(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}}),t}function m(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},h.call(y.prototype),h.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];function v(r,a){return new Promise(function(i,s){var o=new y(r,a);if(o.signal&&o.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function c(){l.abort()}l.onload=function(){var e={status:l.status,statusText:l.statusText,headers:function(e){var t=new u;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var a=n.join(":").trim();t.append(r,a)}}),t}(l.getAllResponseHeaders()||"")};e.url="responseURL"in l?l.responseURL:e.headers.get("X-Request-URL");var t="response"in l?l.response:l.responseText;setTimeout(function(){i(new m(t,e))},0)},l.onerror=function(){setTimeout(function(){s(new TypeError("Network request failed"))},0)},l.ontimeout=function(){setTimeout(function(){s(new TypeError("Network request failed"))},0)},l.onabort=function(){setTimeout(function(){s(new e.DOMException("Aborted","AbortError"))},0)},l.open(o.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?l.withCredentials=!0:"omit"===o.credentials&&(l.withCredentials=!1),"responseType"in l&&(n.blob?l.responseType="blob":n.arrayBuffer&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(l.responseType="arraybuffer")),o.headers.forEach(function(e,t){l.setRequestHeader(t,e)}),o.signal&&(o.signal.addEventListener("abort",c),l.onreadystatechange=function(){4===l.readyState&&o.signal.removeEventListener("abort",c)}),l.send(void 0===o._bodyInit?null:o._bodyInit)})}m.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException,"function"!=typeof e.DOMException&&(e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException),v.polyfill=!0,t.fetch||(t.fetch=v,t.Headers=u,t.Request=y,t.Response=m),e.Headers=u,e.Request=y,e.Response=m,e.fetch=v,Object.defineProperty(e,"__esModule",{value:!0})}(t)},,function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(a){return"function"==typeof a?a(n,r,e):t(a)}}}}t.__esModule=!0;var a=r();a.withExtraArgument=r,t.default=a},function(e,t,n){"use strict";function r(){var e=l(n(555));return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.params,a=t.errorBeacon,i=e?d(e,t.env):{},s=n||f(i,r);return fetch(s,{credentials:i.credentials,mode:i.mode}).then(h).then(function(e){return"text"===i.format?e.text().then(function(e){return e.split("\n")}):e.json()}).catch(function(t){throw a&&a(e+".fail",s),console.warn("error",t),t})},t.post=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.params,r=t.errorBeacon,a=d(e,t.env),i=f(a,n);return fetch(i,{credentials:a.credentials,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(h).then(function(e){return"text"===a.format?e.text().then(function(e){return e.split("\n")}):e.json()}).catch(function(t){throw r&&r(e+".fail",i),console.warn("error",t),t})},n(165);var a=l(n(557));function i(){var e=l(n(561));return i=function(){return e},e}function s(){var e=l(n(37));return s=function(){return e},e}function o(){var e=l(n(38));return o=function(){return e},e}function u(){var e=l(n(41));return u=function(){return e},e}function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r,a,i,s){try{var o=e[i](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,a)}function d(e,t){var n=e.split(".",2),r=a.default[n[0]],i=r.environments,s=r.resources[n[1]];return Object.assign({},i.default,i[t],s)}function f(e,t){var n=Object.assign({},e.defaults,t);return(0,s().default)({protocol:e.protocol,host:e.host,path:(e.rootPath||"")+(0,o().default)(e.path,n),query:(0,u().default)(n,e.query)})}function h(e){return p.apply(this,arguments)}function p(){return(p=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function s(e){c(i,r,a,s,o,"next",e)}function o(e){c(i,r,a,s,o,"throw",e)}s(void 0)})}}(r().default.mark(function e(t){return r().default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.status>=200&&t.status<300)){e.next=4;break}return e.abrupt("return",t);case 4:return e.next=6,t.json();case 6:throw e.sent;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}window.Promise||(window.Promise=i().default)},function(e,t){var n;void 0===n&&(n={}),n.CoreArrowLeft={name:"CoreArrowLeft",height:32,width:32,path:"M22.72.665c-.886-.887-2.323-.887-3.21 0L4.175 16 19.51 31.335c.442.443 1.023.665 1.604.665s1.162-.222 1.605-.665c.886-.887.886-2.324 0-3.21L10.596 16 22.72 3.876c.887-.887.887-2.324 0-3.21z"},void 0!==e&&e.exports&&(e.exports=n.CoreArrowLeft)},function(e){e.exports={reactionLimit:20,defaultEmojis:{"rxn_+1":{char:"👍"},"rxn_-1":{char:"👎"},rxn_crossed_fingers:{char:"🤞"},rxn_clap:{char:"👏"},rxn_wave:{char:"👋"},rxn_muscle:{char:"💪"},rxn_pray:{char:"🙏"},rxn_slightly_smiling_face:{char:"🙂"},rxn_joy:{char:"😂"},rxn_stuck_out_tongue:{char:"😛"},rxn_heart_eyes:{char:"😍"},rxn_sunglasses:{char:"😎"},rxn_disappointed:{char:"😞"},rxn_cry:{char:"😢"},rxn_scream:{char:"😱"},rxn_rage:{char:"😡"},rxn_roll_eyes:{char:"🙄"},rxn_thinking:{char:"🤔"},rxn_fire:{char:"🔥"},rxn_beer:{char:"🍺"},rxn_moneybag:{char:"💰"},rxn_money_with_wings:{char:"💸"},rxn_soccer:{char:"⚽"},rxn_basketball:{char:"🏀"},rxn_football:{char:"🏈"},rxn_baseball:{char:"⚾"},rxn_ice_hockey:{char:"🏒"},rxn_trophy:{char:"🏆"},rxn_rotating_light:{char:"🚨"},rxn_goat:{char:"🐐"},rxn_eyes:{char:"👀"},rxn_tada:{char:"🎉"},rxn_heart:{char:"❤️"},rxn_broken_heart:{char:"💔"},rxn_100:{char:"💯"},rxn_poop:{char:"💩"}}}},function(e,t,n){"use strict";e.exports={primaryButton:"D(b) Cur(p) Bgc(#0078ff) Bdrs(3px) Bdw(1px) Bds(s) Bdc(#0078ff) C(#fff) Px(20px) Py(9px) Bgc(#3393ff):h C(#fff):h Td(n)! Ell",secondaryButton:"D(b) Cur(p) Bgc(#fff) Bdrs(3px) Bdw(1px) Bds(s) Bdc(#0078ff) C(#0078ff) Px(20px) Py(9px) Bgc(#0078ff):h C(#fff):h Td(n)! Ell",chatPointerWrapper:"Bgc(normal-black) C(white) Px(10px) Va(m) H(35px) D(f)",chatPointer:"Pos(a) T(-15px) Start(110px) W(0px) H(0px) Bds(s) Bdc(t) Bdbc(normal-black) Bdendw(15px) Bdstartw(15px) Bdbw(15px)",chatListWrapper:"W(280px) Ta(s) Va(t) Pos(a) Z(2147483647) Bxsh(chat-list-box-shadow) D(n)!",unreadIndicator:"Anim(pulse) Z(2147483640) Pos(a) Pstart(1px) Va(m) Fw(b) Bgc(notification-color) Bdrs(50%) H(11px) W(11px) Fz(11px) C(white) Ta(c) As(c)"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(11);function a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,function(e,t){null!==e&&void 0!==e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(a(t)+"="+a(e))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(11),a=n(542),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(255):void 0!==t&&"[object process]"===Object.prototype.toString.call(t)&&(e=n(255)),e}(),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){o.headers[e]={}}),r.forEach(["post","put","patch"],function(e){o.headers[e]=r.merge(i)}),e.exports=o}).call(this,n(7))},function(e,t,n){"use strict";var r=n(11),a=n(543),i=n(252),s=n(545),o=n(548),u=n(549),l=n(256);e.exports=function(e){return new Promise(function(t,c){var d=e.data,f=e.headers;r.isFormData(d)&&delete f["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",y=e.auth.password||"";f.Authorization="Basic "+btoa(p+":"+y)}var g=s(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),i(g,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?o(h.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:e,request:h};a(t,c,r),h=null}},h.onabort=function(){h&&(c(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){c(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),c(l(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var m=n(550),_=(e.withCredentials||u(g))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;_&&(f[e.xsrfHeaderName]=_)}if("setRequestHeader"in h&&r.forEach(f,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete f[t]:h.setRequestHeader(t,e)}),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),c(e),h=null)}),void 0===d&&(d=null),h.send(d)})}},function(e,t,n){"use strict";var r=n(544);e.exports=function(e,t,n,a,i){var s=new Error(e);return r(s,t,n,a,i)}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e,t){t=t||{};var n={},a=["url","method","params","data"],i=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(a,function(e){void 0!==t[e]&&(n[e]=t[e])}),r.forEach(i,function(a){r.isObject(t[a])?n[a]=r.deepMerge(e[a],t[a]):void 0!==t[a]?n[a]=t[a]:r.isObject(e[a])?n[a]=r.deepMerge(e[a]):void 0!==e[a]&&(n[a]=e[a])}),r.forEach(s,function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])});var o=a.concat(i).concat(s),u=Object.keys(t).filter(function(e){return-1===o.indexOf(e)});return r.forEach(u,function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;try{t=JSON.parse(e)}catch(e){}return t},e.exports=t.default},function(e,t,n){"use strict";function r(){var e=function(e){return e&&e.__esModule?e:{default:e}}(n(68));return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.setDoneTyping=t.setTyping=t.markAsRead=t.createChatHandler=t.registerGroupChannelHandler=t.startNewChat=t.initLocalStorageChats=t.toggleChatMinimize=t.closeChat=t.openChat=t.getGroupChannelList=void 0;var a=n(22),i=n(261),s=n(60),o=n(69);t.getGroupChannelList=function(e,t){var n=[];return function(r){e.hasNext?(0,i.sbGetGroupChannelList)(e).then(function(e){e=e.reduce(function(e,t){return t.firstLoad=!0,e[t.url]=t,n.push(t.url),e},{}),r(t?{type:a.GROUP_CHANNEL_LIST_SUCCESS,channels:e,channelsOrder:n}:{type:a.NEW_GROUP_CHANNEL_LIST_SUCCESS,channels:e,channelsOrder:n})}).catch(function(e){return r({type:a.GROUP_CHANNEL_LIST_FAIL})}):r({type:a.GROUP_CHANNEL_LIST_FAIL})}};t.openChat=function(e,t){return(0,s.toggleChatList)(),(0,s.addChatToLocalStorage)(t),e=(0,i.sbMarkChannelAsRead)(e),function(n){n({type:a.OPEN_CHAT_SUCCESS,channelUrl:t,channel:e})}};t.closeChat=function(e){return(0,s.removeChatFromLocalStorage)(e),function(t){t({type:a.CLOSE_CHAT_SUCCESS,channelUrl:e})}};t.toggleChatMinimize=function(e){return(0,s.toggleChatMinStateLocalStorage)(e),function(t){t({type:a.TOGGLE_CHAT_MINIMIZE_SUCCESS,channelUrl:e})}};t.initLocalStorageChats=function(){var e=(0,s.getActiveChatListFromLocalStorage)();return function(t){t({type:a.OPEN_CHAT_SUCCESS,channelUrl:e})}};t.startNewChat=function(e,t){return function(n){(0,i.sbCreateGroupChannel)(e,t).then(function(e){(0,s.addChatToLocalStorage)(e.url),n({type:a.OPEN_CHAT_SUCCESS,channelUrl:e.url}),n({type:a.START_NEW_CHAT_SUCCESS,channel:e})}).catch(function(e){return n({type:a.START_NEW_CHAT_FAILURE})})}};var u=function(e,t){var n=r().default.getInstance()||{},i=new n.ChannelHandler||{};i.onMessageReceived=function(e,n){t({type:a.MESSAGE_RECEIVED,payload:n,channel:(0,o.sbSetupChannelDetails)(e)})},i.onMessageUpdated=function(e,n){t({type:a.MESSAGE_UPDATED,payload:n,channel:(0,o.sbSetupChannelDetails)(e)})},i.onMessageDeleted=function(e,n){e.refresh(function(e){t({type:a.MESSAGE_DELETED,payload:n,channel:(0,o.sbSetupChannelDetails)(e)})})},i.onTypingStatusUpdated=function(e){t({type:a.TYPING_STATUS_UPDATED,payload:e.getTypingMembers(),channel:e})},n.addChannelHandler(e,i)};t.registerGroupChannelHandler=u;t.createChatHandler=function(e){return function(t){u(e,t),t({type:a.CREATE_CHAT_HANDLER_SUCCESS})}};t.markAsRead=function(e){return e=(0,i.sbMarkChannelAsRead)(e),function(t){t({type:a.MARK_AS_READ,channel:e})}};t.setTyping=function(e){return e=(0,i.sbMarkChannelAsTyping)(e),function(t){t({type:a.USER_IS_TYPING,channel:e})}};t.setDoneTyping=function(e){return e=(0,i.sbMarkChannelAsDoneTyping)(e),function(t){t({type:a.USER_IS_DONE_TYPING,channel:e})}}},function(e,t,n){"use strict";function r(){var e=function(e){return e&&e.__esModule?e:{default:e}}(n(68));return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.sbMarkChannelAsDoneTyping=t.sbMarkChannelAsTyping=t.sbMarkChannelAsRead=t.sbCreateGroupChannel=t.sbGetGroupChannelList=t.sbGetChannelMetadata=t.sbCreateGroupChannelListQuery=void 0;var a=n(69);function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.sbCreateGroupChannelListQuery=function(){var e=(r().default.getInstance()||{}).GroupChannel,t=e?e.createMyGroupChannelListQuery():{};return t.includeEmpty=!0,t};var o=function(e){var t=Object.keys(e.memberMap);return t=t.reduce(function(e,t){return e.push("userTeamLogoUrl_"+t,"userTeamName_"+t),e},[]),new Promise(function(n,r){e.getMetaData(t,function(e,t){t?r(t):n(e)})})};t.sbGetChannelMetadata=o;t.sbGetGroupChannelList=function(e){return new Promise(function(t,n){e.next(function(e,r){r?n(r):Promise.all(e.map(function(e){return new Promise(function(t){e=(0,a.sbSetupChannelDetails)(e),o(e).then(function(n){e.metaData=n,t(e)}).catch(function(e){return console.error(e)})})})).then(function(e){return t(e)})})})};t.sbCreateGroupChannel=function(e,t){var n=(r().default.getInstance()||{}).GroupChannel||{};return new Promise(function(r,s){n.createChannelWithUserIds(i(e),!0,t,"","","direct_message",function(e,t){t?s(t):(e=(0,a.sbSetupChannelDetails)(e),r(e))})})};t.sbMarkChannelAsRead=function(e){return e?(e.markAsRead(),e.unreadMessageCount=0,e):{}};t.sbMarkChannelAsTyping=function(e){return e?(e.startTyping(),e):{}};t.sbMarkChannelAsDoneTyping=function(e){return e?(e.endTyping(),e):{}}},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(2);return a=function(){return e},e}function i(){var e=n(5);return i=function(){return e},e}function s(){var e=n(6);return s=function(){return e},e}function o(){var e=g(n(61));return o=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=g(n(567));function l(){var e=g(n(1));return l=function(){return e},e}var c=g(n(569)),d=g(n(264)),f=g(n(88)),h=g(n(170)),p=n(87),y=g(n(574));function g(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function _(e){"@babel/helpers - typeof";return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var a=S(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;return C(e)}(this,n)}}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(n,r().Component);var t=b(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={showUserOverlay:!1,selectedUser:{},showReportOverlay:!1,reportingReason:""},r.openReportOverlay=r.openReportOverlay.bind(C(r)),r.hideReportOverlay=r.hideReportOverlay.bind(C(r)),r.reportMessage=r.reportMessage.bind(C(r)),r.hideUserOverlay=r.hideUserOverlay.bind(C(r)),r.showUserOverlay=r.showUserOverlay.bind(C(r)),r.deleteMessage=r.deleteMessage.bind(C(r)),r.openEmojiPicker=r.openEmojiPicker.bind(C(r)),r}return function(e,t,n){t&&v(e.prototype,t),n&&v(e,n)}(n,[{key:"openEmojiPicker",value:function(e){this.props.selectMessage(this.props.message),this.props.showEmojiPicker(e)}},{key:"openReportOverlay",value:function(){this.setState({showReportOverlay:!0})}},{key:"hideReportOverlay",value:function(){this.setState({showReportOverlay:!1})}},{key:"updateReportingReason",value:function(e){e&&e.target&&this.setState({reportingReason:e.target.value})}},{key:"reportMessage",value:function(){var e=this.state.reportingReason,t=this.props.message||{},n=t.messageId,r=t.channelUrl;n&&r&&(this.props.reportMessage(n,r,e),this.hideReportOverlay())}},{key:"deleteMessage",value:function(){var e=this.props.message||{};e&&e.messageId&&this.props.deleteMessage(e)}},{key:"showUserOverlay",value:function(e){(e.hasOwnProperty("isMe")&&!e.isMe||!(0,p.isUserMe)(e))&&this.setState({showUserOverlay:!0,selectedUser:e})}},{key:"hideUserOverlay",value:function(){this.setState({showUserOverlay:!1,selectedUser:{}})}},{key:"render",value:function(){var e=this,t=this.props,n=this.state,g=t.userId,m=t.showReactions,_=t.hideOptions,v=n.selectedUser,E=n.showUserOverlay,b=n.showReportOverlay,C=n.reportingReason,S=t.message||{},O=t.fantasyMetadata||{},A=Object.keys(O).length,U=S.sender||{},w=(0,p.isUserMe)(U),I=S.metaArrays||[],M=U.userId,T=O["userTeamName_"+M],N=O["userTeamLogoUrl_"+M],R=U.nickname,k=N||(U.profileUrl?U.profileUrl:f.default.DEFAULT_AVATAR),P=U.isShow||t.forceShowSender,L=m&&I.length<h.default.reactionLimit&&!_,D=t.memberMap,x=t.readStatusMap,H=x&&Object.keys(x).filter(function(e){return S.createdAt===x[e].last_seen_at});return r().default.createElement("div",{className:"ysf-message Bgc(grey-default):h"},r().default.createElement("div",{className:(0,l().default)({"Mt(12px)":P})},P?r().default.createElement("div",{className:"D(ib) W(15%) Va(t) Ta(c)"},r().default.createElement("span",{onKeyDown:A?function(){return e.showUserOverlay(U)}:null,role:"button",tabIndex:0,onClick:A?function(){return e.showUserOverlay(U)}:null},r().default.createElement("img",{src:k,className:(0,l().default)("Bdrs(50%)",{"Cur(p)":A}),alt:"Profile",width:"40px",height:"40px"}))):r().default.createElement("div",{className:"D(ib) W(15%) Va(t)"}),r().default.createElement(c.default,{isShow:P,firstName:R,teamName:T,message:S,showFocusedImageMedia:t.showFocusedImageMedia,showDeleteBtn:w,deleteMessage:this.deleteMessage,openReportOverlay:this.openReportOverlay,openEmojiPicker:this.openEmojiPicker,canAddReaction:L,hideOptions:_,focusedMediaOverride:t.focusedMediaOverride})),m?r().default.createElement("div",{className:"Mstart(15%) W(300px)"},r().default.createElement(u.default,{message:t.message,metaArrays:I,userId:g,addReaction:t.addReaction,removeReaction:t.removeReaction,openEmojiPicker:this.openEmojiPicker,canAddReaction:L,disableInteractions:_,memberMap:D,intl:t.intl})):null,H&&H.length?r().default.createElement("div",{className:"W(100%) Ta(end) Pend(20px) Fz(12px) C(grey-8)"},r().default.createElement(y.default,{intl:t.intl,readReceiptIds:H,memberMap:D,isDirectMessage:t.isDirectMessage})):null,r().default.createElement("span",null,b?r().default.createElement("div",{className:"Pos(a) H(overlay-height) W(100%) T(0px) Bgc(bg-overlay) Z(1)"},r().default.createElement("div",{className:"Bgc(white) Bdrs(3px) W(85%) Mx(a) Mt(180px) P(10px)"},r().default.createElement(i().I13nDiv,{i13nModel:{sec:"chat_close_block_overlay"},bindClickEvent:!0,className:"O(n):f Cur(p) Ta(e)",onClick:function(){return e.hideReportOverlay()}},r().default.createElement(s().Icon,{role:"button",className:"Cur(p)!",color:"#787d82",asset:o().default,height:"15",width:"15"})),r().default.createElement("div",{className:"Fz(15px) Pb(7px) Ta(c)"},r().default.createElement(a().FormattedMessage,{id:"REPORT_MESSAGE"}),r().default.createElement("div",{className:"Pt(10px) Fz(11px)"},r().default.createElement(a().FormattedMessage,{id:"REASON_FOR_REPORTING"})),r().default.createElement("div",{className:"Pt(5px) Ta(s)"},r().default.createElement("input",{className:"Mx(a) W(95%)",onChange:function(t){return e.updateReportingReason(t)},type:"text",value:C,id:"reportingReason"})),r().default.createElement("div",{className:"Ta(c) Pt(15px)"},r().default.createElement(i().I13nDiv,{i13nModel:{sec:"chat_report_message"},bindClickEvent:!0,onClick:function(){return e.reportMessage()},className:"D(b) Cur(p) Bgc(#0078ff) Bgc(#3393ff):h Py(10px) Px(8px) W(70%) Mx(a) C(white) Bdrs(3px)"},r().default.createElement(a().FormattedMessage,{id:"REPORT"})))))):null),r().default.createElement("span",null,E?r().default.createElement(d.default,{selectedUser:v,chatMetaData:O,hideUserOverlay:this.hideUserOverlay,startChat:this.props.startChat,blockChatUser:this.props.blockChatUser,unBlockChatUser:this.props.unBlockChatUser}):null))}}]),n}();t.default=O,e.exports=t.default},function(e,t){var n;void 0===n&&(n={}),n["add-reaction"]={name:"add-reaction",height:48,width:48,path:"M24 0c13.3 0 24 10.7 24 24S37.3 48 24 48c-3.3 0-6.4-.7-9.2-1.8 1.9-.3 3.5-1.5 4.4-3.1 1.5.4 3.1.6 4.8.6 10.8 0 19.6-8.8 19.6-19.6S34.8 4.4 24 4.4 4.4 13.2 4.4 24c0 1.7.2 3.3.6 4.8-1.6.9-2.8 2.5-3.1 4.4C.7 30.4 0 27.3 0 24 0 10.7 10.7 0 24 0zM8 32c1.3 0 2.3 1 2.3 2.3v3.4h3.4c1.3 0 2.3 1 2.3 2.3s-1 2.3-2.3 2.3h-3.4v3.6C10.2 47 9.2 48 8 48c-1.2 0-2.2-1-2.3-2.1v-3.6H2.1C1 42.2 0 41.2 0 40c0-1.2 1-2.2 2.1-2.3h3.6v-3.4C5.7 33 6.7 32 8 32zm26.9-8c1.5 0 2.6 1.4 2.1 2.8-1.3 3.4-5 5.9-9.3 5.9s-8-2.5-9.3-5.9c-.6-1.4.6-2.8 2-2.8h14.5zM20.7 13.1c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3-1.8 0-3.3-1.5-3.3-3.3.1-1.8 1.5-3.3 3.3-3.3zm13.1 0c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3-1.8 0-3.3-1.5-3.3-3.3 0-1.8 1.5-3.3 3.3-3.3z"},void 0!==e&&e.exports&&(e.exports=n["add-reaction"])},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(2);return a=function(){return e},e}function i(){var e=n(5);return i=function(){return e},e}function s(){var e=n(6);return s=function(){return e},e}function o(){var e=c(n(61));return o=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=c(n(171)),l=n(87);function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;return g(e)}(this,n)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,r().Component);var t=y(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).openNewDirectMessage=r.openNewDirectMessage.bind(g(r)),r}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(n,[{key:"openNewDirectMessage",value:function(e){var t=(0,l.getMyUserObj)();if(e&&e.userId&&t&&t.userId){var n=e.nickname+" - "+t.nickname;this.props.startChat([e.userId,t.userId],n)}this.props.hideUserOverlay()}},{key:"blockSelectedUser",value:function(e,t){this.props.blockChatUser(t),this.props.hideUserOverlay()}},{key:"unBlockSelectedUser",value:function(e,t){this.props.unBlockChatUser(t),this.props.hideUserOverlay()}},{key:"render",value:function(){var e=this,t=this.props,n=t.chatMetaData||{},l=t.selectedUser||{},c=l.userId||"",d=l.nickname,f=n["userTeamName_"+c],h=l.isBlockedByMe,p=r().default.createElement("div",{className:"Ta(c) Pt(7px)"},r().default.createElement(i().I13nDiv,{i13nModel:{sec:"chat_info_block"},bindClickEvent:!0,onClick:h?function(t){return e.unBlockSelectedUser(t,l,d)}:function(t){return e.blockSelectedUser(t,l,d)},className:u.default.secondaryButton},r().default.createElement(a().FormattedMessage,{id:h?"UNBLOCK_USER_X":"BLOCK_USER_X",values:{userName:d}})));return r().default.createElement("div",{className:"Pos(a) H(overlay-height) W(100%) T(0px) Bgc(bg-overlay) Z(1)"},r().default.createElement("div",{className:"Bgc(white) Bdrs(3px) W(85%) Mx(a) Mt(180px) P(10px) Pos(r)"},r().default.createElement(i().I13nDiv,{i13nModel:{sec:"chat_close_block_overlay"},bindClickEvent:!0,className:"O(n):f Pos(a) T(0) End(0) Pt(10px) Pend(10px)",onClick:function(){return e.props.hideUserOverlay()}},r().default.createElement(s().Icon,{role:"button",className:"Cur(p)!",color:"#787d82",asset:o().default,height:"15",width:"15"})),r().default.createElement("div",{className:"Fz(13px) C(#787d82) Pb(7px) Ta(c) Maw(80%)! Mx(a) Ell Whs(nw)"},r().default.createElement("span",{className:"Mend(3px)"},d),r().default.createElement("span",null,"(",f,")")),r().default.createElement("div",{className:"Ta(c) Pt(7px)"},r().default.createElement(i().I13nDiv,{i13nModel:{sec:"chat_open_direct_message_click"},bindClickEvent:!0,onClick:function(t){return e.openNewDirectMessage(l)},className:u.default.primaryButton},r().default.createElement(a().FormattedMessage,{id:"OPEN_DIRECT_MESSAGE"}))),p))}}]),n}();t.default=_,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(2);return a=function(){return e},e}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,r().Component);var t=l(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(n,[{key:"componentDidMount",value:function(){this.messageInputText.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.intl;return r().default.createElement("div",{className:"W(100%)"},r().default.createElement("textarea",{placeholder:n.formatMessage({id:"ADD_A_MESSAGE"}),rows:"1",ref:function(t){e.messageInputText=t},id:t.name,name:t.name,onKeyDown:function(e){return t.keyPressHandler(e)},value:t.textMessage,onChange:function(e){return t.onChangeHandler(e)},className:"Fz(14px) H(30px) Rsz(n) P(5px) O(n) Mih(30px) Ovy(s) Ovx(h) Mah(90px) Pos(a) W(100%) B(0px) End(0px) Bgc(white) Bds(s) Bdw(1px) Bdc(border-color)"}))}}]),n}(),f=(0,a().injectIntl)(d);t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=function(e){return e&&e.__esModule?e:{default:e}}(n(68));return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.sbDeleteMetaArrayKey=t.sbRemoveMessageMetaArrayValue=t.sbCreateMetaArrayKey=t.sbAddMessageMetaArrayValue=t.sbDeleteMessage=t.sbSendFileMessage=t.sbSendTextMessage=t.sbGetMessageList=t.sbCreatePreviousMessageListQuery=void 0;t.sbCreatePreviousMessageListQuery=function(e,t){return new Promise(function(e,n){t?e(t.createPreviousMessageListQuery()):n("Channel is Undefined")})};t.sbGetMessageList=function(e){return e.includeMetaArray=!0,new Promise(function(t,n){e.load(30,!0,function(e,r){r?n(r):t(e)})})};t.sbSendTextMessage=function(e,t,n){return e.sendUserMessage(t,function(e,t){n(e,t)})};t.sbSendFileMessage=function(e,t,n,a,i,s){var o=new((r().default.getInstance()||{}).FileMessageParams);return"gif"===a?(o.data=JSON.stringify({imageSize:n,source:"tenor"}),o.fileUrl=t,o.customType="gif",o.mimeType="image/gif",o.thumbnailSizes=[{maxWidth:160,maxHeight:160}],o.fileName="tenor.gif"):(o.customType=a,o.mimeType="image/"+a,o.data=JSON.stringify({imageSize:n,message:i}),o.fileUrl=t,o.fileName=t,o.thumbnailSizes=[{maxWidth:160,maxHeight:160}]),e.sendFileMessage(o,function(e,t){s(e,t)})};t.sbDeleteMessage=function(e,t,n){return e.deleteMessage(t,function(e,t){n(e,t)})};t.sbAddMessageMetaArrayValue=function(e,t,n,r,a){var i={};i[n]=[r],e.addMessageMetaArrayValues(t,i,function(e,t){a(e,t)})};t.sbCreateMetaArrayKey=function(e,t,n,r){e.createMessageMetaArrayKeys(t,[n],function(e,t){r(e,t)})};t.sbRemoveMessageMetaArrayValue=function(e,t,n,r,a){var i={};i[n]=[r],e.removeMessageMetaArrayValues(t,i,function(e,t){a(e,t)})};t.sbDeleteMetaArrayKey=function(e,t,n,r){e.deleteMessageMetaArrayKeys(t,[n],function(e,t){r(e,t)})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){var e=d(n(0));return r=function(){return e},e}function a(){var e=n(19);return a=function(){return e},e}function i(){var e=n(32);return i=function(){return e},e}function s(){var e=n(527);return s=function(){return e},e}function o(){var e=n(36);return o=function(){return e},e}function u(){var e=n(2);return u=function(){return e},e}function l(){var e=d(n(167));return l=function(){return e},e}var c=n(594);function d(e){return e&&e.__esModule?e:{default:e}}console.log("Chat Version: ",c.version),window.fantasyChatVersion=c.version,window.bootstrapFantasyChat=function(e,t,n,c,d,f,h,p,y){var g=(0,o().createStore)(s().reducer,(0,o().applyMiddleware)(l().default));g.dispatch((0,s().initEnv)(n));var m=JSON.parse(p);(0,a().render)(r().default.createElement("div",null,r().default.createElement(u().IntlProvider,{locale:"en-US",messages:s().lang},r().default.createElement(i().Provider,{store:g},r().default.createElement(s().App,{guid:e,showTout:c,showReactions:d,allowImageUpload:f,loadOnClick:h,chatContext:m,chatContextEndpoint:y,useContext:!0})))),t)},window.toggleChatList=s().toggleChatList},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"App",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"toggleChatList",{enumerable:!0,get:function(){return i.toggleChatList}}),Object.defineProperty(t,"initEnv",{enumerable:!0,get:function(){return s.initEnv}}),Object.defineProperty(t,"lang",{enumerable:!0,get:function(){return o.default}});var r=u(n(528)),a=u(n(586)),i=n(60),s=n(592),o=u(n(593));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(32);return a=function(){return e},e}function i(){var e=n(5);return i=function(){return e},e}function s(){var e=n(116);return s=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.App=void 0;var o=f(n(529)),u=n(530),l=n(60),c=f(n(562)),d=f(n(585));function f(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function p(e){"@babel/helpers - typeof";return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;return _(e)}(this,n)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,r().Component);var t=m(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).login=r.login.bind(_(r)),r.loginSuccess=r.loginSuccess.bind(_(r)),r}return function(e,t,n){t&&y(e.prototype,t),n&&y(e,n)}(n,[{key:"componentDidMount",value:function(){var e=this.props||{},t=e.login.loggedIn,n=e.loadOnClick,r=(0,l.getActiveChatListFromLocalStorage)(),a=e.chatContext,i=!0;(!n||n&&(r.length||a.sendbird_user_id))&&(i=!1,this.login()),n&&!t&&(this.setState({willLoadOnClick:i}),document.getElementById("FantasyChatButton").addEventListener("click",this.login))}},{key:"loginSuccess",value:function(){var e=this.state||{};(this.props||{}).login.loggedIn&&document.getElementById("FantasyChatButton").removeEventListener("click",this.login),e.willLoadOnClick&&!(0,l.isChatListOpen)()&&(0,l.toggleChatList)()}},{key:"login",value:function(){var e=this.props||{},t=e.guid,n=e.env||{},r=e.chatContext||{},a=e.chatContextEndpoint||"",i=e.useContext||"",s=n.env;t&&s&&r&&this.props.sendbirdLogin({userId:t,env:s,chatContext:r,chatContextEndpoint:a,useContext:i,successCallback:this.loginSuccess})}},{key:"render",value:function(){var e=this.props,t=e.login||{},n=t.user||{},a=t.error||{},i=t.loggedIn,o=e.showTout,u=e.showReactions,l=e.allowImageUpload,f=s().RapidManager.getRapidInstance();return r().default.createElement("div",{className:"FantasyChat"},i?r().default.createElement(c.default,{rapidInstance:f,user:n,showTout:o,showReactions:u,allowImageUpload:l}):r().default.createElement(d.default,{error:a}))}}]),n}();t.App=C,s().RapidManager.init(o.default);var S=(0,a().connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)},{sendbirdLogin:u.sendbirdLogin})((0,i().setupI13n)(C,{},[s().RapidPlugin]));t.default=S},function(e,t,n){"use strict";e.exports={initRapid:!0,rapid:{keys:{site:"fantasy-chat"},compr_type:"deflate",tracked_mods_viewability:[],test_id:"",webworker_file:"/__rapid-worker-1.2.js",client_only:1,track_right_click:!0,pageview_on_init:!1,viewability:!0,dwell_on:!0},rootModelData:{site:"fantasy-chat"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendbirdLogin=t.getContextParams=t.getUserParams=void 0;var r=n(22),a=n(531),i=n(168);function s(){var e=function(e){return e&&e.__esModule?e:{default:e}}(n(3));return s=function(){return e},e}var o=function(e){var t=e.userId,n=e.env,r="dev"===n?"sendbird-dev":"sendbird-prod";return(0,i.get)("fantasy.user",{params:{guid:t,provider:r},env:n})};t.getUserParams=o;var u=function(e){var t=e.chatContextEndpoint;return(0,i.get)("",{},t)};t.getContextParams=u;t.sendbirdLogin=function(e){var t=e.userId,n=e.env,i=e.chatContext,l=void 0===i?{}:i,c=e.chatContextEndpoint,d=e.useContext,f=e.successCallback;return function(e){(0,a.sbConnect)(l.sendbird_user_id,l.sendbird_token,l.sendbird_app_id).then(function(t){t.crumb=l.crumb,e({type:r.LOGIN_SUCCESS,payload:t})}).catch(function(i){d&&c?u({chatContextEndpoint:c}).then(function(t){var n=(0,s().default)(t,["objects",0]);(0,a.sbConnect)(n.sendbird_user_id,n.sendbird_token,n.sendbird_app_id).then(function(t){t.crumb=n.chat_context_crumb,e({type:r.LOGIN_SUCCESS,payload:t}),f&&f()}).catch(function(t){e({type:r.LOGIN_FAIL,payload:t})})}).catch(function(t){e({type:r.LOGIN_FAIL,payload:t})}):o({userId:t,env:n}).then(function(t){var n=(0,s().default)(t,["service","externalUser","userId"]).trim(),i=(0,s().default)(t,["service","externalUser","appId"]).trim(),o=(0,s().default)(t,["service","externalUser","accessToken","token"]).trim(),u=(0,s().default)(t,["service","externalUser","crumb"]).trim();(0,a.sbConnect)(n,o,i).then(function(t){t.crumb=u,e({type:r.LOGIN_SUCCESS,payload:t}),f&&f()}).catch(function(t){e({type:r.LOGIN_FAIL,payload:t})})}).catch(function(t){e({type:r.LOGIN_FAIL,payload:t})})})}}},function(e,t,n){"use strict";function r(){var e=function(e){return e&&e.__esModule?e:{default:e}}(n(68));return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.sbConnect=void 0;t.sbConnect=function(e,t,n){return new Promise(function(a,i){new(r().default)({appId:n}).connect(e,t,function(e,t){t?i(t):a(e)})})}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(533),a=n(534),i=n(535);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),a=(e=o(e,r)).write(t,n);a!==r&&(e=e.slice(0,a));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=o(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?o(e,0):f(e,t);if("Buffer"===t.type&&i(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=o(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,a);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,a){var i,s=1,o=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(a){var c=-1;for(i=n;i<o;i++)if(l(e,i)===l(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*s}else-1!==c&&(i-=i-c),c=-1}else for(n+u>o&&(n=o-u),i=n;i>=0;i--){for(var d=!0,f=0;f<u;f++)if(l(e,i+f)!==l(t,f)){d=!1;break}if(d)return i}return-1}function _(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[n+s]=o}return s}function v(e,t,n,r){return B(F(t,e.length-n),e,n,r)}function E(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return E(e,t,n,r)}function C(e,t,n,r){return B(G(t),e,n,r)}function S(e,t,n,r){return B(function(e,t){for(var n,r,a,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,a=n%256,i.push(a),i.push(r);return i}(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,s,o,u,l=e[a],c=null,d=l>239?4:l>223?3:l>191?2:1;if(a+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(i=e[a+1]))&&(u=(31&l)<<6|63&i)>127&&(c=u);break;case 3:i=e[a+1],s=e[a+2],128==(192&i)&&128==(192&s)&&(u=(15&l)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=e[a+1],s=e[a+2],o=e[a+3],128==(192&i)&&128==(192&s)&&128==(192&o)&&(u=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),a+=d}return function(e){var t=e.length;if(t<=U)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=U));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,a),a+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return w(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,a){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var i=a-r,s=n-t,o=Math.min(i,s),l=this.slice(r,a),c=e.slice(t,n),d=0;d<o;++d)if(l[d]!==c[d]){i=l[d],s=c[d];break}return i<s?-1:s<i?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var U=4096;function w(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=t;i<n;++i)a+=j(e[i]);return a}function T(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,a,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function k(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-n,2);a<i;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function P(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-n,4);a<i;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function L(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,i){return i||L(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function x(e,t,n,r,i){return i||L(e,0,n,8),a.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var a=t-e;n=new u(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},u.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,a=1,i=this[e+--r];r>0&&(a*=256);)i+=this[e+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),a.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),a.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),a.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),a.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);R(this,e,t,n,a-1,-a)}var i=0,s=1,o=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);R(this,e,t,n,a-1,-a)}var i=n-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):k(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):k(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return x(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return x(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,i=r-n;if(this===e&&n<t&&t<r)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=u.isBuffer(e)?e:F(new u(e,r).toString()),o=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%o]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}}).call(this,n(9))},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),s=r[0],o=r[1],u=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,o)),c=0,d=o>0?s-4:s;for(n=0;n<d;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===o&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,u[c++]=255&t);1===o&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],s=0,o=n-a;s<o;s+=16383)i.push(d(e,s,s+16383>o?o:s+16383));1===a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],a=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)r[o]=s[o],a[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function d(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),a.push(c(r));return a.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,a){var i,s,o=8*a-r-1,u=(1<<o)-1,l=u>>1,c=-7,d=n?a-1:0,f=n?-1:1,h=e[t+d];for(d+=f,i=h&(1<<-c)-1,h>>=-c,c+=o;c>0;i=256*i+e[t+d],d+=f,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+e[t+d],d+=f,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=l}return(h?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,a,i){var s,o,u,l=8*i-a-1,c=(1<<l)-1,d=c>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(t*u-1)*Math.pow(2,a),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,a),s=0));a>=8;e[n+h]=255&o,h+=p,o/=256,a-=8);for(s=s<<a|o,l+=a;l>0;e[n+h]=255&s,h+=p,s/=256,l-=8);e[n+h-p]|=128*y}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(537)},function(e,t,n){"use strict";var r=n(11),a=n(251),i=n(538),s=n(257);function o(e){var t=new i(e),n=a(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var u=o(n(254));u.Axios=i,u.create=function(e){return o(s(u.defaults,e))},u.Cancel=n(258),u.CancelToken=n(551),u.isCancel=n(253),u.all=function(e){return Promise.all(e)},u.spread=n(552),e.exports=u,e.exports.default=u},function(e,t,n){"use strict";var r=n(11),a=n(252),i=n(539),s=n(540),o=n(257);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=o(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},u.prototype.getUri=function(e){return e=o(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(e){u.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}}),r.forEach(["post","put","patch"],function(e){u.prototype[e]=function(t,n,a){return this.request(r.merge(a||{},{method:e,url:t,data:n}))}}),e.exports=u},function(e,t,n){"use strict";var r=n(11);function a(){this.handlers=[]}a.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=a},function(e,t,n){"use strict";var r=n(11),a=n(541),i=n(253),s=n(254);function o(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return o(e),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return o(e),t.data=a(t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(o(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(256);e.exports=function(e,t,n){var a=n.config.validateStatus;!a||a(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(546),a=n(547);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(11),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&a.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}}),s):s}},function(e,t,n){"use strict";var r=n(11);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(11);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,s){var o=[];o.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),r.isString(a)&&o.push("path="+a),r.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(258);function a(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var e;return{token:new a(function(t){e=t}),cancel:e}},e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){e.exports="object"==typeof self?self.FormData:window.FormData},function(e,t,n){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(e,t,n){e.exports=n(556)},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function u(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),s=new w(r||[]);return i._invoke=function(e,t,n){var r=c;return function(a,i){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw i;return M()}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var o=O(s,n);if(o){if(o===p)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:d,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,s),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c="suspendedStart",d="suspendedYield",f="executing",h="completed",p={};function y(){}function g(){}function m(){}var _={};_[i]=function(){return this};var v=Object.getPrototypeOf,E=v&&v(v(I([])));E&&E!==n&&r.call(E,i)&&(_=E);var b=m.prototype=y.prototype=Object.create(_);function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function S(e,t){var n;this._invoke=function(a,i){function s(){return new t(function(n,s){!function n(a,i,s,o){var u=l(e[a],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,s,o)},function(e){n("throw",e,s,o)}):t.resolve(d).then(function(e){c.value=e,s(c)},function(e){return n("throw",e,s,o)})}o(u.arg)}(a,i,n,s)})}return n=n?n.then(s,s):s()}}function O(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function U(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:M}}function M(){return{value:t,done:!0}}return g.prototype=b.constructor=m,m.constructor=g,m[o]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},C(S.prototype),S.prototype[s]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var s=new S(u(t,n,r,a),i);return e.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},C(b),b[o]="Generator",b[i]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(U),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return o.type="throw",o.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),U(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;U(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(558)),a=s(n(559)),i=s(n(560));function s(e){return e&&e.__esModule?e:{default:e}}var o={fantasy:r.default,bootcamp:a.default,uploader:i.default};t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={environments:{default:{host:"pub-api-chat.fantasysports.yahoo.com",rootPath:"/chat/v1/",protocol:"https",credentials:"include",format:"json"},dev:{host:"fan-stage-bf1-4080.sports.yahoo.com",rootPath:"/chat/v1/",protocol:"https",credentials:"include",format:"json"}},resources:{user:{path:"users/{guid}/",defaults:{format:"json"},query:["provider"]},report:{path:"report_abuse",defaults:{format:"json"},query:["provider","crumb"]}}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={environments:{default:{host:"data.mail.yahoo.com",rootPath:"/callisto/",protocol:"https",credentials:"include",format:"json"},dev:{host:"devcal.xobni.yahoo.com",rootPath:"/ws/v1/",protocol:"https",credentials:"include",format:"json"}},resources:{items:{path:"tenor",defaults:{format:"json"},query:["query","appid","offset"]}}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={environments:{default:{host:"pub-api-uploader.sports.yahoo.com",rootPath:"/v1/",protocol:"https",credentials:"include",format:"json"},dev:{host:"pub-api-uploader.sports.yahoo.com",rootPath:"/v1/",protocol:"https",credentials:"include",format:"json"}},resources:{auth:{path:"user/auth",query:["upload_preset"]}}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";(function(t){var n=setTimeout;function r(e){return Boolean(e&&void 0!==e.length)}function a(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}o(t.promise,r)}else(1===e._state?o:u)(t.promise,e._value)})):e._deferreds.push(t)}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void c(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(a);return s(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},i.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},i.all=function(e){return new i(function(t,n){if(!r(e))return n(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(e);if(0===a.length)return t([]);var i=a.length;function s(e,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var o=r.then;if("function"==typeof o)return void o.call(r,function(t){s(e,t)},n)}a[e]=r,0==--i&&t(a)}catch(e){n(e)}}for(var o=0;o<a.length;o++)s(o,a[o])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){if(!r(e))return n(new TypeError("Promise.race accepts an array"));for(var a=0,s=e.length;a<s;a++)i.resolve(e[a]).then(t,n)})},i._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){n(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=i}).call(this,n(24).setImmediate)},function(e,t,n){"use strict";function r(){var e=v(n(0));return r=function(){return e},e}function a(){var e=v(n(1));return a=function(){return e},e}function i(){var e=n(32);return i=function(){return e},e}function s(){var e=n(5);return s=function(){return e},e}function o(){var e=n(6);return o=function(){return e},e}function u(){var e=n(2);return u=function(){return e},e}function l(){var e=v(n(563));return l=function(){return e},e}function c(){var e=v(n(86));return c=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ChatWrapper=void 0;var d=n(260),f=n(261),h=n(69),p=n(60),y=v(n(564)),g=v(n(584)),m=v(n(88)),_=v(n(171));function v(e){return e&&e.__esModule?e:{default:e}}function E(e){"@babel/helpers - typeof";return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var a=A(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;return O(e)}(this,n)}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(n,r()["default"].Component);var t=S(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={channels:{},activeChats:[],channelsOrder:[],showHiddenChatPanel:!1,leaguesOnly:!1,searchValue:""},r.handleScroll=r.handleScroll.bind(O(r)),r.handleClickOutside=r.handleClickOutside.bind(O(r)),r.onChatListItemClick=r.onChatListItemClick.bind(O(r)),r.onCloseChatClick=r.onCloseChatClick.bind(O(r)),r.toggleChatMinimize=r.toggleChatMinimize.bind(O(r)),r.showTout=r.showTout.bind(O(r)),r.markChannelAsRead=r.markChannelAsRead.bind(O(r)),r}return function(e,t,n){t&&b(e.prototype,t),n&&b(e,n)}(n,[{key:"componentDidMount",value:function(){this.initChatList(),this.props.createChatHandler(this.props.user.userId),document.addEventListener("click",this.handleClickOutside),(0,p.positionUnreadCount)(),(0,p.positionChatList)()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"componentWillReceiveProps",value:function(e){var t=e.channels;JSON.stringify(t)!==JSON.stringify(this.props.channels)&&(0===t.length?this.setState({channels:{}}):this.setState({channels:t}))}},{key:"onChatListItemClick",value:function(e,t){this.props.rapidInstance.beaconClick("fantasy-chat","chat_conversation_click"),this.setState({showHiddenChatPanel:!1}),this.props.openChat(e,t)}},{key:"onCloseChatClick",value:function(e){this.props.closeChat(e)}},{key:"toggleChatMinimize",value:function(e){this.props.toggleChatMinimize(e)}},{key:"initChatList",value:function(){this.getGroupChannelList(!0),this.props.initLocalStorageChats()}},{key:"getGroupChannelList",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var r=(0,f.sbCreateGroupChannelListQuery)();this.setState({groupChannelListQuery:r},function(){t.props.getGroupChannelList(t.state.groupChannelListQuery,n)})}else this.props.getGroupChannelList(this.state.groupChannelListQuery,n)}},{key:"handleScroll",value:function(){var e=this.chatListScrollList,t=this.chatListEnd,n=e.scrollTop+e.clientHeight;t.offsetTop-120<=n&&this.getGroupChannelList(!1,!0)}},{key:"handleClickOutside",value:function(e){this.chatListDiv&&!this.chatListDiv.contains(e.target)&&(0,p.isChatListOpen)()&&(0,p.toggleChatList)()}},{key:"showHiddenChatPanel",value:function(){var e=this.state.showHiddenChatPanel;this.setState({showHiddenChatPanel:!e})}},{key:"showTout",value:function(e,t){this.props.showTout(e,t)}},{key:"showLeaguesOnly",value:function(){var e=this,t=(0,f.sbCreateGroupChannelListQuery)();t.customTypeStartsWithFilter="league",this.state.searchValue&&(t.channelNameContainsFilter=this.state.searchValue),this.setState({groupChannelListQuery:t,leaguesOnly:!0},function(){e.getGroupChannelList(!1,!1)})}},{key:"showAllChats",value:function(){var e=this,t=(0,f.sbCreateGroupChannelListQuery)();this.state.searchValue&&(t.channelNameContainsFilter=this.state.searchValue),this.setState({groupChannelListQuery:t,leaguesOnly:!1},function(){e.getGroupChannelList(!1,!1)})}},{key:"changeSearchVal",value:function(e){var t=this;if(e&&e.target){var n=(0,f.sbCreateGroupChannelListQuery)();n.channelNameContainsFilter=e.target.value,this.setState({groupChannelListQuery:n,searchValue:e.target.value,leaguesOnly:!1},function(){t.getGroupChannelList(!1,!1)})}}},{key:"markChannelAsRead",value:function(e){this.props.markAsRead(e)}},{key:"render",value:function(){var e=this,t=this,n=this.props,i=this.state,d=n.showReactions,f=n.allowImageUpload,p=n.channels||{},v=n.channelsOrder||[],E=[],b=n.activeChats||[],C=i.showHiddenChatPanel,S=m.default.MAX_OPEN_CHATS,O=i.leaguesOnly,A=i.searchValue,U=!1;return v.forEach(function(e){var n=p[e]||{},i=n.lastMessage||{},o=i.messageId,l=i.message,c=(i.sender||{}).nickname,d=i.customType,f=(0,h.isLeagueChannel)(n);n.unreadMessageCount&&(U=!0),E.push(r().default.createElement(s().I13nDiv,{i13nModel:{sec:"chat_list_item"},bindClickEvent:!0,onClick:function(){return t.onChatListItemClick(n,n.url)},key:n.url,className:(0,a().default)("Py(10px) Cur(p) D(f) Bgc(#f5f8fa):h O(0):f Bgc(white) Px(10px) Td(n)!:h",{"ysf-chat-league":f,"ysf-chat-direct":!f})},r().default.createElement("div",{className:"D(ib) Ta(s) As(c) W(15%)"},r().default.createElement("div",{className:"W(35px) H(35px) Pos(r)"},r().default.createElement("img",{className:"Bdrs(50%)",alt:"Chat Cover",src:n.display_coverUrl,width:"35px",height:"35px"}),n.unreadMessageCount>0?r().default.createElement("div",{className:"Pos(a) W(10px) H(10px) Bdrs(50%) End(0) B(0) Bgc(#0078ff)"}):null)),r().default.createElement("div",{className:(0,a().default)("W(200px)","Ta(s)","Mstart(8px)",{"As(t) W(55%)":l,"As(c) W(80%)":!l})},r().default.createElement("div",{className:"Ovx(h) Whs(nw) Tov(e)"},n.display_name),o?r().default.createElement("div",{className:"Ovx(h) Whs(nw) Tov(e) C(grey-8) Pt(3px) Ell"},r().default.createElement(u().FormattedMessage,{id:"LAST_MESSAGE",values:{sender:c,message:l||"["+d.toUpperCase()+"]"}})):null),o?r().default.createElement("div",{className:"D(ib) As(t) W(30%) C(grey-8) Fz(10px) Ta(e) Whs(nw) Ell"},r().default.createElement(u().FormattedRelative,{value:i.createdAt})):null))}),r().default.createElement("div",{className:"ysf-ChatWrapper Z(1)"},r().default.createElement("div",{id:"ChatUnreadIndicator",className:(0,a().default)(_.default.unreadIndicator,{"D(n)":!U})}),r().default.createElement("div",{ref:function(t){e.chatListDiv=t},id:"ChatList",className:_.default.chatListWrapper},r().default.createElement("div",{className:_.default.chatPointerWrapper},r().default.createElement("div",{className:_.default.chatPointer}),r().default.createElement("div",{className:"D(f) Ai(c) W(100%) Jc(fe)"},r().default.createElement(s().I13nAnchor,{className:"Cur(p) C(white) C(white):h Td(n) Td(u):h",href:m.default.SURVEY_LINK,i13nModel:{action:"click",sec:"chat_feedback_click",slk:"Feedback"}},r().default.createElement(u().FormattedMessage,{id:"FEEDBACK"})))),r().default.createElement("div",{className:"W(100%) Py(8px) Bgc(white) Px(10px) Bds(s) Bdw(1px) Bdc(border-color) Bdbw(0px) Bdtw(0px)"},r().default.createElement("div",{className:"W(10%) D(ib)"},r().default.createElement(o().Icon,{color:"normal-black333",asset:c().default,height:"15",width:"15"})),r().default.createElement("div",{className:"D(ib) W(90%)"},r().default.createElement("input",{className:"W(100%) Fz(13px) Bd(n) O(n):f",placeholder:"Search",type:"text",value:A,onChange:function(t){return e.changeSearchVal(t)}}))),r().default.createElement("div",{className:"Py(8px) W(100%) Bgc(white) Bds(s) Bdw(1px) Bdc(border-color) Bdbw(0px)"},r().default.createElement(s().I13nDiv,{i13nModel:{sec:"chat_chat_click"},bindClickEvent:!0,onClick:function(){return e.showAllChats()},className:(0,a().default)("W(50%)","Ta(c)","D(ib)","C(normal-orange):h","Cur(p)","Td(n)!:h","ys-chats-filter",{"C(normal-orange)":!O})},r().default.createElement(u().FormattedMessage,{id:"CHATS"})),r().default.createElement(s().I13nDiv,{i13nModel:{sec:"chat_leagues_click"},bindClickEvent:!0,onClick:function(){return e.showLeaguesOnly()},className:(0,a().default)("W(50%)","Ta(c)","D(ib)","C(normal-orange):h","Cur(p)","Td(n)!:h","ys-leagues-filter",{"C(normal-orange)":O})},r().default.createElement(u().FormattedMessage,{id:"LEAGUES"}))),r().default.createElement("div",{ref:function(t){e.chatListScrollList=t},className:"Mah(400px) H(400px) Ovy(s) Bds(s) Bdw(1px) Bdc(border-color) Bgc(white) Bdrs(chat-list-border-radius)",onScroll:function(t){return e.handleScroll(t)}},E,r().default.createElement("div",{ref:function(t){e.chatListEnd=t}}))),b.slice(0,S).map(function(e,a){var i=p[e];return i?r().default.createElement(y.default,{key:"chat-"+e,chatObj:i,chatUrl:e,userId:n.user.userId,closeChat:function(){return t.onCloseChatClick(e)},toggleChatMinimize:function(){return t.toggleChatMinimize(e)},isMinimized:!!i.isMinimized,showTout:t.showTout,showReactions:d,allowImageUpload:f,markChannelAsRead:t.markChannelAsRead,rightPosition:m.default.RIGHT_PADDING+a*(m.default.CHAT_WIDTH_PIXELS+m.default.CHAT_SPACING_BETWEEN),rapidInstance:n.rapidInstance}):null}),b.length&&b.length>S?r().default.createElement("div",{className:"D(ib) Va(b) B(0px) End(10px) Ta(end) Z(2147483640) Pos(f) Whs(nw)",style:{right:m.default.RIGHT_PADDING+S*(m.default.CHAT_WIDTH_PIXELS+m.default.CHAT_SPACING_BETWEEN)+"px"}},b.length>S?r().default.createElement("div",{className:"MoreChats D(ib) Bgc(normal-grey) Bgc(#cfcfd1):h Va(b) P(5px) Bdrststart(6px) Bdrstend(6px)"},r().default.createElement(s().I13nDiv,{i13nModel:{sec:"chat_more_chats"},bindClickEvent:!0,onClick:function(){return e.showHiddenChatPanel()},className:"O(n):f Cur(p)"},r().default.createElement(o().Icon,{role:"button",className:"Cur(p)!",color:"normal-black333",asset:l().default,height:"25",width:"25"}))):null,r().default.createElement("div",{className:"Pos(a) Bgc(normal-grey) B(20px) End(50px)"},r().default.createElement(g.default,{chatList:p,closeChatHandler:this.onCloseChatClick,openChatHandler:this.onChatListItemClick,hiddenChats:b.slice(S),showHiddenChatPanel:C}))):null)}}]),n}();t.ChatWrapper=U;var w=(0,i().connect)(function(e){var t=e.groupChannel,n=(t||{}).channels,r=t||[];return{channels:n,activeChats:r.activeChats,channelsOrder:r.channelsOrder}},{createChatHandler:d.createChatHandler,getGroupChannelList:d.getGroupChannelList,openChat:d.openChat,closeChat:d.closeChat,toggleChatMinimize:d.toggleChatMinimize,initLocalStorageChats:d.initLocalStorageChats,markAsRead:d.markAsRead})(U);t.default=w},function(e,t){var n;void 0===n&&(n={}),n.message={name:"message",height:48,width:48,path:"M40.8 28.9c0 2-1.7 3.7-3.8 3.7H13.4l-5.6 5.2V10.6c0-2 1.7-3.7 3.8-3.7H37c2.1 0 3.8 1.6 3.8 3.7v18.3zM11.7 3.3c-4.1 0-7.5 3.3-7.5 7.3v31.1c0 .7.4 1.4 1.1 1.7.2.1.5.2.7.2.5 0 .9-.2 1.2-.5l7.6-6.8H37c4.1 0 7.5-3.3 7.5-7.3V10.6c0-4-3.4-7.3-7.5-7.3H11.7zm21.8 11H15.2c-1 0-1.8.8-1.8 1.8s.8 1.8 1.8 1.8h18.3c1 0 1.8-.8 1.8-1.8.1-1-.8-1.8-1.8-1.8m-18.3 7.3c-1 0-1.8.8-1.8 1.8s.8 1.8 1.8 1.8h18.3c1 0 1.8-.8 1.8-1.8s-.8-1.8-1.8-1.8H15.2z"},void 0!==e&&e.exports&&(e.exports=n.message)},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==T(e)&&"function"!=typeof e)return{default:e};var t=M();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=I(n(1));return a=function(){return e},e}function i(){var e=n(5);return i=function(){return e},e}function s(){var e=n(6);return s=function(){return e},e}function o(){var e=n(2);return o=function(){return e},e}function u(){var e=I(n(61));return u=function(){return e},e}function l(){var e=I(n(89));return l=function(){return e},e}function c(){var e=I(n(169));return c=function(){return e},e}function d(){var e=I(n(565));return d=function(){return e},e}function f(){var e=I(n(566));return f=function(){return e},e}function h(){var e=n(32);return h=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Chat=void 0;var p=I(n(262)),y=I(n(265)),g=I(n(575)),m=I(n(577)),_=I(n(578)),v=I(n(579)),E=I(n(581)),b=I(n(582)),C=n(266),S=n(69),O=n(583),A=n(60),U=n(260);function w(){var e=I(n(3));return w=function(){return e},e}function I(e){return e&&e.__esModule?e:{default:e}}function M(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return M=function(){return e},e}function T(e){"@babel/helpers - typeof";return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var a=L(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;return P(e)}(this,n)}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(n,r().Component);var t=k(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={previousMessageListQuery:null,textMessage:"",selectedMessage:null,showSettingsPanel:!1,showGifPicker:!1,showReactionPicker:!1,focusedImageMedia:null},r.keyPressHandler=r.keyPressHandler.bind(P(r)),r.onChangeHandler=r.onChangeHandler.bind(P(r)),r.fileUploadHandler=r.fileUploadHandler.bind(P(r)),r.reportMessage=r.reportMessage.bind(P(r)),r.blockChatUser=r.blockChatUser.bind(P(r)),r.unBlockChatUser=r.unBlockChatUser.bind(P(r)),r.handleScroll=r.handleScroll.bind(P(r)),r.getMessageList=r.getMessageList.bind(P(r)),r.deleteMessage=r.deleteMessage.bind(P(r)),r.sendGifMessage=r.sendGifMessage.bind(P(r)),r.toggleGifPicker=r.toggleGifPicker.bind(P(r)),r.showReactionPicker=r.showReactionPicker.bind(P(r)),r.hideReactionPicker=r.hideReactionPicker.bind(P(r)),r.selectMessage=r.selectMessage.bind(P(r)),r.addReactionToMessage=r.addReactionToMessage.bind(P(r)),r.removeReactionFromMessage=r.removeReactionFromMessage.bind(P(r)),r.showFocusedImageMedia=r.showFocusedImageMedia.bind(P(r)),r.hideFocusedImageMedia=r.hideFocusedImageMedia.bind(P(r)),r.previewImageUpload=r.previewImageUpload.bind(P(r)),r}return function(e,t,n){t&&N(e.prototype,t),n&&N(e,n)}(n,[{key:"componentDidMount",value:function(){this.componentInit()}},{key:"componentInit",value:function(){this.getMessageList(!0)}},{key:"getSnapshotBeforeUpdate",value:function(e,t){var n=(this.props.chatObj||{}).firstLoad,r=this.props.chatUrl,a=this.props.list[r]||[],i=e.list[r]||[],s=(a[0]||{}).messageId,o=(i[0]||{}).messageId,u=this.messageScrollList;return n||u&&u.scrollHeight===u.scrollTop+u.clientHeight?{scrollBottom:!0}:i.length!==a.length&&s===o?{scrollHeight:this.messageScrollList.scrollHeight,scrollBottom:!1}:null}},{key:"componentDidUpdate",value:function(e,t,n){this.props.toutMsg&&null!==this.props.toutError&&this.props.showTout(this.props.toutMsg,this.props.toutError),n&&this.messageScrollList&&(n.scrollBottom?(this.props.chatObj&&this.props.chatObj.unreadMessageCount&&!this.props.isMinimized&&this.props.markChannelAsRead(this.props.chatObj),this.messageScrollList.scrollTop=this.messageScrollList.scrollHeight):this.messageScrollList.scrollTop=this.messageScrollList.scrollHeight-n.scrollHeight),this.props.reloadChat&&this.componentInit(),e.processingUpload&&!this.props.processingUpload&&this.hideFocusedImageMedia({type:"click"})}},{key:"getMessageList",value:function(e){var t=this;if(this.state.previousMessageListQuery||e){var n=this.props,r=n.chatUrl,a=n.chatObj;e?(0,C.sbCreatePreviousMessageListQuery)(r,a).then(function(e){t.setState({previousMessageListQuery:e},function(){t.props.getPrevMessageList(t.state.previousMessageListQuery,r,!0)})}).catch(function(e){return console.log(e)}):this.props.getPrevMessageList(this.state.previousMessageListQuery,r)}}},{key:"keyPressHandler",value:function(e){var t=this,n=this.props,r=n.chatUrl,a=n.chatObj;if(e&&13===e.keyCode&&!e.shiftKey){e.preventDefault();var i=e.target,s=this.state,o=s.textMessage;if(s.focusedImageMedia)this.fileUploadHandler();else{var u=o.trim();this.setState({textMessage:""},function(){i&&(0,A.autoExpandTextArea)(i),u&&(t.props.rapidInstance.beaconClick("fantasy-chat","chat_send_message"),t.props.sendTextMessage(r,u,a),t.props.setDoneTyping(a))})}}}},{key:"onChangeHandler",value:function(e){if(e&&e.target){(0,A.autoExpandTextArea)(e.target);var t=e.target.value;this.state.focusedImageMedia?this.setState({fileMessageCaption:t}):this.setState({textMessage:t}),this.props.setTyping(this.props.chatObj)}}},{key:"fileUploadHandler",value:function(){var e=this.props,t=e.chatUrl,n=e.chatObj,r=e.intl,a=this.state,i=a.focusedImageMedia,s=a.fileMessageCaption;if(i&&i.file&&this.mediaElement){var o=s?s.trim():"",u=[this.mediaElement.naturalWidth,this.mediaElement.naturalHeight];this.props.rapidInstance.beaconClick("fantasy-chat","chat_send_message_image"),this.props.uploadAndSendImage(t,n,i.file,o,u,r),this.setState({fileMessageCaption:null}),this.props.setDoneTyping(n)}}},{key:"closeChat",value:function(e){e.stopPropagation();var t=this.props.chat;this.props.closeChat(t)}},{key:"openSettingsPanel",value:function(e){e.stopPropagation();var t=this.state.showSettingsPanel,n=this.props.isMinimized?t:!t;this.setState({showSettingsPanel:n,showGifPicker:!1})}},{key:"toggleGifPicker",value:function(e){e.stopPropagation(),this.setState({showGifPicker:!this.state.showGifPicker})}},{key:"showReactionPicker",value:function(e){e&&e.stopPropagation(),this.props.rapidInstance.beaconClick("fantasy-chat","chat_add_reaction_click"),this.setState({showReactionPicker:!0})}},{key:"hideReactionPicker",value:function(e){e&&e.stopPropagation(),this.setState({showReactionPicker:!1})}},{key:"toggleChatMinimize",value:function(){this.props.toggleChatMinimize(),this.setState({showGifPicker:!1})}},{key:"reportMessage",value:function(e,t,n){if(e&&t){var r=this.props.env,a=this.props.crumb;this.props.reportMessage(e,t,n,r,a,this.props.intl)}}},{key:"deleteMessage",value:function(e){var t=this.props.chatObj;e&&this.props.deleteMessage(e,t,this.props.intl)}},{key:"blockChatUser",value:function(e){e&&this.props.blockUser(e,this.props.intl)}},{key:"unBlockChatUser",value:function(e){e&&this.props.unBlockUser(e,this.props.intl)}},{key:"handleScroll",value:function(){var e=this.messageScrollList,t=e.scrollTop;0===t?this.getMessageList():e.scrollHeight===t+e.clientHeight&&this.props.markChannelAsRead(this.props.chatObj)}},{key:"sendGifMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.props,r=n.chatUrl,a=n.chatObj;e&&(this.props.rapidInstance.beaconClick("fantasy-chat","chat_send_message_gif"),this.props.sendFileMessage(r,e,t,a,"gif"),this.setState({showGifPicker:!1}))}},{key:"selectMessage",value:function(e){this.setState({selectedMessage:e})}},{key:"addReactionToMessage",value:function(e,t,n){e&&e.stopPropagation();var r=this.props,a=r.chatObj,i=r.userId,s=r.intl;this.props.rapidInstance.beaconClick("fantasy-chat","chat_select_reaction_click"),this.props.addReaction(a,n,t,i,s),this.hideReactionPicker()}},{key:"removeReactionFromMessage",value:function(e,t,n){e&&e.stopPropagation();var r=this.props,a=r.chatObj,i=r.userId,s=r.intl;this.props.removeReaction(a,n,t,i,s)}},{key:"showFocusedImageMedia",value:function(e){e&&e.url&&(this.setState({focusedImageMedia:e}),document.addEventListener("keydown",this.hideFocusedImageMedia,!1))}},{key:"hideFocusedImageMedia",value:function(e){"Escape"!==e.key&&"click"!==e.type||(this.setState({focusedImageMedia:null}),document.removeEventListener("keydown",this.hideFocusedImageMedia,!1))}},{key:"previewImageUpload",value:function(e){this.props.rapidInstance.beaconClick("fantasy-chat","chat_send_message_image_click");var t=e.target.files[0];if(t){if(["image/gif","image/jpg","image/jpeg","image/png","image/tiff","image/tif"].indexOf(t.type)<0){var n=this.props.intl,r=void 0===n?{}:n;this.props.showError("INVALID_FILE_TYPE",r)}else{var a={file:t,preview:!0,url:URL.createObjectURL(t)};this.showFocusedImageMedia(a)}}}},{key:"render",value:function(){var e=this,t=this,n=this.state,h=this.props,C=h.userId,S=h.chatObj||{},O=h.chatUrl,A=S.display_name,U=S.metaData||{},I=S.unreadMessageCount,M=(h.list||{})[O]||[],T=[],N=n.textMessage,R=h.isMinimized,k=n.showSettingsPanel,P=n.showGifPicker,L=S.typingMembers||[],D=L.length>0,x=n.showReactionPicker,H=h.showReactions,j=h.allowImageUpload,F=n.selectedMessage,G=n.focusedImageMedia,B=S.getReadStatus();return M.forEach(function(e,n){T.unshift(r().default.createElement(p.default,{key:"message-"+e.messageId+e.updatedAt,intl:h.intl,message:e,userId:C,fantasyMetadata:U,reportMessage:t.reportMessage,deleteMessage:t.deleteMessage,startChat:t.props.startNewChat,blockChatUser:t.blockChatUser,unBlockChatUser:t.unBlockChatUser,showFocusedImageMedia:t.showFocusedImageMedia,selectMessage:t.selectMessage,showReactions:H,showEmojiPicker:t.showReactionPicker,removeReaction:t.removeReactionFromMessage,addReaction:t.addReactionToMessage,memberMap:S.memberMap,readStatusMap:B,isDirectMessage:"direct_message"===S.customType}))}),n.previousMessageListQuery&&n.previousMessageListQuery.reverse&&!M.length&&T.push(r().default.createElement(_.default,{key:"emptychat-"+S.url,chat:S})),r().default.createElement("div",{className:(0,a().default)("ysf-chatcontainer D(ib) Mx(5px) Va(t) W(chat-width) Bxsh(chat-box-shadow) Bdrs(chat-border-radius) Ta(s) Pos(f) B(0) Z(2147483639)",{"Z(2147483640)!":G}),style:{right:h.rightPosition+"px"}},r().default.createElement("div",{tabIndex:0,role:"button",onKeyDown:function(){},onClick:function(){return e.toggleChatMinimize()},className:(0,a().default)("ysf-chatHeader Bdrs(chat-border-radius) Cur(p) W(chat-width) Bgc(#333) C(white) Px(10px) Va(m) H(35px) D(f) Bgc(#4c4c4c):h Cur(p) O(n):f",{"Pos(a) B(0px)":R})},r().default.createElement("div",{className:(0,a().default)("Ta(s) As(c) W(10%) O(n):f",{"Pe(n)":R})},r().default.createElement(i().I13nDiv,{i13nModel:{sec:"chat_info_click"},bindClickEvent:!0,className:"O(n):f Py(5px) Cur(p) ysf-settings-toggle",onClick:function(t){return e.openSettingsPanel(t)}},r().default.createElement(s().Icon,{role:"button",className:"Cur(p)!",color:"white",asset:k?c().default:l().default,height:"15",width:"15"}))),r().default.createElement("div",{className:"Ta(s) As(c) W(80%) Whs(nw) Tov(e) Ovx(h)"},r().default.createElement("span",{className:"Va(m) Fz(15px) ysf-chat-name"},A),r().default.createElement("span",null,I?r().default.createElement("span",{className:"Pstart(1px) Va(m) Mstart(10px) D(ib) Fw(b) Bgc(notification-color) Bdrs(30%) H(15px) W(15px) Fz(11px) C(white) Ta(c) As(c)"},I):null)),r().default.createElement("div",{className:"Ta(e) As(c) W(10%)"},r().default.createElement(i().I13nDiv,{i13nModel:{sec:"chat_chat_close"},bindClickEvent:!0,className:"O(n):f Cur(p) ysf-close-chat",onClick:function(t){return e.closeChat(t)}},r().default.createElement(s().Icon,{role:"button",className:"Cur(p)!",color:"white",asset:u().default,height:"15",width:"15"})))),r().default.createElement("div",{className:(0,a().default)("ysfChatBody Pos(r)",{"D(n)!":R})},k?r().default.createElement(g.default,{showTout:this.props.showTout,chat:S,startChat:this.props.startNewChat,blockChatUser:this.blockChatUser,unBlockChatUser:this.unBlockChatUser}):r().default.createElement("div",{className:"Pos(r)"},r().default.createElement("div",{ref:function(t){e.messageScrollList=t},onScroll:function(t){return e.handleScroll(t)},className:(0,a().default)("Bds(s) Bdw(1px) Bdc(border-color) Bdbw(0px) H(355px) Ovy(s) Bgc(white)",{"Py(5px)":!D,"Pt(5px) Pb(20px)":D})},r().default.createElement("div",{className:"ysf-MessageList Pb(5px)"},T.length?r().default.createElement(m.default,{messageMarkup:T}):null),D?r().default.createElement("div",{className:"H(15px) Pos(a) B(30px) Fz(12px) C(grey-8) Bgc(white) Start(0) End(0)"},r().default.createElement("div",{className:"Mstart(15%) Pstart(5px) Pos(r)"},r().default.createElement(o().FormattedMessage,{id:L.length>1?"MULTIPLE_USERS_ARE_TYPING":"ONE_USER_IS_TYPING",values:{userName:(0,w().default)(L,[0,"nickname"]),numberUsers:L.length}}))):null),r().default.createElement("div",{className:(0,a().default)("ysf-message-input H(25px) Pos(r) D(ib) W(90%) Va(m)",{"W(80%)!":j})},r().default.createElement(y.default,{ref:function(t){e.messageInput=t},name:O,textMessage:N,keyPressHandler:this.keyPressHandler,onChangeHandler:this.onChangeHandler})),j?r().default.createElement("div",{className:"attach-image P(0) Bgc(white) Bdc(border-color) Bds(s) Bdw(1px) D(ib) W(10%) Va(m) Bdstartc(n) Bdstarts(n) H(30px) Pos(a) B(0) End(10%) Ta(c)"},r().default.createElement("input",{type:"file",onChange:this.previewImageUpload,className:"Pos(r) Op(0) Z(10) W(100%) H(30px)"}),r().default.createElement(s().Icon,{className:"attach-image:h_Fill(#606770)! attach-image:h_Cur(p)! Pos(a) Start(8px) T(5px) Z(0)",color:"#9499a2",asset:f().default,height:"20",width:"20"})):null,r().default.createElement("div",{className:"P(5px) Bgc(white) Bdc(border-color) Bds(s) Bdw(1px) D(ib) W(10%) Va(m) Bdstartc(n) Bdstarts(n) H(30px) Pos(a) B(0) End(0) Ta(c)"},r().default.createElement(i().I13nDiv,{i13nModel:{sec:"chat_gif_picker"},bindClickEvent:!0,className:"O(n):f Cur(p)",onClick:function(t){return e.toggleGifPicker(t)}},r().default.createElement(s().Icon,{role:"button",className:"Cur(p)! Fill(#606770)!:h",color:"#9499a2",asset:d().default,height:"20",width:"20"}))))),r().default.createElement("div",null,P?r().default.createElement(v.default,{toggleGifPicker:this.toggleGifPicker,sendGifMessage:this.sendGifMessage}):null,x&&H?r().default.createElement(b.default,{hideEmojiPicker:this.hideReactionPicker,addEmoji:this.addReactionToMessage,selectedMessage:F}):null),G?r().default.createElement(E.default,{imageRef:function(t){return e.mediaElement=t},fileUploadHandler:this.fileUploadHandler,hideFocusedImageMedia:this.hideFocusedImageMedia,onChangeHandler:this.onChangeHandler,keyPressHandler:this.keyPressHandler,intl:h.intl,message:G,userId:C,fantasyMetadata:U,reportMessage:this.reportMessage,deleteMessage:this.deleteMessage,startChat:this.props.startNewChat,blockChatUser:this.blockChatUser,unBlockChatUser:this.unBlockChatUser,showFocusedImageMedia:this.showFocusedImageMedia,selectMessage:this.selectMessage,showReactions:H,showEmojiPicker:this.showReactionPicker,removeReaction:this.removeReactionFromMessage,addReaction:this.addReactionToMessage,readStatusMap:B,memberMap:S.memberMap,isDirectMessage:"direct_message"===S.customType,chatName:A,processing:this.props.processingUpload}):null)}}]),n}();t.Chat=D;var x=(0,o().injectIntl)((0,h().connect)(function(e){var t=e.chat,n=e.env,r=e.login,a=t.list,i={},s=n.env,o=(r.user||{}).crumb,u=t.toutError,l=t.toutMsg,c=t.reloadChat,d=t.processingUpload;return Object.keys(a).forEach(function(e){var t=a[e]||[];i[e]=(0,S.sbAdjustMessageList)(t)}),{list:i,env:s,crumb:o,toutMsg:l,toutError:u,reloadChat:c,processingUpload:d}},{getPrevMessageList:O.getPrevMessageList,sendTextMessage:O.sendTextMessage,sendFileMessage:O.sendFileMessage,uploadAndSendImage:O.uploadAndSendImage,startNewChat:U.startNewChat,reportMessage:O.reportMessage,deleteMessage:O.deleteMessage,blockUser:O.blockUser,unBlockUser:O.unBlockUser,setTyping:U.setTyping,setDoneTyping:U.setDoneTyping,addReaction:O.addReaction,removeReaction:O.removeReaction,showError:O.showError})(D));t.default=x},function(e,t){var n;void 0===n&&(n={}),n.gif={name:"gif",height:48,width:48,path:"M44.307 9.087H3.69M46.154 5.395H1.846C.826 5.395 0 6.22 0 7.24v33.232c0 1.02.826 1.846 1.846 1.846h44.308c1.02 0 1.846-.826 1.846-1.846V7.242c0-1.02-.826-1.847-1.846-1.847zm-1.847 33.23l-40.615.01V9.087h40.615v29.538zM33.363 31.975v-6.35h6.195v-2.75h-6.195V18.54h6.79v-2.802H30.04v16.237h3.323zm-6.55 0V15.738h-3.324v16.237h3.322zm-5.944-10.99c-.106-2.824-2.132-5.556-6.254-5.556-4.26 0-6.77 2.902-6.77 7.36v2.023c0 4.27 2.05 7.47 6.713 7.47 4.682 0 6.33-3.28 6.33-5.9v-3.21h-6.204v2.52h3.057v.918c0 1.547-1.204 2.806-3.138 2.806-2.45 0-3.414-1.938-3.414-4.612v-1.987c0-3.108 1.41-4.522 3.38-4.522 1.647 0 2.874.99 3.068 2.692h3.23z"},void 0!==e&&e.exports&&(e.exports=n.gif)},function(e,t){var n;void 0===n&&(n={}),n.theme={name:"theme",height:48,width:48,path:"M45.333 6.36h-40c-1.104 0-2 .896-2 2v34c0 1.105.896 2 2 2h40c1.104 0 2-.895 2-2v-34c0-1.105-.895-2-2-2zm-2 4v13.172l-7-7-11.5 11.5-8.562-8.562-8.937 9.75V10.36h36zm-36 24.78l9.063-9.89 5.608 5.61-9.5 9.5h-5.17v-5.22zm10.828 5.22l18.173-18.172 7 7V40.36H18.16z"},void 0!==e&&e.exports&&(e.exports=n.theme)},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n(170));function i(){var e=n(5);return i=function(){return e},e}function s(){var e=n(6);return s=function(){return e},e}var o=l(n(568));function u(){var e=l(n(263));return u=function(){return e},e}function l(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){"@babel/helpers - typeof";return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,r().Component);var t=p(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={reactionList:[]},r}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.metaArrays,n=e.userId;if(t&&t.length){for(var r=[],i=0;i<t.length;i++){var s=t[i].key,o=-1!==t[i].value.indexOf(n);s&&a.default.defaultEmojis[s]&&r.push({emoji:a.default.defaultEmojis[s],code:s,users:t[i].value,reactedByUser:o})}this.setState({reactionList:r.sort(function(e,t){return e.users.length-t.users.length})})}}},{key:"render",value:function(){var e=this.state.reactionList;if(!e||!e.length)return null;var t=this.props,n=t.intl,a=t.canAddReaction,l=t.removeReaction,c=t.addReaction,d=t.openEmojiPicker,f=t.message,h=t.memberMap,p=t.disableInteractions,y=[];return e.forEach(function(e,t){e.emoji&&y.unshift(r().default.createElement(o.default,{intl:n,reactionObj:e,removeReaction:l,addReaction:c,message:f,memberMap:h,disableInteractions:p}))}),r().default.createElement("div",{className:"Mb(4px)"},y,a?r().default.createElement(i().I13nButton,{i13nModel:{sec:"fantasy-chat",elm:"ReactionList",slk:"Add Emoji Button"},className:"W(30px) H(23px) Va(b) P(1px) Mb(4px) Cur(p) D(ib) Bgc(grey-default) Bdc(grey-default) ysf-message:h_Bgc(grey-reaction-hover)! ysf-message:h_Bdc(grey-reaction-hover)! Bds(s) Bdw(t) Bdrs(10px) Ta(c) Mend(5px)",onClick:function(e){return d(e)}},r().default.createElement(s().Icon,{asset:u().default,height:"18",width:"18",color:"#6e7780"})):null)}}]),n}();t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=function(e){return e&&e.__esModule?e:{default:e}}(n(1));return a=function(){return e},e}function i(){var e=n(5);return i=function(){return e},e}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;return d(e)}(this,n)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r().Component);var t=c(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={showTooltip:!1},r.getWhoReacted=r.getWhoReacted.bind(d(r)),r.toggleTooltip=r.toggleTooltip.bind(d(r)),r}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(n,[{key:"getWhoReacted",value:function(){var e=this.props,t=e.memberMap,n=e.reactionObj,r=e.intl,a=n.users.map(function(e){return t[e].nickname}),i=a.pop();return a.length?r.formatMessage({id:"AND"},{term1:a.join(", "),term2:i}):i}},{key:"toggleTooltip",value:function(){this.setState({showTooltip:!this.state.showTooltip})}},{key:"render",value:function(){var e=this.props,t=e.reactionObj,n=e.addReaction,s=e.removeReaction,o=e.message,u=e.disableInteractions,l=this.state.showTooltip;return t&&t.emoji?r().default.createElement("span",{className:"Pos(r)",onMouseEnter:this.toggleTooltip,onMouseLeave:this.toggleTooltip},l&&t.users?r().default.createElement("span",{className:"W(150px) Fz(12px) Bgc(black) C(white) Ta(c) Bds(n) Bdrs(5px) P(7px) Pos(a) B(25px) Start(-55px) Z(1)"},this.getWhoReacted(),r().default.createElement("span",{className:"Pos(a) T(100%) Start(50%) Mstart(-5px) Bdw(5px) Bds(s) Bdtc(black) Bdbc(t) Bdstartc(t) Bdendc(t)"})):null,r().default.createElement(i().I13nButton,{i13nModel:{sec:"fantasy-chat",elm:"ReactionList",action:t.reactedByUser?"Removed":"Added"},key:t.code,className:(0,a().default)("Miw(40px) H(23px) P(1px) Mb(4px) Cur(p) D(ib) Bds(s) Bdw(t) Bdrs(20px) Ta(c) Mend(4px)",{"Bgc(grey-default) Bdc(blue-1a) ysf-message:h_Bgc(white)!":t.reactedByUser,"Bgc(grey-default) Bdc(grey-default) ysf-message:h_Bgc(grey-reaction-hover)! ysf-message:h_Bdc(grey-reaction-hover)!":!t.reactedByUser}),onClick:u?null:t.reactedByUser?function(e){return s(e,t.code,o)}:function(e){return n(e,t.code,o)}},r().default.createElement("span",{className:"Fz(15px) Lh(20px) Mend(2px)--highRes Fz(13px)!--highRes D(ib) W(20px)"},t.emoji.char),r().default.createElement("span",{className:(0,a().default)("Fw(500) Fz(12px) Va(tb)",{"C(blue-1a)":t.reactedByUser})},t.users?t.users.length:null))):null}}]),n}();t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(2);return a=function(){return e},e}function i(){var e=c(n(1));return i=function(){return e},e}function s(){var e=c(n(570));return s=function(){return e},e}function o(){var e=n(5);return o=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=c(n(259)),l=c(n(571));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;return g(e)}(this,n)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,r().Component);var t=y(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={dimensions:{width:"160px",height:"160px"}},r.onImgLoad=r.onImgLoad.bind(g(r)),r.onImageClick=r.onImageClick.bind(g(r)),r}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(n,[{key:"onImgLoad",value:function(e){var t=e.target,n=t.offsetWidth,r=t.offsetHeight,a=160/n,i=160/r,s=a<=i?a:i;s>1&&(s=1);var o=n*s,u=r*s;this.setState({dimensions:{height:u,width:o}})}},{key:"onImageClick",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.props.showFocusedImageMedia(this.props.message)}},{key:"getProperTeamName",value:function(e){var t="";try{t=s().default.decode(e)}catch(n){t=e}return t}},{key:"render",value:function(){var e,t=this.state,n=this.props,s=t.dimensions||{},c=s.width,d=s.height,f=n.isShow,h=n.firstName,p=this.getProperTeamName(n.teamName),y=n.message||{},g=y.messageType;e=y.data?(0,u.default)(y.data)||{}:"";var m="file"===g&&y.url,_=n.focusedMediaOverride,v=[];return!m&&y.message&&(v=y.message.split(" ").map(function(e,t){return function(e){return!!new RegExp("^(https://|http://)","i").test(e)}(e)?r().default.createElement(o().I13nAnchor,{key:t+"message"+y.messageId,href:e},t?" "+e:e):r().default.createElement("span",{key:t+"message"+y.messageId},t?" "+e:e)})),r().default.createElement("div",{className:"ysf-messagecontainer D(ib) Pos(r) Va(t) Mstart(5px) W(75%)"},f?r().default.createElement("div",{className:"D(f) Ai(c) Jc(fs) Whs(nw) Cur(d)"},r().default.createElement("span",{title:h||null,className:"Fw(b) Fz(14px) Ell"},h||null),r().default.createElement("span",{title:p||null,className:"Fz(12px) C(grey-8) Mstart(5px) Ell"},p?"("+p+")":null),r().default.createElement("span",{className:"Fz(12px) C(grey-8) Mstart(5px)"},r().default.createElement(a().FormattedRelative,{value:y.createdAt}))):null,n.hideOptions?null:r().default.createElement(l.default,{showDeleteBtn:n.showDeleteBtn,deleteMessage:n.deleteMessage,openReportOverlay:n.openReportOverlay,openEmojiPicker:n.openEmojiPicker,canAddReaction:n.canAddReaction}),r().default.createElement("div",{className:(0,i().default)({"Mt(4px)":f&&"file"!==g,"Mt(8px)":f&&"file"===g})},m?r().default.createElement("div",null,e.message?r().default.createElement("div",{className:"Wow(bw) Maw(100%) Fz(14px) Pb(3px)"},e.message):_?r().default.createElement("div",{className:"Fs(i) C(grey-8) Pb(5px)"},r().default.createElement(a().FormattedMessage,{id:"SHARED_FILE"})):null,_?null:r().default.createElement(o().I13nDiv,{style:{width:c,height:d},className:"D(ib) Maw(100%) Cur(p)",onClick:this.onImageClick},r().default.createElement("img",{onLoad:this.onImgLoad,onError:this.onImgLoad,src:y.url,alt:y.name,width:"100%",className:"Bdrs(6px)"}),e.source?r().default.createElement("span",{className:"D(b) C(grey-8) Fz(11px) Ta(s)"},r().default.createElement(a().FormattedMessage,{id:"VIA_X",values:{source:e.source}})):null)):y.message?r().default.createElement("div",{className:(0,i().default)("Wow(bw)","D(ib)","Maw(100%)","Fz(14px)","Pb(3px)",{"Pt(3px)":!f})},v):null))}}]),n}();t.default=_,e.exports=t.default},function(e,t,n){!function(e){var t,n,r,a=String.fromCharCode;function i(e){for(var t,n,r=[],a=0,i=e.length;a<i;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function s(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function o(e,t){return a(e>>t&63|128)}function u(e){if(0==(4294967168&e))return a(e);var t="";return 0==(4294965248&e)?t=a(e>>6&31|192):0==(4294901760&e)?(s(e),t=a(e>>12&15|224),t+=o(e,6)):0==(4292870144&e)&&(t=a(e>>18&7|240),t+=o(e,12),t+=o(e,6)),t+=a(63&e|128)}function l(){if(r>=n)throw Error("Invalid byte index");var e=255&t[r];if(r++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,a;if(r>n)throw Error("Invalid byte index");if(r==n)return!1;if(e=255&t[r],r++,0==(128&e))return e;if(192==(224&e)){if((a=(31&e)<<6|l())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&e)){if((a=(15&e)<<12|l()<<6|l())>=2048)return s(a),a;throw Error("Invalid continuation byte")}if(240==(248&e)&&(a=(7&e)<<18|l()<<12|l()<<6|l())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=i(e),n=t.length,r=-1,a="";++r<n;)a+=u(t[r]);return a},e.decode=function(e){t=i(e),n=t.length,r=0;for(var s,o=[];!1!==(s=c());)o.push(s);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=a(t);return i}(o)}}(t)},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(6);return a=function(){return e},e}function i(){var e=l(n(572));return i=function(){return e},e}function s(){var e=l(n(573));return s=function(){return e},e}function o(){var e=l(n(263));return o=function(){return e},e}function u(){var e=n(5);return u=function(){return e},e}function l(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){"@babel/helpers - typeof";return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,r().PureComponent);var t=p(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(n,[{key:"render",value:function(){var e=this.props,t=e.canAddReaction,n=e.openReportOverlay,l=e.showDeleteBtn,c=e.deleteMessage,d=e.openEmojiPicker;return r().default.createElement("div",{className:"Va(t) Pos(a) H(30px) End(-26px) T(-5px) Ta(e) D(n) Px(3px) ysf-message:h_D(ib)! Bgc(white) Bdc(lightgray) Bdrs(10px) Bds(s) Bdw(1px)"},t?r().default.createElement(u().I13nButton,{i13nModel:{sec:"fantasy-chat",elm:"MessageOptions",slk:"Add Emoji Button"},className:"H(100%) Bgc(t) Va(m) Bd(n) Bdrsbstart(10px) Bdrststart(10px) Bdendrs(0px)! Bdend(1px)! Bdends(s)! Bdendw(1px)! Bdc(lightgray)!",onClick:d},r().default.createElement(a().Icon,{asset:o().default,height:"17",width:"17",className:"Mt(2px)"})):null,r().default.createElement(u().I13nButton,{i13nModel:{sec:l?"chat_delete_message_click":"chat_report_message_click"},className:"H(100%) Bgc(t) Va(m) Bdrs(10px) Bdw(0px)",onClick:l?c:n},r().default.createElement(a().Icon,{asset:l?i().default:s().default,height:"17",width:"17",className:"Mt(2px)"})))}}]),n}();t.default=g,e.exports=t.default},function(e,t){var n;void 0===n&&(n={}),n.delete={name:"delete",height:48,width:48,path:"M42.885 7.616h-9v-2c0-1.104-.896-2-2-2h-14c-1.104 0-2 .896-2 2v2h-9c-1.104 0-2 .896-2 2s.896 2 2 2h36c1.104 0 2-.896 2-2s-.897-2-2-2zM35.885 41.616h-22v-24h-4v26c0 1.104.896 2 2 2h26c1.104 0 2-.896 2-2v-26h-4v24z"},void 0!==e&&e.exports&&(e.exports=n.delete)},function(e,t){var n;void 0===n&&(n={}),n.flag={name:"flag",height:48,width:48,path:"M40 10H28.62l-2.888-5-.008.004C25.38 4.407 24.74 4 24 4H8c-1.105 0-2 .896-2 2v36c0 1.105.895 2 2 2s2-.895 2-2V28h12.846l2.887 5c.357.62 1.018 1 1.732 1H40c1.105 0 2-.895 2-2V12c0-1.104-.895-2-2-2zm-2 20h-9.38l-2.888-5c-.357-.617-1.018-1-1.732-1H10V8h12.845l2.887 5c.37.642 1.04 1 1.732 1H38v16z"},void 0!==e&&e.exports&&(e.exports=n.flag)},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(6);return a=function(){return e},e}function i(){var e=function(e){return e&&e.__esModule?e:{default:e}}(n(119));return i=function(){return e},e}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r().Component);var t=c(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(n,[{key:"render",value:function(){var e,t=this.props,n=t.isDirectMessage,s=t.readReceiptIds,o=t.memberMap,u=t.intl;if(!s)return null;if(n)e=u.formatMessage({id:"SEEN"});else{var l=s.map(function(e){return o[e].nickname}),c=l.pop();e=l.length?u.formatMessage({id:"AND"},{term1:l.join(", "),term2:c}):c}return r().default.createElement("span",null,r().default.createElement(a().Icon,{className:"",color:"#787d82",asset:i().default,height:"12",width:"12"}),r().default.createElement("span",{className:"Mstart(3px)"},e))}}]),n}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==g(e)&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=p(n(1));return a=function(){return e},e}function i(){var e=n(5);return i=function(){return e},e}function s(){var e=n(2);return s=function(){return e},e}function o(){var e=n(6);return o=function(){return e},e}function u(){var e=p(n(576));return u=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(87),c=n(69),d=p(n(88)),f=p(n(171)),h=p(n(264));function p(e){return e&&e.__esModule?e:{default:e}}function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function g(e){"@babel/helpers - typeof";return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;return E(e)}(this,n)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(n,r().Component);var t=v(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={showOverlay:!1,selectedUser:{}},r.showUserOverlay=r.showUserOverlay.bind(E(r)),r.getOtherUserInChat=r.getOtherUserInChat.bind(E(r)),r.hideUserOverlay=r.hideUserOverlay.bind(E(r)),r}return function(e,t,n){t&&m(e.prototype,t),n&&m(e,n)}(n,[{key:"showUserOverlay",value:function(e){(e.hasOwnProperty("isMe")&&!e.isMe||!(0,l.isUserMe)(e))&&this.setState({showOverlay:!0,selectedUser:e})}},{key:"hideUserOverlay",value:function(){this.setState({showOverlay:!1,selectedUser:{}})}},{key:"blockSelectedUser",value:function(e,t){this.props.blockChatUser(t),this.hideUserOverlay()}},{key:"unBlockSelectedUser",value:function(e,t){this.props.unBlockChatUser(t),this.hideUserOverlay()}},{key:"getOtherUserInChat",value:function(e){var t={};return e.some(function(e){return!((!e.hasOwnProperty("isMe")||e.isMe)&&(0,l.isUserMe)(e))&&(t=e,!0)}),t}},{key:"render",value:function(){var e=this,t=this,n=this.state,l=this.props.chat||{},p=l.metaData||{},y=l.members||[],g=(0,c.isLeagueChannel)(l),m=[],_=n.showOverlay,v=(g?n.selectedUser:this.getOtherUserInChat(y))||{},E=v.nickname,b=v.isBlockedByMe;return y.forEach(function(e){var n=e.userId||"",s=p["userTeamName_"+n]||"",l=p["userTeamLogoUrl_"+n]||d.default.DEFAULT_AVATAR,c=e.nickname,f=e.isBlockedByMe,h=e.profileUrl||d.default.DEFAULT_AVATAR;m.push(r().default.createElement(i().I13nDiv,{i13nModel:{sec:"chat_user_click"},bindClickEvent:!0,key:"memberrow-"+n,onClick:function(){return t.showUserOverlay(e)},className:(0,a().default)("D(b)","Py(8px)","Ta(s)","Px(5px)","Whs(nw)","Tov(e)","Ovx(h)",{"Bgc(hover-blue):h Cur(p)":!e.isMe})},r().default.createElement("div",{className:"D(ib) W(90%) Whs(nw) Tov(e) Ovx(h) Va(m)"},r().default.createElement("span",null,r().default.createElement("img",{alt:"Profile",className:"Bdrs(50%) Va(m)",src:g?l:h,width:"25px",height:"25px"})),r().default.createElement("span",{className:"Fw(b) Mx(5px) Va(m)"},c),g?r().default.createElement("span",{className:"Mend(3px) C(#787d82) Va(m)"},s):null),r().default.createElement("div",{className:"D(ib) W(10%) Ta(c) Va(m)"},f?r().default.createElement("span",null,r().default.createElement(o().Icon,{color:"#787d82",asset:u().default,height:"12",width:"12"})):null)))}),r().default.createElement("div",{className:"ysf-SettingsPanel Bds(s) Bdw(1px) Bdc(border-color) H(380px) Ovy(s) Py(5px) Bgc(white) H(370px) Ovy(h) Pos(r)"},r().default.createElement("div",{className:"Ta(c) Pt(10px)"},r().default.createElement("div",null,r().default.createElement("img",{alt:"Profile",className:"Bdrs(50%)",src:l.display_coverUrl,width:"75px",height:"75px"}),r().default.createElement("div",{className:"Pt(10px) Fz(16px)"},l.display_name),g?r().default.createElement("div",{className:"Fz(11px) C(#26282a) Pt(3px)"},y.length," Members"):null),g?r().default.createElement("div",{className:"Bdtw(1px) Bdtc(#787d82) Bdts(s) Mt(10px) Pt(5px) H(225px) Ovy(s)"},m):r().default.createElement("div",{className:"P(10px)"},r().default.createElement("div",{className:"Ta(c) Pt(7px)"},r().default.createElement(i().I13nDiv,{i13nModel:{sec:"chat_info_block"},bindClickEvent:!0,onClick:b?function(t){return e.unBlockSelectedUser(t,v,E)}:function(t){return e.blockSelectedUser(t,v,E)},className:g?f.default.secondaryButton:f.default.primaryButton},r().default.createElement(s().FormattedMessage,{id:b?"UNBLOCK_USER_X":"BLOCK_USER_X",values:{userName:E}}))))),_?r().default.createElement(h.default,{selectedUser:v,chatMetaData:p,hideUserOverlay:this.hideUserOverlay,startChat:this.props.startChat,blockChatUser:this.props.blockChatUser,unBlockChatUser:this.props.unBlockChatUser}):null)}}]),n}();t.default=C,e.exports=t.default},function(e,t){var n;void 0===n&&(n={}),n.block={name:"block",height:48,width:48,path:"M23.167 41.084c9.573 0 17.333-7.762 17.333-17.334 0-9.573-7.76-17.334-17.333-17.334-9.572 0-17.333 7.76-17.333 17.334 0 9.572 7.76 17.334 17.333 17.334zm.25-38.918C35.337 2.166 45 11.83 45 23.75s-9.664 21.583-21.583 21.583c-11.92 0-21.583-9.663-21.583-21.583 0-11.92 9.663-21.584 21.583-21.584zM7.24 36.37L35.387 7.717l3.033 2.98L10.273 39.35z"},void 0!==e&&e.exports&&(e.exports=n.block)},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var a=l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,r().Component);var t=u(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(n,[{key:"componentDidMount",value:function(){this.scrollBottom()}},{key:"scrollBottom",value:function(){var e=this.messagesEnd;e&&e.scrollIntoView()}},{key:"render",value:function(){var e=this,t=this.props.messageMarkup||[];return r().default.createElement("div",{className:"W(100%) Whs(pl)"},t,r().default.createElement("div",{ref:function(t){e.messagesEnd=t}}))}}]),n}();t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69);function i(){var e=n(2);return i=function(){return e},e}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r().Component);var t=c(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(n,[{key:"render",value:function(){var e=this.props.chat||{},t=e.members||[],n=(0,a.isLeagueChannel)(e);return r().default.createElement("div",{className:"W(100%)"},r().default.createElement("div",{className:"Ta(c)"},r().default.createElement("img",{alt:"Profile",className:"Bdrs(50%)",src:e.display_coverUrl,width:"75px",height:"75px"}),r().default.createElement("div",{className:"Pt(10px) Fz(16px)"},e.display_name),n?r().default.createElement("div",{className:"Fz(11px) C(#26282a) Pt(3px)"},t.length," Members"):null,r().default.createElement("div",{className:"Pt(10px)"},r().default.createElement(i().FormattedMessage,{id:"START_CHATTING_NOW"}))))}}]),n}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(6);return a=function(){return e},e}function i(){var e=function(e){return e&&e.__esModule?e:{default:e}}(n(61));return i=function(){return e},e}function s(){var e=n(5);return s=function(){return e},e}function o(){var e=n(2);return o=function(){return e},e}function u(){var e=n(32);return u=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GifPicker=void 0;var l=n(580);function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function d(e){"@babel/helpers - typeof";return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;return y(e)}(this,n)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(n,r().Component);var t=p(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={gifQuery:""},r.updateGifQuery=r.updateGifQuery.bind(y(r)),r.handleScroll=r.handleScroll.bind(y(r)),r}return function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(n,[{key:"componentDidMount",value:function(){this.props.getGifList()}},{key:"updateGifQuery",value:function(e){var t=this;e&&e.target&&this.setState({gifQuery:e.target.value},function(){t.props.getGifList(t.state.gifQuery)})}},{key:"handleScroll",value:function(){var e=this.gifListScrollList,t=this.gifListEnd,n=e.scrollTop+e.clientHeight;if(t.offsetTop-120<=n){var r=(this.props.gif||{}).gifItems||[];this.props.getGifList(this.state.gifQuery,r.length)}}},{key:"render",value:function(){var e=this,t=this.props,n=this.state,o=t.intl||{},u=(t.gif||{}).gifItems||[],l=[],c=n.gifQuery;return u.forEach(function(t){var n=[t.width,t.height];l.push(r().default.createElement(s().I13nDiv,{onClick:function(){return e.props.sendGifMessage(t.downloadLink,n)},key:t.id+"-gif",className:"W(50%) D(ib) Px(5px) Cur(p)"},r().default.createElement("img",{alt:"Gif",width:"100%",src:t.thumbnailSquare})))}),r().default.createElement("div",{id:"GifPicker",className:"Ovy(s) Bxsh(gif-picker-box-shadow) Bdrs(6px) Bgc(white) Pos(a) Z(2147483647) T(30px) End(10px) W(300px) H(355px)",ref:function(t){e.gifListScrollList=t},onScroll:this.handleScroll},r().default.createElement(s().I13nDiv,{i13nModel:{sec:"chat_close_gif_picker"},bindClickEvent:!0,className:"O(n):f Pos(a) T(0) End(0) Pt(10px) Pend(10px)",onClick:function(t){return e.props.toggleGifPicker(t)}},r().default.createElement(a().Icon,{role:"button",className:"Cur(p)!",color:"#787d82",asset:i().default,height:"15",width:"15"})),r().default.createElement("div",{className:"Pt(30px) Ta(c)"},r().default.createElement("input",{placeholder:o.formatMessage({id:"GIF_SEARCH"}),className:"P(3px) Mx(a) W(95%) Bdrs(3px) Bdc(border-color) Bdw(1px) Bds(s)",onChange:this.updateGifQuery,type:"text",value:c,id:"gifQuery"})),r().default.createElement("div",{className:"W(100%) Py(20px)"},l,r().default.createElement("div",{ref:function(t){e.gifListEnd=t}})))}}]),n}();t.GifPicker=v;var E=(0,o().injectIntl)((0,u().connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)},{getGifList:l.getGifList})(v));t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGifList=void 0;var r=n(22),a=n(168),i=function(e){return e&&e.__esModule?e:{default:e}}(n(88));t.getGifList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.GIF_DEFAULTQUERY,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){(0,a.get)("bootcamp.items",{params:{appid:i.default.GIF_APPID,query:e,offset:t},env:"default"}).then(function(t){var a=t.gifList||[];a.length?n({type:r.GIF_LIST_SUCCESS,gifItems:a,queryText:e}):n({type:r.GIF_LIST_FAILURE})})}}},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(5);return a=function(){return e},e}function i(){var e=n(6);return i=function(){return e},e}function s(){var e=c(n(1));return s=function(){return e},e}function o(){var e=c(n(61));return o=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=c(n(262)),l=c(n(265));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,r().Component);var t=y(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(n,[{key:"onModalClick",value:function(e){e&&e.stopPropagation&&e.stopPropagation()}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.userId,c=e.fantasyMetadata,d=e.reportMessage,f=e.deleteMessage,h=e.startChat,p=e.blockChatUser,y=e.unBlockChatUser,g=e.keyPressHandler,m=e.fileUploadHandler,_=e.onChangeHandler,v=e.selectMessage,E=e.showReactions,b=e.showEmojiPicker,C=e.removeReaction,S=e.addReaction,O=e.memberMap,A=e.hideFocusedImageMedia,U=e.message,w=void 0===U?{}:U,I=e.chatName,M=e.imageRef,T=e.processing,N=e.readStatusMap,R=e.isDirectMessage;return r().default.createElement(a().I13nDiv,{className:"Pos(f) H(100%) W(100%) Z(2147483648) D(f) Ai(c) Jc(sa) T(0) B(0) Start(0) End(0) Bgc(bg-overlay) Cur(p)",onClick:A,onKeyDown:A},r().default.createElement(a().I13nDiv,{className:"Pos(r))",onClick:this.onModalClick},r().default.createElement("div",{className:"Pos(r) H(35px) Bgc(#333) Bdrs(chat-border-radius)"},r().default.createElement("div",{className:"C(white) Fz(15px) Px(20px) Py(8px)"},I),r().default.createElement(a().I13nButton,{onClick:A,className:"Cur(p)! Va(t)! Pos(a) T(8px) End(8px) Bgc(t) Bd(n)"},r().default.createElement(i().Icon,{color:"#fff",asset:o().default,height:"18",width:"18"}))),r().default.createElement("div",{className:"Bgc(white) Pb(10px) Bdrsbstart(8px) Bdrsbend(8px)"},r().default.createElement("img",{src:w.url,alt:w.name,className:(0,s().default)("Maw(600px) Mah(600px) Miw(310px)",{"Op(.5)":T}),ref:M}),T?r().default.createElement("img",{id:"processing",className:"Pos(a) M(a) Start(0) End(0) T(0) B(0)",alt:"Loading",width:"40px",src:"https://s.yimg.com/dh/ap/sbsq/blue-28@2x.gif"}):null,w.preview?r().default.createElement("div",{className:"W(90%) Mstart(5%) Mt(5px) H(30px)"},r().default.createElement("div",{className:"ysf-message-input H(100%) Pos(r) D(ib) W(80%) Va(m)"},r().default.createElement(l.default,{onChangeHandler:_,keyPressHandler:g})),r().default.createElement("div",{className:"W(20%) H(100%) D(ib) Va(m)"},r().default.createElement(a().I13nButton,{disabled:T,onClick:m,className:"W(100%) H(100%) Bd(n) C(white) Bgc(blue-1a)"},t.formatMessage({id:"UPLOAD"})))):r().default.createElement("div",{className:"Px(5px)"},r().default.createElement(u.default,{key:"message-"+w.messageId+w.updatedAt,intl:t,message:w,userId:n,fantasyMetadata:c,reportMessage:d,deleteMessage:f,startChat:h,blockChatUser:p,unBlockChatUser:y,selectMessage:v,showReactions:E,showEmojiPicker:b,removeReaction:C,addReaction:S,memberMap:O,readStatusMap:N,isDirectMessage:R,focusedMediaOverride:!0,forceShowSender:!0,hideOptions:!0})))))}}]),n}();t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(6);return a=function(){return e},e}function i(){var e=u(n(61));return i=function(){return e},e}function s(){var e=n(5);return s=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EmojiPicker=void 0;var o=u(n(170));function u(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,r().PureComponent);var t=h(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(n,[{key:"render",value:function(){var e=o.default.defaultEmojis,t=[],n=this.props,u=n.selectedMessage,l=n.addEmoji,c=n.hideEmojiPicker;return Object.keys(e).forEach(function(n,a){var i=e[n];t.push(r().default.createElement(s().I13nButton,{i13nModel:{sec:"fantasy-chat",elm:"EmojiPicker"},onClick:function(e){return l(e,n,u)},key:n,className:"W(30px) Fz(20px) Fw(n) D(ib) Px(5px) Cur(p) Bgc(t) Bd(n)"},r().default.createElement("span",null,i.char)))}),r().default.createElement("div",{id:"EmojiPicker",className:"Ovy(s) Bxsh(gif-picker-box-shadow) Bdrs(6px) Bgc(white) Pos(a) Z(2147483647) T(100px) End(30px) W(300px)"},r().default.createElement(s().I13nButton,{i13nModel:{sec:"chat_close_emoji_picker"},className:"O(n):f Pos(a) T(0) End(0) Pt(10px) Pend(10px) Bgc(t) Bd(n)",onClick:function(e){return c(e)}},r().default.createElement(a().Icon,{role:"button",className:"Cur(p)!",color:"#787d82",asset:i().default,height:"15",width:"15"})),r().default.createElement("div",{className:"W(100%) Py(30px) Px(10px)"},t))}}]),n}();t.EmojiPicker=y;var g=y;t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uploadAndSendImage=t.uploadImageCloudinary=t.retrieveUploadAuth=t.removeReaction=t.addReaction=t.unBlockUser=t.blockUser=t.deleteMessage=t.reportMessage=t.sendFileMessage=t.sendTextMessage=t.getPrevMessageList=t.showError=void 0;var r=n(168),a=n(22),i=n(266),s=n(87);t.showError=function(e,t){return function(n){n({type:a.ERROR,message:t.formatMessage({id:e})})}};t.getPrevMessageList=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){e.hasMore?(0,i.sbGetMessageList)(e).then(function(e){r({type:a.MESSAGE_LIST_SUCCESS,messageList:e,channelUrl:t,init:n})}).catch(function(e){return r({type:a.MESSAGE_LIST_FAIL})}):r({type:a.MESSAGE_LIST_FAIL})}};t.sendTextMessage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var s=(0,i.sbSendTextMessage)(n,t,function(t,i){r(i?{type:a.SEND_MESSAGE_FAIL,channelUrl:e}:{type:a.SEND_MESSAGE_SUCCESS,message:t,channelUrl:e,channe:n})});r({type:a.SEND_MESSAGE_TEMPORARY,message:s,channelUrl:e})}};var o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return function(u){var l=(0,i.sbSendFileMessage)(r,t,n,s,o,function(t,n){u(n?{type:a.SEND_MESSAGE_FAIL,channelUrl:e}:{type:a.SEND_MESSAGE_SUCCESS,message:t,channelUrl:e})});u({type:a.SEND_MESSAGE_TEMPORARY,message:l,channelUrl:e})}};t.sendFileMessage=o;t.reportMessage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,u="dev"===i?"sendbird-dev":"sendbird-prod";return function(l){(0,r.post)("fantasy.report",{params:{crumb:s,messageId:e.toString(),channelUrl:t,reason:n,provider:u},env:i}).then(function(e){l({type:a.REPORT_MESSAGE_SUCCESS,message:o.formatMessage({id:"MESSAGE_REPORTED"})}),l({type:a.RESET_TOUT})}).catch(function(e){l({type:a.REPORT_MESSAGE_FAILURE,message:o.formatMessage({id:"MESSAGE_REPORTED_ERROR"})}),l({type:a.RESET_TOUT})})}};t.deleteMessage=function(e,t,n){return function(r){(0,i.sbDeleteMessage)(t,e,function(e,t){r(t?{type:a.DELETE_MESSAGE_FAILURE,message:n.formatMessage({id:"MESSAGE_DELETED_FAILURE"})}:{type:a.DELETE_MESSAGE_SUCCESS,message:n.formatMessage({id:"MESSAGE_DELETED"})}),r({type:a.RESET_TOUT})})}};t.blockUser=function(e,t){return function(n){(0,s.sbBlockUser)(e).then(function(e){n({type:a.BLOCK_USER,message:t.formatMessage({id:"BLOCKED_USER"})}),n({type:a.RESET_TOUT})}).catch(function(e){n({type:a.BLOCK_USER_FAILURE,message:t.formatMessage({id:"BLOCKED_USER_FAILURE"})}),n({type:a.RESET_TOUT})})}};t.unBlockUser=function(e,t){return function(n){(0,s.sbUnBlockUser)(e).then(function(e){n({type:a.UNBLOCK_USER,message:t.formatMessage({id:"UNBLOCKED_USER"})}),n({type:a.RESET_TOUT})}).catch(function(e){n({type:a.UNBLOCK_USER_FAILURE,message:t.formatMessage({id:"UNBLOCKED_USER_FAILURE"})}),n({type:a.RESET_TOUT})})}};t.addReaction=function(e,t,n,r,s){return function(o){var u=function(e,t,n,r){return(0,i.sbAddMessageMetaArrayValue)(e,t,n,r,function(t,n){o(n?{type:a.ADD_REACTION_FAILURE,message:s.formatMessage({id:"ADD_REACTION_FAILURE"})}:{type:a.ADD_REACTION_SUCCESS,payload:t,channel:e})})};t.metaArrays.some(function(e){return Object.keys(e)[0]===n})?u(e,t,n,r):(0,i.sbCreateMetaArrayKey)(e,t,n,function(t,i){i?o({type:a.CREATE_REACTION_FAILURE,message:s.formatMessage({id:"CREATE_REACTION_FAILURE"})}):(o({type:a.CREATE_REACTION_SUCCESS,payload:t,channel:e}),u(e,t,n,r))})}};t.removeReaction=function(e,t,n,r,s){return function(o){(0,i.sbRemoveMessageMetaArrayValue)(e,t,n,r,function(t,r){r?o({type:a.REMOVE_REACTION_FAILURE,message:s.formatMessage({id:"REMOVE_REACTION_FAILURE"})}):(o({type:a.REMOVE_REACTION_SUCCESS,payload:t,channel:e}),t.metaArrays.find(function(e){return e.key===n&&!e.value.length})&&(0,i.sbDeleteMetaArrayKey)(e,t,n,function(t,n){o(n?{type:a.DELETE_REACTION_FAILURE,message:s.formatMessage({id:"DELETE_REACTION_FAILURE"})}:{type:a.DELETE_REACTION_SUCCESS,payload:t,channel:e})}))})}};var u=function(e,t,n){return function(i){i({type:a.UPLOAD_AUTH_ATTEMPT,payload:{}}),(0,r.get)("uploader.auth",{params:{upload_preset:"fantasy-chat"},env:"default"}).then(function(e){i({type:a.UPLOAD_AUTH_SUCCESS,payload:{}}),t&&t(e)}).catch(function(t){i({type:a.UPLOAD_AUTH_FAILURE,message:e.formatMessage({id:"UPLOAD_FAILURE"})}),n&&n(t)})}};t.retrieveUploadAuth=u;var l=function(e,t,n,r,i){return function(s){var o=new FormData;o.append("file",n),o.append("timestamp",t.timestamp),o.append("api_key",t.api_key),o.append("signature",t.signature),o.append("upload_preset",t.upload_preset),o.append("tags",t.tags),o.append("public_id",t.public_id),o.append("context",t.context);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState)if(200===u.status){var t=JSON.parse(u.response);s({type:a.UPLOAD_SUCCESS,payload:{}}),r&&r(t)}else{var n=JSON.parse(u.response);s({type:a.UPLOAD_FAILURE,message:e.formatMessage({id:"UPLOAD_FAILURE"})}),i&&i(n)}},s({type:a.UPLOAD_ATTEMPT,payload:{}});u.open("POST","https://api.cloudinary.com/v1_1/yahoofantasysports/upload"),u.send(o)}};t.uploadImageCloudinary=l;t.uploadAndSendImage=function(e,t,n,r,a,i){return function(s){s(u(i,function(u){s(l(i,u,n,function(n){s(o(e,n.secure_url,a,t,n.format,r))}))}))}}},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(5);return a=function(){return e},e}function i(){var e=n(6);return i=function(){return e},e}function s(){var e=u(n(61));return s=function(){return e},e}function o(){var e=u(n(1));return o=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;return p(e)}(this,n)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,r().Component);var t=h(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).openChatHandler=r.openChatHandler.bind(p(r)),r.closeChatHandler=r.closeChatHandler.bind(p(r)),r}return function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(n,[{key:"openChatHandler",value:function(e,t){t&&this.props.openChatHandler(e,t)}},{key:"closeChatHandler",value:function(e){e&&this.props.closeChatHandler(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.hiddenChats||[],u=t.chatList||{},l=[],c=t.showHiddenChatPanel&&n.length;return n.forEach(function(t){var n=u[t]||{},o=n.display_name;l.push(r().default.createElement("div",{key:"hiddenChatRow-"+t,className:"D(f) W(100%)"},r().default.createElement(a().I13nDiv,{i13nModel:{sec:"chat_open_hidden_chats"},bindClickEvent:!0,className:"Cur(p) Bgc(dark-grey):h P(3px) D(b) Cur(p) As(c)",onClick:function(){return e.openChatHandler(n,t)}},o),r().default.createElement(a().I13nDiv,{i13nModel:{sec:"chat_close_hidden_chat"},bindClickEvent:!0,className:"O(n):f Cur(p) As(c)",onClick:function(){return e.closeChatHandler(t)}},r().default.createElement(i().Icon,{role:"button",className:"Cur(p)!",color:"black",asset:s().default,height:"15",width:"15"}))))}),r().default.createElement("div",{className:(0,o().default)("ysf-hiddenChatPanel","Ta(s)","P(10px)","Bdrs(3px)","Whs(nw)",{"D(n)":!c})},l)}}]),n}();t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0));return r=function(){return e},e}function a(){var e=n(2);return a=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(60);function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r().Component);var t=c(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}(n,[{key:"componentDidMount",value:function(){(0,i.positionChatList)()}},{key:"render",value:function(){var e=(this.props.error||{}).error||{};return r().default.createElement("div",{className:"W(100%) Whs(pl)"},r().default.createElement("div",{id:"ChatList",className:"W(250px) Ta(s) D(ib) Va(t) D(n)! Pos(a) Z(100000) Bxsh(chat-list-box-shadow)"},r().default.createElement("div",{className:"Bgc(normal-black) C(white) Px(10px) Va(m) H(35px) D(f)"},r().default.createElement("div",{className:"Pos(a) T(-15px) Start(110px) W(0px) H(0px) Bds(s) Bdc(t) Bdbc(normal-black) Bdendw(15px) Bdstartw(15px) Bdbw(15px)"})),e.description?r().default.createElement("div",{className:"Py(20px) Px(5px) C(error-color) Bgc(white)"},r().default.createElement("h3",null,r().default.createElement(a().FormattedMessage,{id:"THERE_WAS_AN_ERROR"})),r().default.createElement("h4",{className:"Pt(10px) Fw(n) Fz(13px)"},r().default.createElement(a().FormattedMessage,{id:"ERROR_MESSAGE",values:{errorMessage:e.description}}))):r().default.createElement("div",{className:"Py(20px) Px(5px) Bgc(white) Ta(c)"},r().default.createElement("img",{alt:"Loading",width:"50px",src:"https://s.yimg.com/dh/ap/sbsq/blue-28@2x.gif"}))))}}]),n}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=n(36);return r=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n(587)),i=l(n(588)),s=l(n(589)),o=l(n(590)),u=l(n(591));function l(e){return e&&e.__esModule?e:{default:e}}var c=(0,r().combineReducers)({login:a.default,groupChannel:i.default,chat:s.default,env:o.default,gif:u.default});t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(22);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={error:"",user:null,loggedIn:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.LOGIN_SUCCESS:return i(i({},e),{},{user:t.payload,loggedIn:!0});case r.LOGIN_FAIL:return i(i({},e),{},{error:t.payload,loggedIn:!1});default:return e}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(22);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={channels:{},channelsOrder:[],activeChats:[]},c=function(e,t){var n;return n=e.filter(function(e){return e!==t}),[t].concat(o(n))};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],a={},s=e.activeChats,u=e.channelsOrder,d=t.channel||{};d.firstLoad=!1;var f=t.channelUrl||d.url;switch(t.type){case r.NEW_GROUP_CHANNEL_LIST_SUCCESS:return i(i({},e),{},{channelsOrder:o(t.channelsOrder),channels:i(i({},e.channels),t.channels)});case r.GROUP_CHANNEL_LIST_SUCCESS:return i(i({},e),{},{channelsOrder:[].concat(o(e.channelsOrder),o(t.channelsOrder)),channels:i(i({},e.channels),t.channels)});case r.GROUP_CHANNEL_LIST_FAIL:return e;case r.OPEN_CHAT_SUCCESS:return Array.isArray(f)?i(i({},e),{},{activeChats:f}):(d.firstLoad=!0,d.isMinimized=!1,n=c(s,f),a[d.url]=d,i(i({},e),{},{channels:i(i({},e.channels),a),activeChats:o(n)}));case r.OPEN_CHAT_FAILURE:return e;case r.CLOSE_CHAT_SUCCESS:var h=s.filter(function(e){return e!==f});return i(i({},e),{},{activeChats:h});case r.TOGGLE_CHAT_MINIMIZE_SUCCESS:return f&&e.channels&&e.channels[f]&&(e.channels[f].isMinimized=!e.channels[f].isMinimized),i(i({},e),{},{channels:i({},e.channels)});case r.START_NEW_CHAT_SUCCESS:var p=d||{};return a[p.url]=p,i(i({},e),{},{channels:i(i({},e.channels),a)});case r.SEND_MESSAGE_SUCCESS:return n=c(u,f),i(i({},e),{},{channelsOrder:o(n),channels:i(i({},e.channels),d)});case r.MESSAGE_RECEIVED:case r.MESSAGE_UPDATED:return n=c(u,f),a[d.url]=d,i(i({},e),{},{channelsOrder:o(n),channels:i(i({},e.channels),a)});case r.MARK_AS_READ:return a[d.url]=d,i(i({},e),{},{channels:i(i({},e.channels),a)});case r.TYPING_STATUS_UPDATED:return f&&e.channels&&e.channels[f]&&(e.channels[f].typingMembers=t.payload),i(i({},e),{},{channels:i({},e.channels)});default:return f&&e.channels&&e.channels[f]?(e.channels[f].firstLoad=!!t.init,i(i({},e),{},{channels:i({},e.channels)})):e}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(22);function a(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={list:{},toutError:null,toutMsg:"",reloadChat:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0,n=t.channelUrl,i=e.list,s=t.payload,u=(t.channel||{}).url,c=i[u]||[];switch(t.type){case r.ADD_REACTION_SUCCESS:case r.REMOVE_REACTION_SUCCESS:case r.DELETE_REACTION_SUCCESS:case r.MESSAGE_UPDATED:var d=t.payload;return i[u]=c.map(function(e){return e.messageId===d.messageId?d:e}),o(o({},e),{},{list:i,toutError:!1});case r.BLOCK_USER:return o(o({},e),{},{toutError:!1,toutMsg:t.message,reloadChat:!0});case r.BLOCK_USER_FAILURE:case r.ADD_REACTION_FAILURE:case r.REMOVE_REACTION_FAILURE:case r.CREATE_REACTION_FAILURE:case r.DELETE_REACTION_FAILURE:case r.ERROR:return o(o({},e),{},{toutError:!0,toutMsg:t.message});case r.CLOSE_CHAT_SUCCESS:return i[n]=[],o(o({},e),{},{list:i});case r.INIT_CHAT_SCREEN:return o(o({},e),l);case r.CREATE_CHAT_HANDLER_SUCCESS:case r.CREATE_CHAT_HANDLER_FAIL:return o({},e);case r.MESSAGE_LIST_SUCCESS:var f=t.messageList,h=i[n]||[];return i[n]=function(e){var t={};return e.filter(function(e){var n=e.messageId;return!t[n]&&(t[n]=!0,!0)})}(t.init?a(f):[].concat(a(h),a(f))),o(o({},e),{},{list:i});case r.MESSAGE_LIST_FAIL:return o({},e);case r.MESSAGE_RECEIVED:return i[u]=i[u]?[s].concat(a(i[u])):[],o(o({},e),{},{list:i});case r.DELETE_MESSAGE_SUCCESS:return o(o({},e),{},{toutError:!1,toutMsg:t.message});case r.DELETE_MESSAGE_FAILURE:return o(o({},e),{},{toutError:!0,toutMsg:t.message});case r.MESSAGE_DELETED:return i[u]=c.filter(function(e){return parseFloat(e.messageId)!==parseFloat(s)}),o(o({},e),{},{list:i});case r.REPORT_MESSAGE_SUCCESS:return o(o({},e),{},{toutError:!1,toutMsg:t.message});case r.REPORT_MESSAGE_FAILURE:return o(o({},e),{},{toutError:!0,toutMsg:t.message});case r.RESET_TOUT:return o(o({},e),{},{toutError:null,toutMsg:"",reloadChat:!1});case r.SEND_MESSAGE_TEMPORARY:return i[n]=[t.message].concat(a(i[n])),o(o({},e),{},{list:i});case r.SEND_MESSAGE_SUCCESS:var p=t.message,y=i[n].map(function(e){return e.reqId&&p.reqId&&e.reqId.toString()===p.reqId.toString()?p:e});return i[n]=y,o(o({},e),{},{list:i});case r.SEND_MESSAGE_FAIL:return o({},e);case r.UNBLOCK_USER:return o(o({},e),{},{toutError:!1,toutMsg:t.message,reloadChat:!0});case r.UNBLOCK_USER_FAILURE:return o(o({},e),{},{toutError:!0,toutMsg:t.message});case r.UPLOAD_AUTH_ATTEMPT:return o(o({},e),{},{processingUpload:!0});case r.UPLOAD_FAILURE:case r.UPLOAD_AUTH_FAILURE:return o(o({},e),{},{toutError:!0,toutMsg:t.message,processingUpload:!1});case r.UPLOAD_SUCCESS:return o(o({},e),{},{processingUpload:!1});default:return e}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(22);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={env:"default"};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.INIT_SUCCESS:return i(i({},e),{},{env:t.env});default:return e}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(22);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={gifItems:[],extendUrl:"",queryText:""};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.GIF_LIST_SUCCESS:var n=e.queryText===t.queryText?[].concat(o(e.gifItems),o(t.gifItems)):t.gifItems;return i(i({},e),{},{gifItems:n,extendUrl:t.extendUrl,queryText:t.queryText});default:return e}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initEnv=void 0;var r=n(22);t.initEnv=function(e){return function(t){t({type:r.INIT_SUCCESS,env:e})}}},function(e){e.exports={BLOCKED_USER:"User has been successfully blocked",BLOCKED_USER_FAILURE:"There was an error blocking this user, please try again",BLOCK_USER_X:"Block {userName}",CHATS:"Chats",DAYS_AGO:"{num}d ago",ERROR_MESSAGE:" {errorMessage} ",FEEDBACK:"Feedback",GIF_SEARCH:"Search for a gif...",JUST_NOW:"Just now",LAST_MESSAGE:"{sender}: {message}",LEAGUES:"Leagues",MESSAGE_DELETED:"Message Deleted",MESSAGE_DELETED_FAILURE:"There was an error deleting this message, please try again",MESSAGE_REPORTED:"Message Reported",MESSAGE_REPORTED_ERROR:"There was an error reporting this message, please try again",MINUTES_AGO:"{num}m ago",OPEN_DIRECT_MESSAGE:"Open Direct Message",REPORT:"Report",REPORT_MESSAGE:"Report Message",REASON_FOR_REPORTING:"Reason for reporting? (optional)",START_CHATTING_NOW:"Start Chatting Now!",ADD_A_MESSAGE:"Add a message...",THERE_WAS_AN_ERROR:"There was an error.",UNBLOCKED_USER:"User has been successfully unblocked",UNBLOCKED_USER_FAILURE:"There was an error unblocking this user, please try again",UNBLOCK_USER_X:"Unblock {userName}",YEARS_AGO:"{num}y ago",VIA_X:"via {source}",ONE_USER_IS_TYPING:"{userName} is typing...",MULTIPLE_USERS_ARE_TYPING:"{numberUsers} people are typing...",AND:"{term1} and {term2}",SHARED_FILE:"Shared this file",UPLOAD_FAILURE:"Sorry, there was an error uploading your file. Please refresh the page and try again.",INVALID_FILE_TYPE:"Sorry, that file type is not allowed.",UPLOAD:"Upload",SEEN:"Seen"}},function(e){e.exports={_from:"fantasy-chat@^0.3.2",_id:"fantasy-chat@0.3.17",_inBundle:!1,_integrity:"sha1-Cu4kKQqRfq5QGPD4J5NQ79LWcA8=",_location:"/fantasy-chat",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"fantasy-chat@^0.3.2",name:"fantasy-chat",escapedName:"fantasy-chat",rawSpec:"^0.3.2",saveSpec:null,fetchSpec:"^0.3.2"},_requiredBy:["/"],_resolved:"https://registry.npm.vzbuilders.com:4443/npm-registry/api/npm/npm-registry/fantasy-chat/-/fantasy-chat-0.3.17.tgz",_shasum:"0aee24290a917eae5018f0f8279350efd2d6700f",_spec:"fantasy-chat@^0.3.2",_where:"/sd/workspace/src/git.vzbuilders.com/sports/sports/fantasy/react_modules",author:{name:"sports-frontend-devel@oath.com"},browserslist:[">0.2%","not dead","not ie < 11","not op_mini all"],bundleDependencies:!1,dependencies:{"@vzmi/svg-icons":"^5.1.76",classnames:"^2.2.6","object-assign":"^4.1.1","promise-polyfill":"^8.1.0",react:"^16.6.3","react-dom":"^16.6.3","react-i13n":"^2.7.3","react-i13n-rapid":"^3.2.1","react-icons":"^4.3.3","react-intl":"^2.8.0","react-redux":"^4.4.5","react-scripts":"2.1.1",redux:"^3.5.2","redux-thunk":"^2.3.0",sendbird:"^3.0.92","td-utils":"^1.0.60",utf8:"^3.0.0","whatwg-fetch":"^3.0.0"},deprecated:!1,description:"Fantasy Chat Application",devDependencies:{"babel-core":"^6.10.4","babel-eslint":"^9.0.0","babel-jest":"23.6.0","babel-loader":"8.0.4","babel-preset-pubs":"~2.5.1","babel-preset-react-native":"1.9.1","babel-register":"~6.18.0",enzyme:"^3.0.0","enzyme-adapter-react-16":"^1.0.0",eslint:"5.6.0","eslint-config-pubs":"^3.0.0","eslint-plugin-json":"^1.2.0","eslint-plugin-jsx-a11y":"^6.1.2",grunt:"^1.0.4","grunt-atomizer":"^3.1.3","grunt-cli":"^1.3.2","grunt-concurrent":"^2.3.1","grunt-contrib-watch":"^1.1.0","grunt-reactors":"^4.0.10","grunt-shell":"^3.0.1","grunt-webpack":"^3.1.3","identity-obj-proxy":"^3.0.0","jasmine-reporters":"^2.2.0",jest:"^23.0.0","jest-enzyme":"~2.1.2","precommit-hook":"1.0.x",sinon:"^7.2.3"},locator:{rulesets:"td-locator-rulesets"},main:"index.js",name:"fantasy-chat","pre-commit":["lint","test"],scripts:{build:"grunt dist","ci-build":"grunt dist","ci-lint":"eslint --ext .js,.jsx,.json .","ci-test":"jest",eject:"react-scripts eject",lint:"eslint --ext .js,.jsx,.json .",start:"grunt dev",test:"jest"},version:"0.3.17",yahoo:{bugzilla:{product:"Sports",component:"Engineering Infrastructure"},custodian:{email:"sports-frontend-devel@oath.com"},screwdriver:{project_id:"1009667",project_url:"https://screwdriver.ouroath.com/pipelines/1009667"},git:{repo:"git@git.ouroath.com:sports/fantasy-chat",branch:"origin/master",commit:"1a0d2717e6694faa1b035d54f2dd6c7195ea47f7"},sdv4:{pipeline_id:"1009667",job_name:"component",build_id:"9504910"}}}}]);